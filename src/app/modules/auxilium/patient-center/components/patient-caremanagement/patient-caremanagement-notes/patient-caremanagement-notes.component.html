<div class="flex h-full flex-col">
    <!-- Scrollable Notes Section -->
    <div class="flex-1 overflow-y-auto">
        <ac-scrollbar class="h-full">
            @if (contactNotes$ | async; as notes) {
                @for (note of notes; track note.id) {
                    <div
                        class="flex flex-col p-4"
                        [ngClass]="note.priority === 'PRIORITY' ? 'text-red-500' : 'text-black dark:text-white'"
                    >
                        <span class="text-secondary text-sm">
                            ADDED ON {{ note.addDate | datetimeformat }} BY {{ note.addUserId }}
                        </span>
                        <app-aux-html-content-renderer
                            [htmlContent]="note.note.toUpperCase()"
                        ></app-aux-html-content-renderer>
                    </div>
                    <mat-divider class="w-full"></mat-divider>
                }
                @if (!notes.length) {
                    <div class="p-4 text-center text-gray-500">NO NOTES FOUND</div>
                }
            }
        </ac-scrollbar>
    </div>
    <form [formGroup]="contactForm">
        <!-- Fixed Editor Section -->
        <div class="mt-8 bg-white p-4 shadow-inner dark:bg-gray-900">
            <mat-label class="text-black dark:text-white">Notes</mat-label>
            <mat-label class="text-red">*</mat-label>
            <quill-editor
                #quillEditor
                class="mt-2 w-full uppercase"
                [formControlName]="'note'"
                [placeholder]="'Notes'"
                [modules]="quillModules"
            ></quill-editor>
        </div>
        <!-- Alert -->
        @if (alert) {
            <fuse-alert [appearance]="'outline'" [type]="alert.type" [showIcon]="false" [@shake]="true" class="mt-4">
                {{ alert.message }}
            </fuse-alert>
        }
    </form>
</div>
