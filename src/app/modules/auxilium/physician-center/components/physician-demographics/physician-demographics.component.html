<div class="flex flex-auto flex-col overflow-hidden">
    <form [formGroup]="physicianForm" (ngSubmit)="save()" class="w-full">
        <!-- Toolbar -->
        <div class="flex w-full bg-white p-1 shadow dark:bg-transparent">
            <fuse-horizontal-navigation
                [navigation]="toolbarData"
                [name]="'patient-toolbar'"
            ></fuse-horizontal-navigation>
        </div>

        <!-- Patient Demographics Component -->
        <div class="w-full pb-2 pl-1 pr-1 pt-2 md:flex">
            <!-- LEFT COLUM -->
            <div class="flex w-full flex-col md:w-1/2">
                <!-- Patient Details Section -->
                <div class="flex flex-col bg-white p-4 shadow dark:bg-transparent">
                    <!-- Section Title -->
                    <div class="text-secondary my-2 flex items-center text-xl font-semibold">
                        <mat-icon [svgIcon]="'person_outline'" class="mr-2"></mat-icon>
                        Physician Details
                    </div>

                    <div class="mt-4 flex flex-col">
                        <!-- Patient Full Name -->
                        <div class="flex w-full">
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>First Name</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:user-circle'"
                                ></mat-icon>
                                <input class="uppercase" [formControlName]="'firstName'" matInput tabindex="1" />
                            </mat-form-field>
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>Last Name</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:user-circle'"
                                ></mat-icon>
                                <input class="uppercase" matInput [formControlName]="'lastName'" tabindex="2" />
                            </mat-form-field>
                        </div>

                        <!-- Facility -->
                        <div class="flex w-full">
                            <mat-form-field class="w-full pr-2">
                                <mat-label>Facility</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:user-circle'"
                                ></mat-icon>
                                <input class="uppercase" matInput [formControlName]="'facility'" tabindex="3" />
                            </mat-form-field>
                        </div>

                        <!-- Address Line 1 & 2-->
                        <div class="flex w-full">
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>Address</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:location-marker'"
                                ></mat-icon>
                                <input class="uppercase" matInput [formControlName]="'address1'" tabindex="4" />
                            </mat-form-field>
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>Address 2</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:location-marker'"
                                ></mat-icon>
                                <input class="uppercase" matInput [formControlName]="'address2'" tabindex="5" />
                            </mat-form-field>
                        </div>

                        <!-- City / Sate / Zip -->
                        <div class="flex w-full">
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>City</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:location-marker'"
                                ></mat-icon>
                                <input class="uppercase" matInput [formControlName]="'city'" type="text" tabindex="6" />
                            </mat-form-field>
                            <mat-form-field
                                class="state-select w-3/12 pr-2"
                                [appearance]="'outline'"
                                bindLabel="abbreviation"
                            >
                                <mat-label>State</mat-label>
                                <input
                                    matInput
                                    tabindex="7"
                                    aria-label="State"
                                    [matAutocomplete]="auto"
                                    [formControl]="state"
                                />
                                <mat-icon matSuffix class="mr-2 flex-auto text-3xl">arrow_drop_down</mat-icon>
                                <mat-autocomplete #auto="matAutocomplete" [panelWidth]="285">
                                    @for (state of filteredStates | async; track state) {
                                        <mat-option [value]="state.abbreviation">
                                            <span class="mr-1 font-bold">
                                                {{ state.abbreviation }}
                                            </span>
                                            <span>{{ state.name }}</span>
                                        </mat-option>
                                    }
                                </mat-autocomplete>
                            </mat-form-field>
                            <mat-form-field class="w-3/12 pr-2">
                                <mat-label>Zip</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:location-marker'"
                                ></mat-icon>
                                <input class="uppercase" matInput [formControlName]="'zip'" tabindex="8" />
                            </mat-form-field>
                        </div>
                        <div class="flex flex-col">
                            <div class="flex w-full">
                                <mat-form-field class="w-full pr-2">
                                    <mat-label>MEMO</mat-label>
                                    <mat-icon
                                        matPrefix
                                        class="hidden pb-16 icon-size-5 sm:flex"
                                        [svgIcon]="'heroicons_solid:printer'"
                                    ></mat-icon>
                                    <textarea
                                        class="h-20 resize-none uppercase"
                                        matInput
                                        [formControlName]="'memo'"
                                        [placeholder]="'MEMO'"
                                        tabindex="9"
                                        matTextareaAutosize
                                        matAutosizeMinRows="10"
                                    ></textarea>
                                </mat-form-field>
                            </div>
                        </div>
                        <!-- Is Active -->
                        <div class="mt-4">
                            <mat-checkbox
                                class="-ml-2"
                                [color]="'primary'"
                                [formControlName]="'isActive'"
                                tabindex="10"
                            >
                                <span>Is Active?</span>
                            </mat-checkbox>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN -->
            <div class="flex w-full flex-col pl-2 md:w-1/2">
                <!-- Contact Information Section -->
                <div class="flex flex-col bg-white p-4 shadow dark:bg-transparent">
                    <!-- Section Title -->
                    <div class="text-secondary my-2 flex items-center text-xl font-semibold">
                        <mat-icon [svgIcon]="'email'" class="mr-2"></mat-icon>
                        Contact Information
                    </div>

                    <!-- Phone / Cell / Email -->
                    <div class="mt-4 flex flex-col">
                        <div class="flex w-full">
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>Phone</mat-label>
                                <mat-icon
                                    matPrefix
                                    (click)="makeCall()"
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:phone'"
                                ></mat-icon>
                                <input
                                    matInput
                                    [formControlName]="'phone'"
                                    mask="(000) 000-0000"
                                    [showMaskTyped]="true"
                                    tabindex="11"
                                />
                            </mat-form-field>
                            <mat-form-field class="w-6/12 pr-2">
                                <mat-label>Fax</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:printer'"
                                ></mat-icon>
                                <input
                                    matInput
                                    [formControlName]="'fax'"
                                    mask="(000) 000-0000"
                                    [showMaskTyped]="true"
                                    tabindex="12"
                                />
                            </mat-form-field>
                        </div>
                    </div>
                    <mat-form-field class="w-full pr-2">
                        <mat-label>Email</mat-label>
                        <mat-icon
                            matPrefix
                            class="hidden icon-size-5 sm:flex"
                            [svgIcon]="'heroicons_solid:mail'"
                        ></mat-icon>
                        <input class="uppercase" matInput [formControlName]="'email'" tabindex="13" />
                    </mat-form-field>
                    <div class="flex flex-col">
                        <div class="flex w-full">
                            <mat-form-field class="w-full pr-2">
                                <mat-label>UPIN</mat-label>
                                <mat-icon
                                    matPrefix
                                    class="hidden icon-size-5 sm:flex"
                                    [svgIcon]="'heroicons_solid:printer'"
                                ></mat-icon>
                                <input matInput [formControlName]="'upin'" tabindex="14" />
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- Medicaid Number / PECOS -->
                    <div class="flex w-full">
                        <mat-form-field class="w-6/12 pr-2">
                            <mat-label>MEDICAID NUMBER</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:printer'"
                            ></mat-icon>
                            <input class="uppercase" [formControlName]="'medicaid'" matInput tabindex="15" />
                        </mat-form-field>
                        <mat-form-field class="w-6/12 pr-2">
                            <mat-label>PECOS</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:printer'"
                            ></mat-icon>
                            <mat-select [formControlName]="'assignment'" tabindex="16">
                                @for (pecos of pecosOptions; track pecos) {
                                    <mat-option [value]="pecos.value">{{ pecos.option }}</mat-option>
                                }
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="flex w-full">
                        <mat-form-field class="w-6/12 pr-2">
                            <mat-label>TAXONOMY</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:printer'"
                            ></mat-icon>
                            <input
                                class="uppercase"
                                [formControlName]="'taxonomy'"
                                [spellcheck]="false"
                                [matAutocomplete]="auto1"
                                #autoInput
                                matInput
                                tabindex="17"
                            />
                            <mat-autocomplete #auto1="matAutocomplete" (optionSelected)="taxhandler($event)">
                                @for (option of filteredTaxonomy | async; track option) {
                                    <mat-option [value]="option.code">{{ option.code }}</mat-option>
                                }
                            </mat-autocomplete>
                        </mat-form-field>
                        <mat-form-field class="w-6/12 pr-2">
                            <mat-label>STATE ID</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:printer'"
                            ></mat-icon>
                            <input class="uppercase" matInput [formControlName]="'stateid'" tabindex="18" />
                        </mat-form-field>
                    </div>

                    <!-- NPI / Branch -->
                    <div class="flex w-full">
                        <mat-form-field class="w-6/12 pr-2">
                            <mat-label>NPI</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:printer'"
                            ></mat-icon>
                            <input class="uppercase" [formControlName]="'npi'" matInput tabindex="19" />
                        </mat-form-field>
                        <mat-form-field class="w-6/12 pr-2">
                            <mat-label>Branch</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'mat_outline:apartment'"
                            ></mat-icon>
                            <input
                                matInput
                                type="text"
                                tabindex="20"
                                class="uppercase"
                                [formControl]="branchName"
                                [placeholder]="'Branch'"
                                [matAutocomplete]="auto2"
                                #autoInput
                            />
                            <mat-autocomplete
                                #auto2="matAutocomplete"
                                (optionSelected)="onBranchSelected($event.option.value)"
                            >
                                <mat-option *ngFor="let option of branch$ | async" [value]="option">
                                    {{ option.branchcode }}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
