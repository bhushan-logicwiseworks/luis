import{a as Ae}from"./chunk-X74UJ3QR.js";import{a as v}from"./chunk-Y5RI4PHI.js";import{a as We,b as Oe,c as _e}from"./chunk-BLZL7MQY.js";import{a as C,c as Re}from"./chunk-OJSM7WWP.js";import{a as _}from"./chunk-PVSGC5X6.js";import{a as Pe}from"./chunk-FJCYNQP7.js";import"./chunk-GLNCR2H3.js";import{a as Ie}from"./chunk-VK4TGBYQ.js";import{e as k}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as ve}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as H}from"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import{c as ke}from"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as W,b as O,c as b,e as Te}from"./chunk-W6W3L4PS.js";import{a as p,b as x,h as he,n as pe,o as S,p as fe,q as ue,v as w,w as Ce}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import"./chunk-BV6IOHNV.js";import{D as Fe,c as xe,h as Se,m as we,q as De}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as ye}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as Me}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as M,b as u}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as be,p as ge}from"./chunk-HJKZPT2B.js";import{b as me,c as ce}from"./chunk-W5GYUEPJ.js";import{$b as f,Ab as T,Bc as se,Gb as ee,Ia as Y,Ic as ne,J as E,Ja as Z,Jc as le,Ob as c,Vb as te,Zb as m,_b as h,da as Q,dc as re,f as U,fc as P,ga as J,gc as ie,ha as j,md as de,p as L,pb as d,qa as X,rc as ae,sc as oe,tb as s,v as g,w as q,wa as $}from"./chunk-3Q5CJMKA.js";import{b as I}from"./chunk-WFMAM73Y.js";import{a as F,b as y}from"./chunk-2AVGQ2MQ.js";var Ke=p("[ChargesCenter Table/API] Reset Charge State"),Ve=p("[ChargesCenter Table/API] Load Charge"),Ge=p("[ChargesCenter Table/API] Load Charge Success",x()),Ue=p("[ChargesCenter Table/API] Load Charge Failure",x()),qe=p("[ChargesCenter Table/API] Post ConfirmedWorkOrder",x()),Qe=p("[ChargesCenter Table/API] Post ConfirmedWorkOrder Success"),Je=p("[ChargesCenter Table/API] Post ConfirmedWorkOrder Failure",x()),Xe=p("[ChargesCenter Table/API] Refresh"),a={LoadCharges:Ve,LoadChargesSuccess:Ge,LoadChargesFailure:Ue,PostConfirmedWorkOrder:qe,PostConfirmedWorkOrderSuccess:Qe,PostConfirmedWorkOrderFailure:Je,Refresh:Xe,ResetState:Ke};var Le=(()=>{class t{constructor(i,r){this.actions$=i,this.apiService=r,this.loadchargeReps$=W(()=>this.actions$.pipe(b(a.LoadCharges),j(n=>this.apiService.getChargesData().pipe(g(o=>a.LoadChargesSuccess({charges:o})),E(o=>L(a.LoadChargesFailure({error:o.error}))))))),this.postConirmedWorkEdit$=W(()=>this.actions$.pipe(b(a.PostConfirmedWorkOrder),j(n=>this.apiService.postconfirmedworkorder(n.patientData).pipe(g(o=>a.PostConfirmedWorkOrderSuccess()),E(o=>L(a.PostConfirmedWorkOrderFailure({error:o.error}))))))),this.refresh$=W(()=>this.actions$.pipe(b(a.PostConfirmedWorkOrderSuccess),g(()=>a.Refresh())))}static{this.\u0275fac=function(r){return new(r||t)($(O),$(Me))}}static{this.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var B="charges-center-table",z={loading:!1,error:null,charges:[]},Ee=Ce(z,w(a.ResetState,()=>z),w(a.LoadCharges,t=>y(F({},z),{loading:!0})),w(a.LoadChargesSuccess,(t,{charges:e})=>y(F({},t),{loading:!1,charges:e})),w(a.LoadChargesFailure,(t,{error:e})=>y(F({},t),{loading:!1,error:e}))),je=t=>t.loading,$e=t=>t.error,He=t=>t.charges;var K="new-charges-center";function ze(t,e){return he({[B]:Ee})(t,e)}var et=fe(K),D;(function(t){let e=S(et,i=>i[B]);t.selectLoading=S(e,je),t.selectError=S(e,$e),t.selectChargesReps=S(e,He)})(D||(D={}));var Be=[ue(K,ze),Te(Le),v];function it(t,e){if(t&1&&(m(0,"div",1),f(1,"fuse-horizontal-navigation",4),h()),t&2){let i=ie();d(),c("navigation",i.toolbarData)("name","patient-toolbar")}}var A=class V{constructor(e,i,r,n,o,N){this.store=e,this.dateFormatePipe=i,this.dateTime=r,this.actions$=n,this.dialog=o,this.route=N,this.data$=this.store.select(D.selectChargesReps),this.loading$=this.store.select(D.selectLoading),this.rowData=[],this.options={gridOptions:{rowSelection:{mode:"multiRow",checkboxes:!0,headerCheckbox:!0,selectAll:"filtered",checkboxColumn:{width:100,pinned:"left",resizable:!0,suppressMovable:!0,sortable:!0,filter:!1,lockPosition:!0,headerName:"",suppressHeaderMenuButton:!1,headerTooltip:"Checkboxes indicate selection"}},headerHeight:36,rowHeight:40},defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"ID",minWidth:107,field:"id",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Pat Id",minWidth:95,field:"patientid",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Invoice #",minWidth:107,field:"invoiceno",filter:"agMultiColumnFilter",sortIndex:2,hide:!1},{headerName:"SVC Date",minWidth:125,field:"svcdate",filter:"agDateColumnFilter",valueFormatter:l=>this.dateFormatePipe.transform(l.data.svcdate),filterParams:C,sortIndex:3,hide:!1},{headerName:"Item Code",minWidth:115,field:"itemcode",filter:"agMultiColumnFilter",sortIndex:4,hide:!1},{headerName:"T",minWidth:75,field:"billType",filter:"agMultiColumnFilter",sortIndex:5,hide:!1},{headerName:"C",minWidth:75,field:"confirm",filter:"agMultiColumnFilter",sortIndex:6,hide:!1},{headerName:"Qty",minWidth:80,field:"quantity",filter:"agMultiColumnFilter",sortIndex:7,hide:!1},{headerName:"Ship Status",minWidth:115,field:"shipstatus",filter:"agMultiColumnFilter",sortIndex:8,hide:!1},{headerName:"Shipped On",minWidth:160,field:"shipdate",filter:"agDateColumnFilter",valueFormatter:l=>this.dateFormatePipe.transform(l.data.shipdate),filterParams:C,sortIndex:9,hide:!1},{headerName:"Description",minWidth:286,field:"description",filter:"agMultiColumnFilter",sortIndex:10,hide:!1},{headerName:"Next Bill",minWidth:115,field:"lastdatebilled",filter:"agDateColumnFilter",valueFormatter:l=>this.dateFormatePipe.transform(l.data.lastdatebilled),filterParams:C,sortIndex:11,hide:!1},{headerName:"CMN Expire",minWidth:115,field:"cmnexpire",filter:"agDateColumnFilter",valueFormatter:l=>this.dateFormatePipe.transform(l.data.cmnexpire),filterParams:C,sortIndex:12,hide:!1},{headerName:"Notes Expire Date",minWidth:115,field:"notesexpiredate",filter:"agDateColumnFilter",valueFormatter:l=>this.dateFormatePipe.transform(l.data.notesexpiredate),filterParams:C,sortIndex:13,hide:!1},{headerName:"Auth Date",minWidth:115,field:"authdate",filter:"agDateColumnFilter",valueFormatter:l=>this.dateTime.transform(l.data.authdate),filterParams:C,sortIndex:14,hide:!1},{headerName:"Payer",minWidth:165,field:"primarypayer",filter:"agMultiColumnFilter",hide:!1,sortIndex:15}],this.visibleColumns=["checkedField","patientid","invoiceno","svcdate","billType","confirm","quantity","itemcode","shipstatus","shipdate","description","lastdatebilled","cmnexpire","notesexpiredate","authDate","primarypayer"],this.pageSize=20,this.pageSizeOptions=[5,10,20,50],this.refresh=new U,this.refresh$=this.refresh.asObservable(),this.selection=new ke(!0,[]),this.toolbarData=[]}ngOnInit(){q([this.route.paramMap,this.refresh$.pipe(J(null))]).pipe(u(this)).subscribe(([e])=>{this.store.dispatch(a.LoadCharges())}),this.data$.pipe(u(this)).subscribe(e=>{this.rowData=e}),this.actions$.pipe(b(a.Refresh),u(this)).subscribe(e=>this.refresh.next(e))}onChangeSelection(e){this.selection.setSelection(...e.api.getSelectedRows()),this.toolbarData.findIndex(r=>r.title==="Post WO to Charge")===-1&&this.selection.selected.length?this.toolbarData=[...this.toolbarData,{title:"Post WO to Charge",type:"basic",icon:"mat_outline:edit_note",function:r=>{this.postCharges(e)}}]:this.selection.selected.length||(this.toolbarData=[])}postCharges(e){let r={numbers:this.selection.selected.map(n=>n.id)};this.store.dispatch(a.PostConfirmedWorkOrder({patientData:r})),this.selection.clear(),this.toolbarData=[]}static{this.\u0275fac=function(i){return new(i||V)(s(pe),s(_),s(v),s(O),s(k),s(me))}}static{this.\u0275cmp=T({type:V,selectors:[["app-charges-center-table"]],features:[se([v,_])],decls:5,vars:10,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"flex","w-full","bg-white","p-1"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"rowSelectionChange","gridOptions","component","rowData","columnDefs","visibleColumns","agGridHeight","loading"],[3,"navigation","name"]],template:function(i,r){i&1&&(m(0,"div",0),ee(1,it,2,2,"div",1),m(2,"div",2)(3,"aux-ag-grid",3),ne(4,"async"),P("rowSelectionChange",function(o){return r.onChangeSelection(o)}),h()()()),i&2&&(d(),te(r.toolbarData.length?1:-1),d(2),c("gridOptions",r.options)("component","chargescenter")("rowData",r.rowData)("columnDefs",r.columnDefs)("visibleColumns",r.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",le(4,8,r.loading$)))},dependencies:[Pe,Re,de],encapsulation:2})}};A=I([M()],A);var R=class G{constructor(e,i,r,n){this._fuseMediaWatcherService=e,this.auxSearchService=i,this.breakpointObserver=r,this.dialog=n,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",subtitle:"Clear Filter",type:"group",children:[{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()}}]},{title:"Filters",type:"group",children:[{title:"Confirmed Work Orders",type:"basic",icon:"mat_outline:playlist_add_check",link:"./confirmed-orders"}]}],this.searchCtrl=new we,this.isHandset$=this.breakpointObserver.observe([H.Tablet,H.Handset]).pipe(g(o=>o.matches),Q())}ngOnInit(){this.searchCtrl.valueChanges.pipe(u(this)).subscribe(e=>this.auxSearchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(u(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.auxSearchService.search.next(null)}clearFilter(){this.auxSearchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(i){return new(i||G)(s(Ie),s(ve),s(ge),s(k))}}static{this.\u0275cmp=T({type:G,selectors:[["app-charges-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(i,r){if(i&1){let n=re();m(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),oe(5," ChargesCenter "),h()()(),m(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"mat-icon",9)(11,"input",10),h()()()(),m(12,"div",11)(13,"button",12),P("click",function(){Y(n);let N=ae(17);return Z(N.toggle())}),f(14,"mat-icon",13),h()()(),m(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),f(18,"aux-sidebar",16),h(),m(19,"mat-drawer-content",17)(20,"div",18),f(21,"router-outlet"),h()()()()}i&2&&(d(10),c("svgIcon","mat_outline:search"),d(),c("formControl",r.searchCtrl),d(3),c("svgIcon","heroicons_outline:menu"),d(2),c("autoFocus",!1)("mode",r.drawerMode)("opened",r.drawerOpened),d(2),c("menuData",r.menuData)("showTitle",!1)("title","Charge Actions"))},dependencies:[be,Fe,xe,Se,De,ye,_e,Oe,Ae,We,ce],encapsulation:2})}};R=I([M()],R);var ir=[{path:"",component:R,providers:Be,children:[{path:"",redirectTo:"confirmed-orders",pathMatch:"full"},{path:":filterSlug",component:A}]}];export{ir as default};
