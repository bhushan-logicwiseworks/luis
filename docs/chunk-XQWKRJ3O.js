import{a as re}from"./chunk-GSIASDE6.js";import{a as Pt}from"./chunk-EPDAUZIC.js";import{a as Ot}from"./chunk-X74UJ3QR.js";import{a as kt}from"./chunk-VGE2PNKJ.js";import{a as Nt,b as Ht}from"./chunk-7O4GN6JJ.js";import{a as jt}from"./chunk-RW26HZBH.js";import{a as ge}from"./chunk-Y5RI4PHI.js";import{a as Lt,b as Rt,c as Bt}from"./chunk-BLZL7MQY.js";import{a as Me,c as _e}from"./chunk-OJSM7WWP.js";import{a as Ie}from"./chunk-PVSGC5X6.js";import{a as Ft}from"./chunk-ODTVUJKH.js";import"./chunk-GLNCR2H3.js";import{b as Y}from"./chunk-M7CNBRZG.js";import"./chunk-2LVKS4R7.js";import{a as St}from"./chunk-BWPVOFCI.js";import{a as wt,b as At}from"./chunk-T6JQBFCO.js";import{c as ie,d as oe,e as ne,h as gt}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as be}from"./chunk-3IAIBVAD.js";import{a as at}from"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as Et}from"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import{e as yt}from"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as L,b as U,c as F,e as Dt}from"./chunk-W6W3L4PS.js";import{a as u,b as h,h as ot,n as N,o as H,p as nt,q as rt,v as C,w as he}from"./chunk-7TJE7DO7.js";import{a as Mt}from"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import{a as Tt}from"./chunk-2SL7SW2K.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import{a as Jt,c as It}from"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import{a as Ct,c as vt,h as xt}from"./chunk-BV6IOHNV.js";import{B as bt,D as xe,c as ye,e as $,h as Ce,i as lt,m as te,o as st,p as mt,q as dt,r as ct,s as pt,t as ut,u as ft,v as ht,z as ve}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as _t}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as Je}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as P,b as x}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as ee}from"./chunk-HJKZPT2B.js";import{b as tt,c as it}from"./chunk-W5GYUEPJ.js";import{$b as v,Ab as M,Bc as qe,Gb as k,Ia as Ue,Ic as Z,J as O,Ja as Ye,Jc as ue,Kc as Qe,Mc as Xe,Ob as c,Sc as Ze,Ub as Ve,Vb as I,Wb as w,Xb as S,Yb as T,Zb as r,_b as n,dc as ze,f as G,fc as Q,ga as ce,gc as g,gd as Ae,ha as A,md as fe,od as et,p as B,pb as a,qa as pe,rc as ae,sc as l,tb as f,tc as X,uc as D,v as j,w as de,wa as K}from"./chunk-3Q5CJMKA.js";import{b as R}from"./chunk-WFMAM73Y.js";import{a as b,b as y,e as Ke,g as me}from"./chunk-2AVGQ2MQ.js";var $t=Ke(Ne=>{var si={width:24,height:24,body:'<path fill="currentColor" d="m22 5.72l-4.6-3.86l-1.29 1.53l4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86L2 5.71l1.29 1.53l4.59-3.85zM12.5 8H11v6l4.75 2.85l.75-1.23l-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9a9 9 0 0 0 0-18zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7s7 3.13 7 7s-3.13 7-7 7z"/>'};Ne.__esModule=!0;Ne.default=si});var Wt=Ke(je=>{var mi={width:24,height:24,body:'<path fill="currentColor" d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3l7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"/>'};je.__esModule=!0;je.default=mi});var Gt=me($t()),Kt=me(Wt());function di(i,e){i&1&&v(0,"mat-icon",0)}function ci(i,e){i&1&&v(0,"mat-icon",1)}function pi(i,e){if(i&1&&v(0,"mat-icon",2),i&2){let t=g();c("icIcon",t.icTurnedInNot)}}function ui(i,e){if(i&1&&v(0,"mat-icon",3),i&2){let t=g(2);c("icIcon",t.icAlarm)}}function fi(i,e){if(i&1&&(r(0,"div"),k(1,ui,1,1,"mat-icon",3),n()),i&2){let t=g();a(),I(t.params.fieldName==="pending"?1:-1)}}var ke=(()=>{class i{constructor(){this.icTurnedInNot=Kt.default,this.icAlarm=Gt.default}agInit(t){this.params=t}compareDates(t){let o=Date.now();var d=Ae(o,"M/d/yy","en-US"),p=Ae(t,"M/d/yy","en-US");return d==p}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=M({type:i,selectors:[["app-job-center-icon"]],decls:4,vars:4,consts:[["svgIcon","mat_outline:check","size","24px",1,"text-xl","text-green-500"],["svgIcon","mat_outline:close","size","24px",1,"text-xl","text-red-500"],["size","24px",1,"text-blue-500",3,"icIcon"],["size","24px",1,"text-yellow-500",3,"icIcon"]],template:function(o,d){o&1&&k(0,di,1,0,"mat-icon",0)(1,ci,1,0,"mat-icon",1)(2,pi,1,1,"mat-icon",2)(3,fi,2,1,"div"),o&2&&(I(d.params.data.isEnabled&&d.params.fieldName==="isEnabled"?0:-1),a(),I(!d.params.data.isEnabled&&d.params.fieldName==="isEnabled"?1:-1),a(),I(d.params.data.isToday&&d.params.fieldName==="isToday"?2:-1),a(),I(d.compareDates(d.params.data.nextRun)?3:-1))},dependencies:[ee,At,wt],encapsulation:2})}}return i})();var $e=me(Tt());var hi=u("[Jobs] Load Jobs",h()),bi=u("[Jobs/API] Load Jobs Success",h()),yi=u("[Jobs/API] Load Jobs Failure",h()),Ci=u("[Jobs/API] Delete Job",h()),vi=u("[Job List Table/API] Delete Job Success"),xi=u("[Job List Table/API] Delete Job Failure",h()),Ji=u("[Jobs/API] Put Job",h()),Ii=u("[Job List Table/API] Put Job Success"),gi=u("[Job List Table/API] Put Job Failure",h()),_i=u("[Jobs/API] Get Job",h()),Si=u("[Job List Table/API] Get Job Success",h()),Ti=u("[Job List Table/API] Get Job Failure",h()),Di=u("[Jobs/API] Job History",h()),Fi=u("[Job List Table/API] Job History Success",h()),Ei=u("[Job List Table/API] Job History Failure",h()),wi=u("[Jobs/Filter] Change Types",h()),Ai=u("[Jobs/Filter] Change Statuses",h()),Mi=u("[Job Table/API] Load runNow",h()),Ni=u("[Job Details/API] runNow Success",h()),ji=u("[Job Details/API] runNow Failure",h()),ki=u("[Jobs List/API] Refresh"),s={LoadJobs:hi,LoadJobsSuccess:bi,LoadJobsFailure:yi,DeleteJob:Ci,DeleteJobSuccess:vi,DeleteJobFailure:xi,FilterTypesChange:wi,FilterStatusesChange:Ai,updateJob:Ji,updateJobSuccess:Ii,updateJobFailure:gi,GetJobHistory:Di,GetJobHistorySuccess:Fi,GetJobHistoryFailure:Ei,GetJob:_i,GetJobSuccess:Si,GetJobFailure:Ti,runNow:Mi,runNowSuccess:Ni,runNowFailure:ji,Refresh:ki};function Hi(i,e){return t=>t.parent&&i()?e(t):null}var Se=Hi;var Li=u("[Job Create/API] Create Job",h()),Ri=u("[Job Create/API] Create Job Success",h()),Bi=u("[Job Create/API] Create Job Failure",h()),Oi=u("[Job Details/API] Load Job History Details By Id",h()),Pi=u("[Job Details/API] Load Job History Details By Id Success",h()),$i=u("[Job Details/API] Load Job History Details By Id Failure",h()),J={CreateJob:Li,CreateJobSuccess:Ri,CreateJobFailure:Bi,LoadJobHistoryDetailsById:Oi,LoadJobHistoryDetailsByIdSuccess:Pi,LoadJobHistoryDetailsByIdFailure:$i};var He="job-center-table",Wi={loading:!1,error:null,jobs:[],activeJob:null,jobHistory:null,filterStatuses:[],filterTypes:[]},Ut=he(Wi,C(s.LoadJobs,i=>y(b({},i),{loading:!0})),C(s.LoadJobsSuccess,(i,{jobs:e})=>y(b({},i),{loading:!1,jobs:e})),C(s.LoadJobsFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e})),C(s.FilterStatusesChange,(i,{statuses:e})=>y(b({},i),{filterStatuses:e})),C(s.FilterTypesChange,(i,{types:e})=>y(b({},i),{filterTypes:e})),C(s.DeleteJob,i=>y(b({},i),{loading:!0})),C(s.DeleteJobSuccess,i=>y(b({},i),{loading:!1})),C(s.DeleteJobFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e})),C(s.updateJob,i=>y(b({},i),{loading:!0})),C(s.updateJobSuccess,i=>y(b({},i),{loading:!1})),C(s.updateJobFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e})),C(s.GetJob,i=>y(b({},i),{loading:!0})),C(s.GetJobSuccess,(i,{activeJob:e})=>y(b({},i),{loading:!1,activeJob:e})),C(s.GetJobFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e})),C(s.GetJobHistory,i=>y(b({},i),{loading:!0})),C(s.GetJobHistorySuccess,(i,{jobHistory:e})=>y(b({},i),{loading:!1,jobHistory:e})),C(s.GetJobHistoryFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e}))),Yt=i=>i.loading,Vt=i=>i.error,zt=i=>i.jobs,qt=i=>i.activeJob;var Qt=i=>i.jobHistory;var Le="job-individual",Ki={loading:!1,error:null,job:null,JobHistoryData:null},Xt=he(Ki,C(J.CreateJob,i=>y(b({},i),{loading:!0,error:null,email:null})),C(J.CreateJobSuccess,(i,{job:e})=>y(b({},i),{loading:!1,job:e})),C(J.CreateJobFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e})),C(J.LoadJobHistoryDetailsById,i=>y(b({},i),{loading:!0,error:null,email:null})),C(J.LoadJobHistoryDetailsByIdSuccess,(i,{JobHistoryData:e})=>y(b({},i),{loading:!1,JobHistoryData:e})),C(J.LoadJobHistoryDetailsByIdFailure,(i,{error:e})=>y(b({},i),{loading:!1,error:e}))),Zt=i=>i.loading,ei=i=>i.error,ti=i=>i.JobHistoryData;var Re="job-center";function ii(i,e){return ot({[He]:Ut,[Le]:Xt})(i,e)}var oi=nt(Re),W;(function(i){let e=H(oi,t=>t[He]);i.selectLoading=H(e,Yt),i.selectError=H(e,Vt),i.selectJobCenter=H(e,zt),i.selectActiveJob=H(e,qt),i.selectJobHistory=H(e,Qt)})(W||(W={}));var le;(function(i){let e=H(oi,t=>t[Le]);i.selectLoading=H(e,Zt),i.selectError=H(e,ei),i.selectJobHistoryDetailsById=H(e,ti)})(le||(le={}));var E=function(i){return i.HOURLY="HOURLY",i.DAILY="DAILY",i.WEEKLY="WEEKLY",i.WEEKLYSKIP="WEEKLYSKIP",i.WEEKNUMBER="WEEKNUMBER",i.CALENDAR="CALENDAR",i}(E||{});function zi(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),X(t)}}function qi(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function Qi(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function Xi(i,e){if(i&1&&(r(0,"div")(1,"mat-label",15),l(2,"Run job every"),n(),r(3,"mat-form-field",16)(4,"mat-label"),l(5," Hours "),n(),r(6,"mat-select",17),S(7,qi,2,2,"mat-option",10,w),n()(),r(9,"mat-form-field",16)(10,"mat-label"),l(11," Minutes "),n(),r(12,"mat-select",18),S(13,Qi,2,2,"mat-option",10,w),n()()()),i&2){let t=g();a(7),T(t.scheduleHours),a(6),T(t.scheduleMinutes)}}function Zi(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function eo(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function to(i,e){if(i&1&&(r(0,"div")(1,"p"),l(2," Every "),r(3,"mat-form-field",19),v(4,"input",20),n(),l(5," days at "),n(),r(6,"mat-form-field",16)(7,"mat-label"),l(8," Hour "),n(),r(9,"mat-select",17),S(10,Zi,2,2,"mat-option",10,w),n()(),r(12,"mat-form-field",16)(13,"mat-label"),l(14," Minute "),n(),r(15,"mat-select",18),S(16,eo,2,2,"mat-option",10,w),n()()()),i&2){let t=g();a(10),T(t.scheduleHours),a(6),T(t.scheduleMinutes)}}function io(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function oo(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function no(i,e){if(i&1&&(r(0,"li",24)(1,"mat-checkbox",25),l(2),n()()),i&2){let t=e.$index,o=g(2);a(),c("formControlName",t),a(),D("",o.daysOfWeek[t].name," ")}}function ro(i,e){i&1&&(r(0,"div")(1,"p"),l(2," every "),r(3,"mat-form-field",19),v(4,"input",26),n(),l(5," weeks "),n()())}function ao(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t.id),a(),D(" ",t.name," ")}}function lo(i,e){if(i&1&&(r(0,"mat-form-field",16)(1,"mat-label",27),l(2,"Week number"),n(),r(3,"mat-select",28),S(4,ao,2,2,"mat-option",10,w),n()()),i&2){let t=g(2);a(4),T(t.weekNumbers)}}function so(i,e){if(i&1&&(r(0,"div")(1,"mat-label",21),l(2,"Run at"),n(),r(3,"mat-form-field",16)(4,"mat-label"),l(5,"Hour"),n(),r(6,"mat-select",17),S(7,io,2,2,"mat-option",10,w),n()(),r(9,"mat-form-field",16)(10,"mat-label"),l(11,"Minute "),n(),r(12,"mat-select",18),S(13,oo,2,2,"mat-option",10,w),n()(),r(15,"div",22)(16,"mat-label"),l(17,"On the following days"),n()(),r(18,"ul",23),S(19,no,3,2,"li",24,w),n(),k(21,ro,6,0,"div")(22,lo,6,0,"mat-form-field",16),n()),i&2){let t,o,d=g();a(7),T(d.scheduleHours),a(6),T(d.scheduleMinutes),a(6),T(d.addForm.controls.daysOfWeek.controls),a(2),I((d.addForm==null||(t=d.addForm.get("scheduleType"))==null?null:t.value)===d.scheduleTypes.WeeklySkip?21:-1),a(),I((d.addForm==null||(o=d.addForm.get("scheduleType"))==null?null:o.value)===d.scheduleTypes.WeekNumber?22:-1)}}function mo(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function co(i,e){if(i&1&&(r(0,"mat-option",10),l(1),n()),i&2){let t=e.$implicit;c("value",t),a(),D(" ",t," ")}}function po(i,e){i&1&&v(0,"br")}function uo(i,e){if(i&1&&(r(0,"span",30)(1,"mat-checkbox",33),l(2),n(),k(3,po,1,0,"br"),n()),i&2){let t=e.$index,o=g(2);a(),c("formControlName",t),a(),D(" ",o.daysOfMonth[t].id.toString().padStart(2,"0")," "),a(),I(o.daysOfMonth[t].id%10===0?3:-1)}}function fo(i,e){if(i&1&&(r(0,"span",32)(1,"mat-checkbox",34),l(2),n()()),i&2){let t=e.$index,o=g(2);a(),c("formControlName",t),a(),D(" ",o.months[t].name," ")}}function ho(i,e){if(i&1&&(r(0,"div")(1,"mat-form-field",16)(2,"mat-label"),l(3," Hour "),n(),r(4,"mat-select",17),S(5,mo,2,2,"mat-option",10,w),n()(),r(7,"mat-form-field",16)(8,"mat-label"),l(9," Minute "),n(),r(10,"mat-select",18),S(11,co,2,2,"mat-option",10,w),n()(),r(13,"div",29)(14,"mat-label",27),l(15,"Dates"),n(),S(16,uo,4,3,"span",30,w),n(),r(18,"div",31)(19,"mat-label",27),l(20,"Months"),n(),S(21,fo,3,2,"span",32,w),n()()),i&2){let t=g();a(5),T(t.scheduleHours),a(6),T(t.scheduleMinutes),a(5),T(t.daysOfMonthFormArray.controls),a(5),T(t.monthsFormArray.controls)}}function bo(i,e){if(i&1&&(r(0,"fuse-alert",14),l(1),n()),i&2){let t=g();c("appearance","outline")("type",t.alert.type)("showIcon",!1)("@shake",!0),a(),D(" ",t.alert.message," ")}}var z=class Be{constructor(e,t,o,d,p){this.data=e,this.dialogRef=t,this._formBuilder=o,this.store=d,this.actions$=p,this.showDeleteButton=!1,this.dateFormat=Ft.DATE_FORMAT,this.editMode=!1,this.scheduleTypes=E,this.selectActiveJob$=this.store.select(W.selectActiveJob),this.scheduleHours=Array(24).fill(0).map((m,_)=>_),this.scheduleMinutes=Array(12).fill(5).map((m,_)=>_*m),this.daysOfMonth=Array(31).fill(0).map((m,_)=>({id:_+1})),this.daysOfWeek=[{name:"SUNDAY",id:0},{name:"MONDAY",id:1},{name:"TUESDAY",id:2},{name:"WEDNESDAY",id:3},{name:"THRUSDAY",id:4},{name:"FRIDAY",id:5},{name:"SATURDAY",id:6}],this.months=[{name:"JANUARY",id:1},{name:"FEBRUARY",id:2},{name:"MARCH",id:3},{name:"APRIL",id:4},{name:"MAY",id:5},{name:"JUNE",id:6},{name:"JULY",id:7},{name:"AUGUST",id:8},{name:"SEPTEMBER",id:9},{name:"OCTOBER",id:10},{name:"NOVEMBER",id:11},{name:"DECEMBER",id:12}],this.weekNumbers=[{name:"1st",id:1},{name:"2nd",id:2},{name:"3rd",id:3},{name:"4th",id:4},{name:"Last",id:5}],this.job=e.dynamicComponentData,this.initForm()}ngOnInit(){Promise.resolve().then(()=>{this.job?.jobId?(this.store.dispatch(s.GetJob({jobId:this.job?.jobId})),this.selectActiveJob$.pipe(x(this)).subscribe(e=>{this.initForm(e),this.addForm.patchValue(e),this.daysOfWeek.map((t,o)=>{this.addForm.controls.daysOfWeek.controls[o].setValue(e&&e!==null?e.daysOfWeek?.includes(t.id):!1)})})):this.initForm(),this.actions$.pipe(F(J.CreateJobSuccess),x(this)).subscribe(()=>{})})}get scheduleTypesOptions(){return Object.keys(E)}initForm(e){this.addForm=this._formBuilder.group({name:["",[$.required]],commandText:["",[$.required]],start:["",[$.required]],end:[""],hour:["",[$.required]],minute:["",[$.required]],scheduleType:["",[$.required]],isEnabled:[!1],repeatDays:["",[Se(()=>this.selectedScheduleIs(E.DAILY),$.required)]],repeatWeeks:["",[Se(()=>this.selectedScheduleIs(E.WEEKLYSKIP),$.required)]],months:new ve(this.months.map(t=>new te(e?e.months?.includes(t.id):null))),weekOfMonth:["",[Se(()=>this.selectedScheduleIs(E.WEEKNUMBER),$.required)]],daysOfMonth:new ve(this.daysOfMonth.map(t=>new te(e?e.daysOfMonth?.includes(t.id):null))),daysOfWeek:new ve(this.daysOfWeek.map(t=>new te(e&&e!==null?e.daysOfWeek?.includes(t.id):!1)))})}get daysOfMonthFormArray(){return this.addForm.controls.daysOfMonth}get monthsFormArray(){return this.addForm.controls.months}selectedScheduleIs(e){return this.addForm.get("scheduleType").value===e}saveJob(){if(this.addForm.invalid)return;let e=this.addForm.value,t={};t.name=e.name,t.commandText=e.commandText,t.isEnabled=e.isEnabled,t.scheduleType=e.scheduleType,t.start=e.start,e.end==""?t.end=null:t.end=e.end,t.hour=e.hour,t.minute=e.minute,t.scheduleType==E.DAILY&&(t.repeatDays=e.repeatDays),t.lastStatus=this.job?.lastStatus?this.job?.lastStatus:"",[E.WEEKLY,E.WEEKLYSKIP,E.WEEKNUMBER].includes(E[t.scheduleType])&&(t.daysOfWeek=this.reduceArr(e.daysOfWeek,this.daysOfWeek),t.scheduleType==E.WEEKLYSKIP&&(t.repeatWeeks=e.repeatWeeks),t.scheduleType==E.WEEKNUMBER&&(t.weekOfMonth=e.weekOfMonth)),t.scheduleType==E.CALENDAR&&(t.daysOfMonth=this.reduceArr(e.daysOfMonth,this.daysOfMonth),t.months=this.reduceArr(e.months,this.months)),this.job?.jobId?(t.id=this.job?.jobId,this.store.dispatch(s.updateJob({job:t})),this.dialogRef.close()):(this.store.dispatch(J.CreateJob({job:t})),this.dialogRef.close())}reduceArr(e,t){return e.reduce((o,d,p)=>(d&&o.push(t[p].id),o),[])}static{this.\u0275fac=function(t){return new(t||Be)(f(oe,8),f(ie),f(bt),f(N),f(U))}}static{this.\u0275cmp=M({type:Be,selectors:[["ac-job-individual-form"]],inputs:{showDeleteButton:"showDeleteButton"},decls:39,vars:21,consts:[[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-9"],[1,"w-full","max-w-3xl"],[3,"formGroup"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],[1,"mt-4"],["matInput","","cdkTextareaAutosize","",1,"uppercase",3,"formControlName","placeholder","rows","spellcheck"],[1,"w-full"],["formControlName","scheduleType"],[3,"value"],["appearance","outline",1,"w-full"],["matInput","","type","datetime-local",3,"formControlName","placeholder"],["matInput","","formControlName","isEnabled",1,"form-field","mb-2","block"],[1,"mt-4",3,"appearance","type","showIcon"],[1,"mb-2","block"],["appearance","outline",1,"mr-2"],["formControlName","hour"],["formControlName","minute"],["appearance","outline",1,"form-field"],["matInput","","formControlName","repeatDays","type","number","min","1","max","31"],[1,"mr-2"],[1,"mb-4"],[1,"ml-8"],["formArrayName","daysOfWeek"],["matInput","",1,"form-field","mb-2","block",3,"formControlName"],["matInput","","formControlName","repeatWeeks","type","number","min","1","max","31"],[1,"block"],["formControlName","weekOfMonth"],[1,"dom"],["formArrayName","daysOfMonth"],[1,"months"],["formArrayName","months"],["matInput","",1,"form-field","mb-2","mr-3",3,"formControlName"],["matInput","",1,"form-field","mb-2",3,"formControlName"]],template:function(t,o){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"form",2)(3,"mat-form-field",3)(4,"mat-label"),l(5,"Name"),n(),v(6,"mat-icon",4)(7,"input",5),n(),r(8,"div",6)(9,"mat-form-field",3)(10,"mat-label"),l(11,"Command Text"),n(),v(12,"mat-icon",4)(13,"textarea",7),n()(),r(14,"div",6)(15,"mat-form-field",8)(16,"mat-label"),l(17,"Schedule Type"),n(),r(18,"mat-select",9),S(19,zi,2,2,"mat-option",10,w),n()()(),r(21,"div",6)(22,"mat-form-field",11)(23,"mat-label"),l(24,"Start"),n(),v(25,"input",12),n()(),r(26,"div",6)(27,"mat-form-field",11)(28,"mat-label"),l(29,"End"),n(),v(30,"input",12),n()(),r(31,"div",6),k(32,Xi,15,0,"div")(33,to,18,0,"div")(34,so,23,2,"div")(35,ho,23,0,"div"),n(),r(36,"mat-checkbox",13),l(37,"Is Enabled"),n(),k(38,bo,2,5,"fuse-alert",14),n()()()),t&2){let d,p,m,_;a(2),c("formGroup",o.addForm),a(),c("subscriptSizing","dynamic"),a(3),c("svgIcon","heroicons_solid:user-circle"),a(),c("formControlName","name")("placeholder","Name")("spellcheck",!1),a(2),c("subscriptSizing","dynamic"),a(3),c("svgIcon","heroicons_outline:menu-alt-2"),a(),c("formControlName","commandText")("placeholder","Command Text")("rows",4)("spellcheck",!1),a(6),T(o.scheduleTypesOptions),a(6),c("formControlName","start")("placeholder","Start"),a(5),c("formControlName","end")("placeholder","End"),a(2),I((o.addForm==null||(d=o.addForm.get("scheduleType"))==null?null:d.value)===o.scheduleTypes.HOURLY?32:-1),a(),I((o.addForm==null||(p=o.addForm.get("scheduleType"))==null?null:p.value)===o.scheduleTypes.DAILY?33:-1),a(),I((o.addForm==null||(m=o.addForm.get("scheduleType"))==null?null:m.value)===o.scheduleTypes.WEEKLY||(o.addForm==null||(m=o.addForm.get("scheduleType"))==null?null:m.value)===o.scheduleTypes.WEEKLYSKIP||(o.addForm==null||(m=o.addForm.get("scheduleType"))==null?null:m.value)===o.scheduleTypes.WEEKNUMBER?34:-1),a(),I((o.addForm==null||(_=o.addForm.get("scheduleType"))==null?null:_.value)===o.scheduleTypes.CALENDAR?35:-1),a(3),I(o.alert?38:-1)}},dependencies:[xe,st,ye,mt,Ce,lt,ht,ft,ct,ut,pt,xt,Ct,ee,vt,It,Jt,Et,yt,Mt],encapsulation:2})}};z=R([P()],z);function yo(i,e){if(i&1&&(r(0,"tr",7)(1,"td",9),l(2),n(),r(3,"td",9),l(4),n(),r(5,"td",10),l(6),Z(7,"date"),n(),r(8,"td",11),l(9),n()()),i&2){let t=e.$implicit;a(2),X(t.detailId),a(2),X(t.historyId),a(2),D(" ",Qe(7,4,t.createdDate,"MM/dd/yyyy hh:mm a")," "),a(3),X(t.message)}}function Co(i,e){i&1&&(r(0,"div",8)(1,"h1",12),l(2," No Job History Details Available "),n()())}function vo(i,e){if(i&1&&(r(0,"div",2)(1,"table",3)(2,"thead")(3,"tr")(4,"th",4),l(5," Detail ID "),n(),r(6,"th",4),l(7," History ID "),n(),r(8,"th",5),l(9," Date "),n(),r(10,"th",6),l(11," Message "),n()()(),r(12,"tbody"),S(13,yo,10,7,"tr",7,Ve().trackByFn,!0),n()()(),k(15,Co,3,0,"div",8)),i&2){let t=g();a(13),T(t.jobHistoryData),a(2),I(t.jobHistoryData.length===0?15:-1)}}function xo(i,e){if(i&1&&v(0,"ac-loading-overlay",1),i&2){g();let t=ae(4);c("show",t)}}function Jo(i,e){if(i&1&&v(0,"ac-loading-overlay",1),i&2){g();let t=ae(4);c("show",t)}}var De=class Oe{constructor(e,t,o){this.store=e,this.jobHistoryId=t,this.matDialogRef=o,this.loading$=this.store.select(le.selectLoading),this.refresh=new G,this.refresh$=this.refresh.asObservable(),this.data$=this.store.select(le.selectJobHistoryDetailsById);let d=t.dynamicComponentData.historyId;this.store.dispatch(J.LoadJobHistoryDetailsById({historyId:d}))}ngOnInit(){this.data$.pipe(x(this)).subscribe(e=>{e&&(this.jobHistoryData=e)})}trackByFn(e,t){return t.id}submitDetails(){this.matDialogRef.close()}static{this.\u0275fac=function(t){return new(t||Oe)(f(N),f(oe,8),f(ie))}}static{this.\u0275cmp=M({type:Oe,selectors:[["app-job-history-details"]],decls:5,vars:1,consts:[["loading",""],[3,"show"],[1,"container","mx-auto","p-4"],[1,"min-w-full","border","border-gray-300","bg-white","dark:bg-transparent"],[1,"border-b","py-3","pl-2","text-left","text-xs","font-medium","uppercase","tracking-wider","text-gray-500"],[1,"border-b","py-3","pl-3","text-left","text-xs","font-medium","uppercase","tracking-wider","text-gray-500"],[1,"border-b","py-3","pl-6","text-left","text-xs","font-medium","uppercase","tracking-wider","text-gray-500"],[1,"border-b","bg-white","dark:bg-transparent"],[1,"justify-center","py-[5%]"],[1,"whitespace-nowrap","py-4","pl-2"],[1,"whitespace-nowrap","py-4","pl-3"],[1,"whitespace-nowrap","py-4","pl-6"],[1,"to-black","text-center","text-2xl","font-bold","dark:text-white"]],template:function(t,o){t&1&&(r(0,"mat-dialog-content"),k(1,vo,16,1)(2,xo,1,1,"ac-loading-overlay",1)(3,Jo,1,1,"ng-template",null,0,Xe),n()),t&2&&(a(),I(o.jobHistoryData?1:2))},dependencies:[gt,at,et],encapsulation:2})}};De=R([P()],De);var Fe=class Pe{constructor(e,t,o,d,p,m){this.jobId=e,this.dialog=t,this.dialogRef=o,this.store=d,this.dateFormatPipe=p,this.dateTimePipe=m,this.jobHistoryData$=this.store.select(W.selectJobHistory),this.loading$=this.store.select(W.selectLoading),this.columnDefs=[{headerName:"ID",minWidth:65,field:"jobId",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Job Title",minWidth:150,field:"jobTitle",filter:"agTextColumnFilter",sortIndex:2,hide:!1},{headerName:"Machine Name",minWidth:125,field:"machineName",filter:"agTextColumnFilter",sortIndex:2,hide:!1},{headerName:"Start Time",minWidth:160,field:"startTime",valueFormatter:_=>this.dateTimePipe.transform(_.data.startTime),sort:"desc",filter:"agDateColumnFilter",filterParams:Me,sortIndex:10,hide:!1},{headerName:"End Time",minWidth:160,field:"endTime",valueFormatter:_=>this.dateTimePipe.transform(_.data.endTime),filter:"agDateColumnFilter",filterParams:Me,sortIndex:10,hide:!1},{headerName:"Status",minWidth:125,field:"status",cellRenderer:re,cellRendererParams:_=>({category:_.data.status}),filter:"agMultiColumnFilter",sortIndex:11,hide:!1},{headerName:"Message",minWidth:550,field:"message",filter:"agMultiColumnFilter",sortIndex:11,hide:!1}],this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.rowData=[],this.visibleColumns=["jobId","jobTitle","machineName","startTime","endTime","status","message"],this.refresh=new G,this.refresh$=this.refresh.asObservable()}ngOnInit(){de([this.refresh$.pipe(ce(null))]).pipe(x(this)).subscribe(e=>{let t=this.jobId.dynamicComponentData;this.store.dispatch(s.GetJobHistory({jobId:t}))}),this.jobHistoryData$.pipe(x(this)).subscribe(e=>{e&&(this.rowData=e)})}trackByFn(e,t){return t.id}onSelectionChanges(e){this.viewHistoryDetails(e)}viewHistoryDetails(e){let t={icon:"mat_outline:edit_note",title:"Job History Details",cancelButtonText:"Cancel",saveButtonText:"Ok",dynamicComponent:De,dynamicComponentData:e.api.getSelectedRows()[0],submitFunction:"submitDetails",enterKeyEnabled:!0};this.dialog.open(Y,{width:"50%",height:"auto",data:t}).afterClosed().pipe(x(this)).subscribe(o=>{this.refresh.next(o),e.api.clearFocusedCell()})}submitActions(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||Pe)(f(oe,8),f(ne),f(ie),f(N),f(Ie),f(ge))}}static{this.\u0275cmp=M({type:Pe,selectors:[["app-job-history-modal"]],features:[qe([Ie,ge])],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"rowSelectionChange","gridOptions","component","rowData","columnDefs","visibleColumns","agGridHeight","loading"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),Z(3,"async"),Q("rowSelectionChange",function(p){return o.onSelectionChanges(p)}),n()()()),t&2&&(a(2),c("gridOptions",o.options)("component","jobcenterHistory")("rowData",o.rowData)("columnDefs",o.columnDefs)("visibleColumns",o.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",ue(3,7,o.loading$)))},dependencies:[_e,fe],encapsulation:2})}};Fe=R([P()],Fe);var Ee=class We{constructor(e,t,o,d,p,m,_){this.store=e,this.route=t,this.searchService=o,this.cd=d,this.actions$=p,this.dialog=m,this._fuseConfirmationService=_,this.columnDefs=[{headerName:"Job Id",minWidth:50,field:"jobId",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Enabled",minWidth:85,field:"isEnabled",cellRenderer:re,filter:"agMultiColumnFilter",sortIndex:3,hide:!1,cellRendererParams:q=>({isEnabled:q.data.isEnabled===!0?"TRUE":"FALSE"})},{headerName:"Job Name",minWidth:275,field:"jobName",sort:"asc",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Schedule",minWidth:300,field:"schedule",filter:"agTextColumnFilter",sortIndex:2,hide:!1},{headerName:"Today",minWidth:50,field:"isToday",cellRenderer:ke,filter:"agMultiColumnFilter",sortIndex:3,hide:!1,cellRendererParams:{fieldName:"isToday"}},{headerName:"Pending",minWidth:50,field:"todayRun",cellRenderer:ke,filter:"agMultiColumnFilter",sortIndex:4,hide:!1,cellRendererParams:{fieldName:"pending"}},{headerName:"Last Run",minWidth:130,field:"lastRun",filter:"agMultiColumnFilter",sortIndex:6,hide:!1},{headerName:"Next Run",minWidth:130,field:"nextRun",filter:"agMultiColumnFilter",sortIndex:5,hide:!1},{headerName:"Last Status",minWidth:100,field:"lastStatus",cellRenderer:re,cellRendererParams:q=>({category:q.data.lastStatus}),sortIndex:7,hide:!1,filter:"agMultiColumnFilter",filterParams:{filters:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter",filterParams:{cellRenderer:re}}]}},{headerName:"Actions",minWidth:150,field:"actions",cellRenderer:Pt,cellRendererParams:{menuItems:[{name:"View History",action:this.viewHistory.bind(this),icon:"remove_red_eye",color:"text-blue-500"},{name:"Delete Permanently",action:this.deleteRow.bind(this),icon:"mat_outline:delete",color:"text-red-500"},{name:"Run Now",action:this.runNowValidation.bind(this),icon:"mat_outline:bolt",color:"text-yellow-500",disabled:q=>q.data.lastStatus==="RUNNING"}]},filter:!1,sortIndex:8,hide:!1,sortable:!1}],this.visibleColumns=["isEnabled","jobName","schedule","isToday","todayRun","lastRun","nextRun","lastStatus","actions"],this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.data$=this.route.paramMap.pipe(A(q=>this.store.select(W.selectJobCenter))),this.loading$=this.store.select(W.selectLoading),this.refresh=new G,this.refresh$=this.refresh.asObservable(),this.selectedRowIndex=-1,this.rowData=[]}ngOnInit(){de([this.route.paramMap,this.refresh$.pipe(ce(null))]).pipe(x(this)).subscribe(([e])=>{switch(e.get("filterSlug")){case"all":this.loadJobs();break;case"hourly":this.loadJobs(["Hourly"],[]);break;case"daily":this.loadJobs(["Daily"],[]);break;case"weekly":this.loadJobs(["Weekly"],[]);break;case"success":this.loadJobs([],["Success"]);break;case"fail":this.loadJobs([],["Fail"]);break}}),this.data$.pipe(x(this)).subscribe(e=>{this.rowData=e}),this.searchService.search$.pipe(x(this)).subscribe(e=>this.onFilterChange(e)),this.actions$.pipe(F(s.Refresh),x(this)).subscribe(e=>this.refresh.next(e))}loadJobs(e,t){e=e||[],t=t||[],this.store.dispatch(s.LoadJobs({types:e,statuses:t}))}onSelectionChanged(e){e.column.colId!="actions"&&this.openItem(e)}openItem(e){let t={icon:"mat_outline:assignment",iconColor:"primary",title:"SAVE JOB",cancelButtonText:"Cancel",saveButtonText:"Ok",dynamicComponent:z,dynamicComponentData:e.api.getSelectedRows()[0]||null,submitFunction:"saveJob",addonButtonText:"",addonSubmitFunction:"",enterKeyEnabled:!0};this.dialog.open(Y,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(x(this)).subscribe(o=>{this.refresh.next(null),e.api.clearFocusedCell()})}deleteRow(e){this.deleteJob(e.data)}runNowValidation(e){e.data.lastStatus=="RUNNING"?$e.default.fire({title:"There is an instance of the report running.",text:"error",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"CANCEL"}):$e.default.fire({title:"Are you sure you want to run the report now?",text:"",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancel",confirmButtonText:"Yes, run it!"}).then(t=>{t.isConfirmed&&this.store.dispatch(s.runNow({jobId:e.data.jobId}))})}viewHistory(e){let t={icon:"mat_outline:edit_note",title:"Job History",cancelButtonText:"Cancel",saveButtonText:"Ok",dynamicComponent:Fe,dynamicComponentData:e.data.jobId,submitFunction:"submitActions",enterKeyEnabled:!0};this.dialog.open(Y,{width:"70%",height:"auto",data:t}).afterClosed().pipe(x(this)).subscribe(d=>{t.dynamicComponentData=null,this.refresh.next(d),e.api.clearFocusedCell()})}onFilterChange(e){e=e?.trim(),e=e?.toLowerCase(),this.cd.detectChanges(),this.cd.markForCheck()}editJob(e){let t={icon:"mat_outline:assignment",iconColor:"primary",title:"SAVE JOB",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:z,dynamicComponentData:e.jobId||null,submitFunction:"saveContact",enterKeyEnabled:!0};this.dialog.open(Y,{width:"550px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(x(this)).subscribe(o=>{this.refresh.next(o)})}deleteJob(e){let t=e.jobId;this._fuseConfirmationService.open({title:"Delete job",message:"Are you sure you want to delete this job? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().pipe(x(this)).subscribe(d=>{d==="confirmed"&&this.store.dispatch(s.DeleteJob({jobId:t}))})}static{this.\u0275fac=function(t){return new(t||We)(f(N),f(tt),f(be),f(Ze),f(U),f(ne),f(St))}}static{this.\u0275cmp=M({type:We,selectors:[["ac-job-center-table"]],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","gridOptions","component","rowData","columnDefs","visibleColumns","agGridHeight","loading"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),Z(3,"async"),Q("cellClicked",function(p){return o.onSelectionChanged(p)}),n()()()),t&2&&(a(2),c("gridOptions",o.options)("component","jobcenter")("rowData",o.rowData)("columnDefs",o.columnDefs)("visibleColumns",o.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",ue(3,7,o.loading$)))},dependencies:[_e,fe],encapsulation:2,changeDetection:0})}};Ee=R([P()],Ee);var we=class Ge{constructor(e,t){this.searchService=e,this.dialog=t,this.drawerMode="side",this.drawerOpened=!0,this.toggleMenu=!1,this.searchCtrl=new te,this.refresh=new G,this.refresh$=this.refresh.asObservable(),this.menuData=[{title:"Actions",subtitle:"Add Job",type:"group",children:[{title:"Add Job",type:"basic",icon:"heroicons_outline:plus-circle",function:()=>{this.openCreate()}},{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()}}]},{title:"Browse",type:"group",children:[{title:"All Jobs",type:"basic",icon:"mat_outline:all_inclusive",link:"./all"}]}]}ngOnInit(){this.searchCtrl.valueChanges.pipe(x(this)).subscribe(e=>this.searchService.search.next(e))}openCreate(){let e={icon:"mat_outline:assignment",iconColor:"primary",title:"ADD JOB",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:z,dynamicComponentData:null,submitFunction:"saveJob",enterKeyEnabled:!0};this.dialog.open(Y,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:e}).afterClosed().pipe(x(this)).subscribe(t=>{})}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}ngOnDestroy(){this.searchService.search.next(null)}static{this.\u0275fac=function(t){return new(t||Ge)(f(be),f(ne))}}static{this.\u0275cmp=M({type:Ge,selectors:[["ac-job-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(t,o){if(t&1){let d=ze();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),l(5," JobCenter "),n()()(),r(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),v(10,"mat-icon",9)(11,"input",10),n()()()(),r(12,"div",11)(13,"button",12),Q("click",function(){Ue(d);let m=ae(17);return Ye(m.toggle())}),v(14,"mat-icon",13),n()()(),r(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),v(18,"aux-sidebar",16),n(),r(19,"mat-drawer-content",17)(20,"div",18),v(21,"router-outlet"),n()()()()}t&2&&(a(10),c("svgIcon","mat_outline:search"),a(),c("formControl",o.searchCtrl),a(3),c("svgIcon","heroicons_outline:menu"),a(2),c("autoFocus",!1)("mode",o.drawerMode)("opened",o.drawerOpened),a(2),c("menuData",o.menuData)("showTitle",!1)("title","PatientCenter Actions"))},dependencies:[ee,xe,ye,Ce,dt,_t,Bt,Rt,Ot,Lt,it],encapsulation:2,data:{animation:[jt,Ht,Nt,kt]}})}};we=R([P()],we);var ni=me(Tt());var ri=(()=>{class i{constructor(t,o,d){this.actions$=t,this.store=o,this.apiService=d,this.loadJobList$=L(()=>this.actions$.pipe(F(s.LoadJobs),A(p=>this.apiService.getJobs(p.types,p.statuses).pipe(j(m=>s.LoadJobsSuccess({jobs:m})),O(m=>B(s.LoadJobsFailure({error:m.error}))))))),this.getJob$=L(()=>this.actions$.pipe(F(s.GetJob),A(p=>this.apiService.getJob(p.jobId).pipe(j(m=>s.GetJobSuccess({activeJob:m})),O(m=>B(s.GetJobFailure({error:m.error}))))))),this.deleteJob$=L(()=>this.actions$.pipe(F(s.DeleteJob),A(p=>this.apiService.deleteJob(p.jobId).pipe(j(m=>s.DeleteJobSuccess()),O(m=>B(s.DeleteJobFailure({error:m.error}))))))),this.jobHistory$=L(()=>this.actions$.pipe(F(s.GetJobHistory),A(p=>this.apiService.getJobHistory(p.jobId).pipe(j(m=>s.GetJobHistorySuccess({jobHistory:m})),O(m=>B(s.GetJobHistoryFailure({error:m.error}))))))),this.updateJob$=L(()=>this.actions$.pipe(F(s.updateJob),A(p=>this.apiService.updateJob(p.job).pipe(j(m=>s.updateJobSuccess()),O(m=>B(s.updateJobFailure({error:m.error}))))))),this.runNow$=L(()=>this.actions$.pipe(F(s.runNow),A(p=>this.apiService.runNow(p.jobId).pipe(j(m=>(ni.default.fire({position:"top-end",icon:"success",title:"Your job is in the queue",showConfirmButton:!1,timer:2e3}),s.runNowSuccess({runNow:m}))),O(m=>B(s.runNowFailure({error:m.error}))))))),this.refresh$=L(()=>this.actions$.pipe(F(J.CreateJobSuccess,s.updateJobSuccess,s.DeleteJobSuccess),j(()=>s.Refresh())))}static{this.\u0275fac=function(o){return new(o||i)(K(U),K(N),K(Je))}}static{this.\u0275prov=pe({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ai=(()=>{class i{constructor(t,o,d){this.actions$=t,this.apiService=o,this.store=d,this.createJob$=L(()=>this.actions$.pipe(F(J.CreateJob),A(p=>this.apiService.postJob(p.job).pipe(j(m=>J.CreateJobSuccess({job:m})),O(m=>B(J.CreateJobFailure({error:m.error}))))))),this.jobHistoryDetailsById$=L(()=>this.actions$.pipe(F(J.LoadJobHistoryDetailsById),A(p=>this.apiService.getJobHistoryDetailsById(p.historyId).pipe(j(m=>J.LoadJobHistoryDetailsByIdSuccess({JobHistoryData:m})),O(m=>B(J.LoadJobHistoryDetailsByIdFailure({error:m.error})))))))}static{this.\u0275fac=function(o){return new(o||i)(K(U),K(Je),K(N))}}static{this.\u0275prov=pe({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var li=[rt(Re,ii),Dt([ri,ai])];var kr=[{path:"",component:we,providers:li,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:":filterSlug",component:Ee}]}];export{kr as default};
