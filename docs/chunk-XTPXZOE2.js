import{a as Vt}from"./chunk-STLBMOVN.js";import{a as he}from"./chunk-6LE6SZDP.js";import{a as Ut}from"./chunk-EPDAUZIC.js";import{a as Dt}from"./chunk-X74UJ3QR.js";import{a as Pt}from"./chunk-VGE2PNKJ.js";import{a as ft,b as vt}from"./chunk-7O4GN6JJ.js";import{a as ht}from"./chunk-RW26HZBH.js";import{a as Pe}from"./chunk-Y5RI4PHI.js";import{a as gt,b as Ct,c as It}from"./chunk-BLZL7MQY.js";import{c as St}from"./chunk-OJSM7WWP.js";import{a as ct,b as mt,c as dt}from"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as Se}from"./chunk-V2BYYYUY.js";import{a as st}from"./chunk-ODTVUJKH.js";import{a as ue}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as fe}from"./chunk-M7CNBRZG.js";import"./chunk-2LVKS4R7.js";import{a as at}from"./chunk-BWPVOFCI.js";import"./chunk-T6JQBFCO.js";import{a as ot}from"./chunk-VK4TGBYQ.js";import{c as me,d as it,e as de}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as Je}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as Ue}from"./chunk-7RWCIHFI.js";import{a as pt}from"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import{e as Ze}from"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as b,b as $,c as U,e as nt}from"./chunk-W6W3L4PS.js";import{a as u,b as v,h as Ke,n as T,o as k,p as qe,q as He,v as C,w as ee}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-2SL7SW2K.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import{a as ut}from"./chunk-WTDAEWCX.js";import{c as ce}from"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import{a as ne,b as et,c as le,d as tt,h as se}from"./chunk-BV6IOHNV.js";import{B as oe,D as O,c as N,e as R,h as j,i as te,m as Qe,o as ie,q as Xe,r as re,t as ae}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as rt}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import{a as lt}from"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as pe}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as M,b as x}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as L,p as Ye}from"./chunk-HJKZPT2B.js";import{b as ze,c as Ge}from"./chunk-W5GYUEPJ.js";import{$b as h,Ab as _,Bc as Oe,Gb as H,Ia as V,Ic as $e,J as A,Ja as B,Jc as Ve,Ob as a,Sc as Be,Ta as q,Vb as Y,Zb as c,_b as n,da as Ne,dc as J,f as Re,fc as W,ga as je,gc as Q,ha as y,la as De,md as We,p as E,pb as r,qa as K,rc as X,sc as P,tb as p,uc as Z,v as S,w as Le,wa as w}from"./chunk-3Q5CJMKA.js";import{b as F}from"./chunk-WFMAM73Y.js";import{a as I,b as D,g as $t}from"./chunk-2AVGQ2MQ.js";var Bt=u("[PatientPortal Table/API] Load User",v()),Wt=u("[PatientPortal Table/API] Load User Success",v()),zt=u("[PatientPortal Table/API] Load User Failure",v()),Gt=u("[PatientPortal Create/API] Add User",v()),Kt=u("[PatientPortal Create/API] Add User Success",v()),qt=u("[PatientPortal Create/API] Add User Failure",v()),Ht=u("[PatientPortal Update/API] Update User",v()),Yt=u("[PatientPortal Update/API] Update User Success",v()),Jt=u("[PatientPortal Update/API] Update User Failure",v()),Qt=u("[PatientPortal Create/API] Update User Details",v()),Xt=u("[PatientPortal Create/API] Update User Details Success",v()),Zt=u("[PatientPortal Create/API] Update User Details Failure",v()),l={LoadPPUser:Bt,LoadPPUserFailure:zt,LoadPPUserSuccess:Wt,AddPPUser:Gt,AddPPUserSuccess:Kt,AddPPUserFailure:qt,UpdatePPUser:Ht,UpdatePPUserSuccess:Yt,UpdatePPUserFailure:Jt,UpdateUserDetails:Qt,UpdateUserDetailsSuccess:Xt,UpdateUserDetailsFailure:Zt};function ei(t,e){if(t&1&&(c(0,"fuse-alert",8),P(1),n()),t&2){let i=Q();a("appearance","outline")("type",i.alert.type)("showIcon",!1)("@shake",!0),r(),Z(" ",i.alert.message," ")}}var ve=class be{constructor(e,i,o){this._formBuilder=e,this.store=i,this.dialogRef=o,this.showDeleteButton=!1,this.cancel=new q,this.save=new q,this.delete=new q,this.editMode=!1,this.showAlert=!1}ngOnInit(){this.contactForm=this._formBuilder.group({id:[0],patientId:["",[R.required]],registeredEmail:["",[R.required]]}),this.contactForm.patchValue(this.contact)}ngAfterViewInit(){}ngOnDestroy(){}toggleEditMode(e=null){this.cancel.emit(e)}saveContact(){let e=this.contactForm.value;e.registeredEmail=e.registeredEmail?e.registeredEmail.toUpperCase():"",this.store.dispatch(l.AddPPUser({user:e})),this.save.emit(),this.dialogRef.close()}isInputValid(e){return e.guid==""||e.guid==null?(this.alert={type:"error",message:"Guid cannot be blank."},setTimeout(()=>{this.alert=null},6e3),!1):!0}static{this.\u0275fac=function(i){return new(i||be)(p(oe),p(T),p(me))}}static{this.\u0275cmp=_({type:be,selectors:[["ac-patient-portal-individual-form"]],inputs:{contact:"contact",showDeleteButton:"showDeleteButton"},outputs:{cancel:"cancel",save:"save",delete:"delete"},decls:16,vars:12,consts:[[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-9"],[1,"w-full","max-w-3xl"],[3,"formGroup"],[1,"mt-4"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","","numbers","",3,"formControlName","placeholder","spellcheck"],["matInput","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],[1,"mt-4",3,"appearance","type","showIcon"]],template:function(i,o){i&1&&(c(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),P(6,"Patient ID"),n(),h(7,"mat-icon",5)(8,"input",6),n()(),c(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),P(12,"Registered Email"),n(),h(13,"mat-icon",5)(14,"input",7),n()(),H(15,ei,2,5,"fuse-alert",8),n()()()),i&2&&(r(2),a("formGroup",o.contactForm),r(2),a("subscriptSizing","dynamic"),r(3),a("svgIcon","heroicons_outline:hashtag"),r(),a("formControlName","patientId")("placeholder","Patient ID")("spellcheck",!1),r(2),a("subscriptSizing","dynamic"),r(3),a("svgIcon","heroicons_outline:mail"),r(),a("formControlName","registeredEmail")("placeholder","Registered Email")("spellcheck",!1),r(),Y(o.alert?15:-1))},dependencies:[O,ie,N,j,te,re,ae,se,ne,L,le,ce,ut],encapsulation:2,data:{animation:lt}})}};ve=F([M()],ve);var ge=class Fe{constructor(e,i,o,g){this._fuseMediaWatcherService=e,this.searchService=i,this.breakpointObserver=o,this.dialog=g,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",subtitle:"Add new member",type:"group",children:[{title:"Add Patient Portal User",type:"basic",icon:"heroicons_outline:plus-circle",function:()=>{this.openCreate()}},{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()}}]},{title:"Filters",type:"group",children:[{title:"Email Confirmed",type:"basic",icon:"heroicons_outline:clipboard-check",link:"./confirmed"},{title:"Email Unconfirmed",type:"basic",icon:"heroicons_outline:clipboard",link:"./unconfirmed"},{title:"All",type:"basic",icon:"mat_outline:all_inclusive",link:"./all"}]}],this.searchCtrl=new Qe,this.isHandset$=this.breakpointObserver.observe([Ue.Tablet,Ue.Handset]).pipe(S(f=>f.matches),Ne())}ngOnInit(){this.searchCtrl.valueChanges.pipe(x(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(x(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}openCreate(){let e={icon:"mat_outline:assignment",iconColor:"primary",title:"USER DETAILS",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:ve,dynamicComponentData:null,submitFunction:"saveContact",enterKeyEnabled:!0};this.dialog.open(fe,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:e}).afterClosed().pipe(x(this)).subscribe(i=>{})}static{this.\u0275fac=function(i){return new(i||Fe)(p(ot),p(Je),p(Ye),p(de))}}static{this.\u0275cmp=_({type:Fe,selectors:[["ac-patient-portal"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(i,o){if(i&1){let g=J();c(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),P(5," Patient Portal "),n()()(),c(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),h(10,"mat-icon",9)(11,"input",10),n()()()(),c(12,"div",11)(13,"button",12),W("click",function(){V(g);let s=X(17);return B(s.toggle())}),h(14,"mat-icon",13),n()()(),c(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),h(18,"aux-sidebar",16),n(),c(19,"mat-drawer-content",17)(20,"div",18),h(21,"router-outlet"),n()()()()}i&2&&(r(10),a("svgIcon","mat_outline:search"),r(),a("formControl",o.searchCtrl),r(3),a("svgIcon","heroicons_outline:menu"),r(2),a("autoFocus",!1)("mode",o.drawerMode)("opened",o.drawerOpened),r(2),a("menuData",o.menuData)("showTitle",!1)("title","SalesCode Actions"))},dependencies:[L,O,N,j,Xe,rt,It,Ct,Dt,gt,Ge],styles:[".max-w-sx[_ngcontent-%COMP%]{max-width:16rem!important}"],data:{animation:[ht,vt,ft,Pt]}})}};ge=F([M()],ge);var ti=u("[PatientPortal Table/API] Load Users",v()),ii=u("[PatientPortal Table/API] Load Users Success",v()),ri=u("[PatientPortal Table/API] Load Users Failure",v()),ai=u("[PatientPortal Delete/API] Delete User",v()),oi=u("[PatientPortal Delete/API] Delete User Success"),ni=u("[PatientPortal Delete/API] Delete User Failure",v()),li=u("[PatientPortal Table/API] Refresh"),si=u("[PatientPortal Table/API] Reset Users State"),d={LoadPPUsers:ti,LoadPPUsersSuccess:ii,LoadPPUsersFailure:ri,DeletePPUser:ai,DeletePPUserSuccess:oi,DeletePPUserFailure:ni,Refresh:li,ResetState:si};var Ee=$t(Vt());function mi(t,e){if(t&1&&(c(0,"mat-error"),P(1),n()),t&2){let i=Q();r(),Z("Please enter valid date!! It should be ",i.dateFormat,".")}}var Ce=class Ae{constructor(e,i,o,g,f){this.data=e,this._formBuilder=i,this._changeDetectorRef=o,this.dialogRef=g,this.auxUtilService=f,this.isreadonly=!1,this.editMode=!1,this.dateFormat=st.DATE_FORMAT,this.contact=e.dynamicComponentData}ngOnInit(){this.contactForm=this._formBuilder.group({id:[0],patientId:[0],guid:["",[R.required]],registeredEmail:["",[R.required]],userEmail:["",[R.required]],isEmailConfirmed:[""],isElectronicConsent:[""],electronicConsentDate:[Date],createdDate:[Date],createdBy:[""]}),this.contactForm.patchValue(this.contact)}ngAfterViewInit(){}onFocus(){}onBlur(){this.focused=!1,this._changeDetectorRef.markForCheck()}ngOnDestroy(){}toggleEditMode(e=null){e===null?this.editMode=!this.editMode:this.editMode=e,this._changeDetectorRef.markForCheck()}deleteContact(){this.dialogRef.close()}updateContact(){this.dialogRef.close()}onDateChange(e,i){this.contactForm=this.auxUtilService.manuallyCheckDateValid(e.target.value,this.contactForm,i),console.log(this.contactForm.value)}updateUserDetails(){let e=this.contactForm.value;e.electronicConsentDate&&(e.electronicConsentDate=(0,Ee.default)(e.electronicConsentDate).format("YYYY-MM-DD")+(0,Ee.default)().format("THH:mm:ss.SS")),e=this.auxUtilService.convertObjToUppercase(e),this.dialogRef.close(e)}static{this.\u0275fac=function(i){return new(i||Ae)(p(it,8),p(oe),p(Be),p(me),p(ue))}}static{this.\u0275cmp=_({type:Ae,selectors:[["ac-patient-portal-individual"]],decls:59,vars:39,consts:[["datepicker1","matDatepicker"],[1,"flex","w-full","flex-col"],[3,"ngSubmit","formGroup"],[1,"relative","flex","flex-auto","flex-col","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"mt-2","flex","flex-col","space-y-8","border-t","pt-4"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","","readonly","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],["matInput","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],[3,"formControlName","placeholder"],[3,"value"],[1,"custom-datepicker-toggle","w-full",3,"subscriptSizing"],[1,"input-container"],["matIconSuffix","",3,"for"],["matInput","","defaultDate","",3,"change","formControlName","matDatepicker","placeholder"]],template:function(i,o){if(i&1){let g=J();c(0,"div",1)(1,"form",2),W("ngSubmit",function(){return V(g),B(o.updateUserDetails())}),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div")(6,"mat-form-field",6)(7,"mat-label"),P(8,"ID"),n(),h(9,"mat-icon",7)(10,"input",8),n()(),c(11,"div")(12,"mat-form-field",6)(13,"mat-label"),P(14,"Patient Id"),n(),h(15,"mat-icon",7)(16,"input",9),n()(),c(17,"div")(18,"mat-form-field",6)(19,"mat-label"),P(20,"GUID"),n(),h(21,"mat-icon",7)(22,"input",8),n()(),c(23,"div")(24,"mat-form-field",6)(25,"mat-label"),P(26,"User Email"),n(),h(27,"mat-icon",7)(28,"input",9),n()(),c(29,"div")(30,"mat-form-field",6)(31,"mat-label"),P(32,"Email Confirmed"),n(),h(33,"mat-icon",7),c(34,"mat-select",10)(35,"mat-option",11),P(36,"TRUE"),n(),c(37,"mat-option",11),P(38,"FALSE"),n()()()(),c(39,"div")(40,"mat-form-field",6)(41,"mat-label"),P(42,"Electronic Consent"),n(),h(43,"mat-icon",7),c(44,"mat-select",10)(45,"mat-option",11),P(46,"TRUE"),n(),c(47,"mat-option",11),P(48,"FALSE"),n()()()(),c(49,"div")(50,"mat-form-field",12)(51,"mat-label"),P(52,"Electronic Consent Date"),n(),c(53,"div",13),h(54,"mat-datepicker-toggle",14),c(55,"input",15),W("change",function(s){return V(g),B(o.onDateChange(s,"electronicConsentDate"))}),n()(),h(56,"mat-datepicker",null,0),H(58,mi,2,1,"mat-error"),n()()()()()()()}if(i&2){let g=X(57);r(),a("formGroup",o.contactForm),r(5),a("subscriptSizing","dynamic"),r(3),a("svgIcon","heroicons_solid:user-circle"),r(),a("formControlName","id")("placeholder","Id")("spellcheck",!1),r(2),a("subscriptSizing","dynamic"),r(3),a("svgIcon","heroicons_solid:user-circle"),r(),a("formControlName","patientId")("placeholder","Patient Id")("spellcheck",!1),r(2),a("subscriptSizing","dynamic"),r(3),a("svgIcon","mat_outline:qr_code_2"),r(),a("formControlName","guid")("placeholder","GUID")("spellcheck",!1),r(2),a("subscriptSizing","dynamic"),r(3),a("svgIcon","heroicons_outline:mail"),r(),a("formControlName","userEmail")("placeholder","User Email")("spellcheck",!1),r(2),a("subscriptSizing","dynamic"),r(3),a("svgIcon","mat_outline:confirmation_number"),r(),a("formControlName","isEmailConfirmed")("placeholder","Electronic Consent"),r(),a("value",!0),r(2),a("value",!1),r(3),a("subscriptSizing","dynamic"),r(3),a("svgIcon","mat_outline:confirmation_number"),r(),a("formControlName","isElectronicConsent")("placeholder","Electronic Consent"),r(),a("value",!0),r(2),a("value",!1),r(3),a("subscriptSizing","dynamic"),r(4),a("for",g),r(),a("formControlName","electronicConsentDate")("matDatepicker",g)("placeholder",o.dateFormat),r(3),Y(o.contactForm.get("electronicConsentDate").hasError("notValidDate")?58:-1)}},dependencies:[O,ie,N,j,te,re,ae,se,ne,L,le,ce,pt,Ze,dt,tt,mt,ct,et],encapsulation:2})}};Ce=F([M()],Ce);var we="patient-portal-individual",di={loading:!1,error:null,user:null,userDetails:null},yt=ee(di,C(l.LoadPPUser,t=>D(I({},t),{loading:!0,error:null,email:null})),C(l.LoadPPUserSuccess,(t,{user:e})=>D(I({},t),{loading:!1,user:e})),C(l.LoadPPUserFailure,(t,{error:e})=>D(I({},t),{loading:!1,error:e})),C(l.UpdateUserDetails,t=>D(I({},t),{loading:!0,error:null,email:null})),C(l.UpdateUserDetailsSuccess,(t,{userDetails:e})=>D(I({},t),{loading:!1,userDetails:e})),C(l.UpdateUserDetailsFailure,(t,{error:e})=>D(I({},t),{loading:!1,error:e}))),xt=t=>t.loading,Ft=t=>t.error;var Me="patient-portal-table",_e={loading:!1,error:null,users:[]},Et=ee(_e,C(d.ResetState,()=>_e),C(d.LoadPPUsers,t=>D(I({},_e),{loading:!0})),C(d.LoadPPUsersSuccess,(t,{users:e})=>D(I({},t),{loading:!1,users:e})),C(d.LoadPPUsersFailure,(t,{error:e})=>D(I({},t),{loading:!1,error:e})),C(d.DeletePPUser,t=>D(I({},t),{loading:!0})),C(d.DeletePPUserSuccess,t=>D(I({},t),{loading:!1})),C(d.DeletePPUserFailure,(t,{error:e})=>D(I({},t),{loading:!1,error:e}))),At=t=>t.loading,wt=t=>t.error,_t=t=>t.users;var Te="patient-portal";function Tt(t,e){return Ke({[Me]:Et,[we]:yt})(t,e)}var kt=qe(Te),G;(function(t){let e=k(kt,i=>i[Me]);t.selectLoading=k(e,At),t.selectError=k(e,wt),t.selectUsers=k(e,_t)})(G||(G={}));var Mt;(function(t){let e=k(kt,i=>i[we]);t.selectLoading=k(e,xt),t.selectError=k(e,Ft)})(Mt||(Mt={}));var Ie=class ke{constructor(e,i,o,g,f,s,Ot){this.store=e,this.route=i,this.dateTimeFormate=o,this.actions$=g,this.dialog=f,this.auxUtilService=s,this._fuseConfirmationService=Ot,this.columnDefs=[{headerName:"ID",minWidth:50,field:"id",onCellClicked:m=>this.openItem(m)},{headerName:"Pat Id",minWidth:70,field:"patientId",filter:"agMultiColumnFilter",cellRenderer:he,cellRendererParams:{field:"patientId"},onCellClicked:m=>this.handleRedirect("patientid",{data:{patientid:m.data.patientId}})},{headerName:"Registered Email",minWidth:300,field:"registeredEmail",filter:"agMultiColumnFilter",onCellClicked:m=>this.openItem(m)},{headerName:"GUID",minWidth:300,field:"guid",filter:"agMultiColumnFilter",onCellClicked:m=>this.openItem(m)},{headerName:"User Email",minWidth:220,field:"userEmail",filter:"agMultiColumnFilter",onCellClicked:m=>this.openItem(m)},{headerName:"Email Confirmed",minWidth:70,field:"isEmailConfirmed",filter:"agMultiColumnFilter",cellRenderer:he,cellRendererParams:{field:"isEmailConfirmed"},onCellClicked:m=>this.openItem(m)},{headerName:"Electronic Consent",minWidth:70,field:"isElectronicConsent",filter:"agMultiColumnFilter",cellRenderer:he,cellRendererParams:{field:"isElectronicConsent"},onCellClicked:m=>this.openItem(m)},{headerName:"Consent Date",minWidth:150,field:"electronicConsentDate",filter:"agMultiColumnFilter",valueFormatter:m=>this.dateTimeFormate.transform(m.data.electronicConsentDate),onCellClicked:m=>this.openItem(m)},{headerName:"Created By",minWidth:150,field:"createdBy",filter:"agMultiColumnFilter",onCellClicked:m=>this.openItem(m)},{headerName:"Created Date",minWidth:175,field:"createdDate",filter:"agMultiColumnFilter",valueFormatter:m=>this.dateTimeFormate.transform(m.data.createdDate),onCellClicked:m=>this.openItem(m)},{headerName:"Actions",minWidth:100,field:"actions",cellRenderer:Ut,cellRendererParams:{menuItems:[{name:"Delete Permanently",action:this.deleteRow.bind(this),icon:"mat_outline:delete",color:"text-red-500"}]},filter:!1,sortIndex:10,hide:!1,sortable:!1}],this.rowData=[],this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.visibleColumns=["patientId","registeredEmail","guid","isEmailConfirmed","isElectronicConsent","electronicConsentDate","createdDate","actions"],this.loading$=this.store.select(G.selectLoading),this.data$=this.route.paramMap.pipe(y(m=>this.store.select(G.selectUsers))),this.paginatorOptions={pageSize:20,pageSizeOptions:[5,10,20,50]},this.refresh=new Re,this.refresh$=this.refresh.asObservable()}ngOnInit(){Le([this.route.paramMap,this.refresh$.pipe(je(null))]).pipe(x(this)).subscribe(([e])=>{switch(e.get("filterSlug")){case"all":this.store.dispatch(d.LoadPPUsers({filter:"ALL"}));break;case"confirmed":this.store.dispatch(d.LoadPPUsers({filter:"CONFIRMED"}));break;case"unconfirmed":this.store.dispatch(d.LoadPPUsers({filter:"UNCONFIRMED"}));break}}),this.data$.pipe(x(this)).subscribe(e=>{this.rowData=e}),this.actions$.pipe(U(d.Refresh),x(this)).subscribe(e=>{this.refresh.next(e)})}deleteRow(e){this.delete(e.data)}ngAfterViewInit(){}ngOnDestroy(){this.store.dispatch(d.ResetState())}openItem(e){let i={icon:"mat_outline:assignment",iconColor:"primary",title:"EDIT USER DETAILS",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:Ce,dynamicComponentData:e.api.getSelectedRows()[0]||null,submitFunction:"updateUserDetails",enterKeyEnabled:!0};this.dialog.open(fe,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:i}).afterClosed().pipe(x(this)).subscribe(o=>{o&&(this.store.dispatch(l.UpdateUserDetails({userDetails:o})),e.api.clearFocusedCell()),o||(this.refresh.next(o),e.api.clearFocusedCell())})}delete(e){this._fuseConfirmationService.open({title:"Delete contact",message:"Are you sure you want to delete this contact? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().pipe(x(this)).subscribe(o=>{o==="confirmed"&&this.store.dispatch(d.DeletePPUser({dto:e}))})}handleRedirect(e,i){this.auxUtilService.redirectToNewTab(e,i)}static{this.\u0275fac=function(i){return new(i||ke)(p(T),p(ze),p(Pe),p($),p(de),p(ue),p(at))}}static{this.\u0275cmp=_({type:ke,selectors:[["ac-patient-portal-table"]],features:[Oe([Pe])],decls:4,vars:10,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"gridOptions","columnDefs","rowData","component","visibleColumns","loading","paginatorOption","agGridHeight"]],template:function(i,o){i&1&&(c(0,"div",0)(1,"div",1),h(2,"aux-ag-grid",2),$e(3,"async"),n()()),i&2&&(r(2),a("gridOptions",o.options)("columnDefs",o.columnDefs)("rowData",o.rowData)("component","patientPortalTable")("visibleColumns",o.visibleColumns)("loading",Ve(3,8,o.loading$))("paginatorOption",o.paginatorOptions)("agGridHeight","calc(100vh - 292px)"))},dependencies:[St,We],encapsulation:2,changeDetection:0})}};Ie=F([M()],Ie);var Lt=(()=>{class t{constructor(i,o,g){this.actions$=i,this.apiService=o,this.store=g,this.getAccess$=b(()=>this.actions$.pipe(U(l.LoadPPUser),y(f=>this.apiService.getPatientPortalUser(f.id).pipe(S(s=>l.LoadPPUserSuccess({user:s})),A(s=>E(l.LoadPPUserFailure({error:s.error}))))))),this.addAccess$=b(()=>this.actions$.pipe(U(l.AddPPUser),y(f=>this.apiService.addPatientPortalUser(f.user).pipe(S(s=>l.AddPPUserSuccess({user:s})),A(s=>E(l.AddPPUserFailure({error:s.error}))))))),this.updateAccess$=b(()=>this.actions$.pipe(U(l.UpdatePPUser),y(f=>this.apiService.updatePatientPortalUser(f.user).pipe(S(s=>l.UpdatePPUserSuccess({user:s})),A(s=>E(l.UpdatePPUserFailure({error:s.error}))))))),this.updateUserDetails$=b(()=>this.actions$.pipe(U(l.UpdateUserDetails),y(f=>this.apiService.updatePatientPortalUser(f.userDetails).pipe(S(s=>l.UpdateUserDetailsSuccess({userDetails:s})),A(s=>E(l.UpdateUserDetailsFailure({error:s.error}))))))),this.updateUserDetailsSuccess$=b(()=>this.actions$.pipe(U(l.UpdateUserDetailsSuccess),De(()=>{Se.EDIT_SUCCESS()})),{dispatch:!1}),this.updateUserDetailsFailure$=b(()=>this.actions$.pipe(U(l.UpdateUserDetailsFailure),De(()=>{Se.EDIT_FAILURE()})),{dispatch:!1})}static{this.\u0275fac=function(o){return new(o||t)(w($),w(pe),w(T))}}static{this.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nt=(()=>{class t{constructor(i,o,g){this.actions$=i,this.store=o,this.apiService=g,this.loadUsers$=b(()=>this.actions$.pipe(U(d.LoadPPUsers),y(f=>this.apiService.getPatientPortalUsers(f.filter).pipe(S(s=>d.LoadPPUsersSuccess({users:s})),A(s=>E(d.LoadPPUsersFailure({error:s.error}))))))),this.deleteAccess$=b(()=>this.actions$.pipe(U(d.DeletePPUser),y(f=>this.apiService.deletePatientPortalUser(f.dto).pipe(S(s=>d.DeletePPUserSuccess()),A(s=>E(d.DeletePPUserFailure({error:s.error}))))))),this.refresh$=b(()=>this.actions$.pipe(U(l.AddPPUserSuccess,d.DeletePPUserSuccess,l.UpdateUserDetailsSuccess),S(()=>d.Refresh())))}static{this.\u0275fac=function(o){return new(o||t)(w($),w(T),w(pe))}}static{this.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var jt=[He(Te,Tt),nt([Nt,Lt])];var ra=[{path:"",component:ge,providers:jt,children:[{path:"",redirectTo:"confirmed",pathMatch:"full"},{path:":filterSlug",component:Ie}]}];export{ra as default};
