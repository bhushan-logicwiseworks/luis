import{a as ut}from"./chunk-EPDAUZIC.js";import{a as ft}from"./chunk-X74UJ3QR.js";import{a as st}from"./chunk-VGE2PNKJ.js";import{a as at,b as lt}from"./chunk-7O4GN6JJ.js";import{a as dt}from"./chunk-RW26HZBH.js";import{a as oe}from"./chunk-Y5RI4PHI.js";import{a as ct,b as mt,c as pt}from"./chunk-BLZL7MQY.js";import{a as ie,c as Ct}from"./chunk-OJSM7WWP.js";import{a as it,b as ot,c as rt}from"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as le}from"./chunk-V2BYYYUY.js";import{a as et}from"./chunk-ODTVUJKH.js";import{a as tt}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as te}from"./chunk-M7CNBRZG.js";import"./chunk-2LVKS4R7.js";import{a as Qe}from"./chunk-BWPVOFCI.js";import"./chunk-T6JQBFCO.js";import{a as Xe}from"./chunk-VK4TGBYQ.js";import{c as He,d as qe,e as Z}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as ke}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as se}from"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as P,b as R,c as w,e as Ye}from"./chunk-W6W3L4PS.js";import{a as f,b as v,h as _e,n as F,o as x,p as Te,q as Me,v as b,w as q}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-2SL7SW2K.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import{a as nt}from"./chunk-WTDAEWCX.js";import{c as Ge}from"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import{a as Be,b as We,c as Ue,d as Ke,h as ze}from"./chunk-BV6IOHNV.js";import{B as $e,D as Y,c as Q,e as de,h as X,i as Pe,l as Re,m as Le,o as je,q as Oe,r as Ve,t as Ne}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as Je}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import{a as Ze}from"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as ee}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as k,b as g}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J,p as Ee}from"./chunk-HJKZPT2B.js";import{b as we,c as Ae}from"./chunk-W5GYUEPJ.js";import{$b as u,Ab as E,Bc as De,Gb as U,Ia as V,Ic as ye,J as O,Ja as N,Jc as Se,Ob as n,Vb as K,Zb as d,_b as a,da as be,dc as z,f as ge,fc as _,ga as Ie,gc as G,ha as A,md as Fe,p as j,pb as r,qa as W,rc as $,sc as h,tb as m,uc as H,v as y,w as xe,wa as S}from"./chunk-3Q5CJMKA.js";import{b as M}from"./chunk-WFMAM73Y.js";import{a as I,b as D}from"./chunk-2AVGQ2MQ.js";var kt=f("[CodeCenter Table/API] Load Code"),Pt=f("[CodeCenter Table/API] Load Code Success",v()),Rt=f("[CodeCenter Table/API] Load Code Failure",v()),Lt=f("[CodeCenter Create/API] Add Code",v()),jt=f("[CodeCenter Create/API] Add Code Success",v()),Ot=f("[CodeCenter Create/API] Add Code Failure",v()),C={LoadCode:kt,LoadCodeFailure:Rt,LoadCodeSuccess:Pt,AddCode:Lt,AddCodeSuccess:jt,AddCodeFailure:Ot};var vt=(()=>{class t{constructor(i,o,s){this.actions$=i,this.apiService=o,this.store=s,this.addCode$=P(()=>this.actions$.pipe(w(C.AddCode),A(l=>this.apiService.saveCode(l.code).pipe(y(c=>(le.ADD_SUCCESS(),C.AddCodeSuccess({code:c}))),O(c=>(le.ADD_FAILURE(),j(C.AddCodeFailure({error:c.error}))))))))}static{this.\u0275fac=function(o){return new(o||t)(S(R),S(ee),S(F))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nt=f("[CodeCenter Table/API] Reset Codes State"),$t=f("[CodeCenter Table/API] Load Codes"),Bt=f("[CodeCenter Table/API] Load Codes Success",v()),Wt=f("[CodeCenter Table/API] Load Codes Failure",v()),Ut=f("[CodeCenter Delete/API] Delete Code",v()),Kt=f("[CodeCenter Delete/API] Delete Code Success"),zt=f("[CodeCenter Delete/API] Delete Code Failure",v()),Gt=f("[CodeCenter Table/API] Refresh"),p={LoadCodes:$t,LoadCodesSuccess:Bt,LoadCodesFailure:Wt,Refresh:Gt,ResetState:Nt,DeleteCode:Ut,DeleteCodeSuccess:Kt,DeleteCodeFailure:zt};var gt=(()=>{class t{constructor(i,o,s){this.actions$=i,this.store=o,this.apiService=s,this.loadCode$=P(()=>this.actions$.pipe(w(p.LoadCodes),A(l=>this.apiService.getAllCodes().pipe(y(c=>p.LoadCodesSuccess({codelist:c})),O(c=>j(p.LoadCodesFailure({error:c.error}))))))),this.deleteCode$=P(()=>this.actions$.pipe(w(p.DeleteCode),A(l=>this.apiService.deleteCode(l.dto).pipe(y(c=>p.DeleteCodeSuccess()),O(c=>j(p.DeleteCodeFailure({error:c.error}))))))),this.refresh$=P(()=>this.actions$.pipe(w(C.AddCodeSuccess,p.DeleteCodeSuccess),y(()=>p.Refresh())))}static{this.\u0275fac=function(o){return new(o||t)(S(R),S(F),S(ee))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var me="code-center-individual",Ht={loading:!1,error:null,codes:null,code:[]},xt=q(Ht,b(C.LoadCode,t=>D(I({},t),{loading:!0})),b(C.LoadCodeSuccess,(t,{code:e})=>D(I({},t),{loading:!1,codes:e})),b(C.LoadCodeFailure,(t,{error:e})=>D(I({},t),{loading:!1,error:e}))),bt=t=>t.loading,It=t=>t.codes,Dt=t=>t.error;var fe="code-center-table",pe={loading:!1,error:null,codes:[]},yt=q(pe,b(p.ResetState,()=>pe),b(p.LoadCodes,t=>D(I({},pe),{loading:!0})),b(p.LoadCodesSuccess,(t,{codelist:e})=>D(I({},t),{loading:!1,codes:e})),b(p.LoadCodesFailure,(t,{error:e})=>D(I({},t),{loading:!1,error:e}))),St=t=>t.loading,Ft=t=>t.error,wt=t=>t.codes;var ue="code-center";function _t(t,e){return _e({[fe]:yt,[me]:xt})(t,e)}var Tt=Te(ue),B;(function(t){let e=x(Tt,i=>i[fe]);t.selectLoading=x(e,St),t.selectError=x(e,Ft),t.selectCodeReps=x(e,wt)})(B||(B={}));var At;(function(t){let e=x(Tt,i=>i[me]);t.selectLoading=x(e,bt),t.selectCode=x(e,It),t.selectError=x(e,Dt)})(At||(At={}));var Mt=[Me(ue,_t),Ye([gt,vt])];function Yt(t,e){if(t&1&&(d(0,"mat-error"),h(1),a()),t&2){let i=G();r(),H("Please enter valid date!! It should be ",i.dateFormat,".")}}function Zt(t,e){if(t&1&&(d(0,"mat-error"),h(1),a()),t&2){let i=G();r(),H("Please enter valid date!! It should be ",i.dateFormat,".")}}function ei(t,e){if(t&1&&(d(0,"fuse-alert",13),h(1),a()),t&2){let i=G();n("appearance","outline")("type",i.alert.type)("showIcon",!1)("@shake",!0),r(),H(" ",i.alert.message," ")}}var L=class Ce{constructor(e,i,o,s,l){this.data=e,this._formBuilder=i,this.store=o,this.auxUtilService=s,this.dialogRef=l,this.showDeleteButton=!1,this.state=new Re,this.dateFormat=et.DATE_FORMAT,this.editMode=!1,this.codeDisplayData=e.dynamicComponentData}ngOnInit(){this.contactForm=this._formBuilder.group({id:[0],code:["",[de.required]],codetype:["",[de.required]],description:[""],adduserid:[""],adddate:[""],syslock:[!0],effectivedate:[""],expiredate:[""],path:[""],action:[""],notes:[""],miscflag1:[!0]}),this.contactForm.patchValue(this.codeDisplayData)}ngAfterViewInit(){}ngOnDestroy(){}saveContact(){if(this.contactForm.invalid)return;let e=this.contactForm.value;this.isInputValid(e)&&(e.id==0&&(e.adddate=new Date,e.effectivedate=new Date(1900,0,1),e.expiredate=new Date(1900,0,1)),e=this.auxUtilService.transFormValuesToUpperCase(e,["code","codetype","description","path","action","notes"]),e=this.auxUtilService.cleanData(e),this.store.dispatch(C.AddCode({code:e})),this.dialogRef.close())}isInputValid(e){return e.code==""||e.code==null?(this.alert={type:"error",message:"Code cannot be blank."},setTimeout(()=>{this.alert=null},6e3),!1):!0}onDateChange(e,i){this.contactForm=this.auxUtilService.manuallyCheckDateValid(e.target.value,this.contactForm,i)}static{this.\u0275fac=function(i){return new(i||Ce)(m(qe,8),m($e),m(F),m(tt),m(He))}}static{this.\u0275cmp=E({type:Ce,selectors:[["ac-code-center-individual-form"]],inputs:{showDeleteButton:"showDeleteButton"},decls:42,vars:29,consts:[["datepicker1","matDatepicker"],["datepicker2","matDatepicker"],[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-9"],[1,"w-full","max-w-3xl"],[3,"formGroup"],[1,"mt-4"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],[1,"custom-datepicker-toggle","w-full",3,"subscriptSizing"],[1,"input-container"],["matIconSuffix","",3,"for"],["matInput","","defaultDate","",3,"change","formControlName","matDatepicker","placeholder"],[1,"mt-4",3,"appearance","type","showIcon"]],template:function(i,o){if(i&1){let s=z();d(0,"div",2)(1,"div",3)(2,"form",4)(3,"div",5)(4,"mat-form-field",6)(5,"mat-label"),h(6,"Code"),a(),u(7,"mat-icon",7)(8,"input",8),a()(),d(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),h(12,"Code Type"),a(),u(13,"mat-icon",7)(14,"input",8),a()(),d(15,"div",5)(16,"mat-form-field",6)(17,"mat-label"),h(18,"Description"),a(),u(19,"mat-icon",7)(20,"input",8),a()(),d(21,"div",5)(22,"mat-form-field",9)(23,"mat-label"),h(24,"Effective Date"),a(),d(25,"div",10),u(26,"mat-datepicker-toggle",11),d(27,"input",12),_("change",function(c){return V(s),N(o.onDateChange(c,"effectivedate"))}),a()(),u(28,"mat-datepicker",null,0),U(30,Yt,2,1,"mat-error"),a()(),d(31,"div",5)(32,"mat-form-field",9)(33,"mat-label"),h(34,"Expired Date"),a(),d(35,"div",10),u(36,"mat-datepicker-toggle",11),d(37,"input",12),_("change",function(c){return V(s),N(o.onDateChange(c,"expiredate"))}),a()(),u(38,"mat-datepicker",null,1),U(40,Zt,2,1,"mat-error"),a()(),U(41,ei,2,5,"fuse-alert",13),a()()()}if(i&2){let s=$(29),l=$(39);r(2),n("formGroup",o.contactForm),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","code")("placeholder","Code")("spellcheck",!1),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","codetype")("placeholder","Code Type")("spellcheck",!1),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","description")("placeholder","Description")("spellcheck",!1),r(2),n("subscriptSizing","dynamic"),r(4),n("for",s),r(),n("formControlName","effectivedate")("matDatepicker",s)("placeholder",o.dateFormat),r(3),K(o.contactForm.get("effectivedate").hasError("notValidDate")?30:-1),r(2),n("subscriptSizing","dynamic"),r(4),n("for",l),r(),n("formControlName","expiredate")("matDatepicker",l)("placeholder",o.dateFormat),r(3),K(o.contactForm.get("expiredate").hasError("notValidDate")?40:-1),r(),K(o.alert?41:-1)}},dependencies:[Y,je,Q,X,Pe,Ve,Ne,ze,Be,J,Ue,Ge,rt,Ke,ot,it,We,nt],encapsulation:2,data:{animation:Ze}})}};L=M([k()],L);var ne=class he{constructor(e,i,o,s){this._fuseMediaWatcherService=e,this.searchService=i,this.breakpointObserver=o,this.dialog=s,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",subtitle:"Add new team member",type:"group",children:[{title:"Add Code",type:"basic",icon:"heroicons_outline:plus-circle",function:()=>{this.openCreate()}},{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()}}]}],this.searchCtrl=new Le,this.isHandset$=this.breakpointObserver.observe([se.Tablet,se.Handset]).pipe(y(l=>l.matches),be())}ngOnInit(){this.searchCtrl.valueChanges.pipe(g(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(g(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}openCreate(){let e={icon:"mat_outline:assignment",iconColor:"primary",title:"ADD CODE",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:L,dynamicComponentData:null,submitFunction:"saveContact",enterKeyEnabled:!0};this.dialog.open(te,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:e}).afterClosed().pipe(g(this)).subscribe(i=>{})}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(i){return new(i||he)(m(Xe),m(ke),m(Ee),m(Z))}}static{this.\u0275cmp=E({type:he,selectors:[["ac-code-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(i,o){if(i&1){let s=z();d(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),h(5," CodeCenter "),a()()(),d(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),u(10,"mat-icon",9)(11,"input",10),a()()()(),d(12,"div",11)(13,"button",12),_("click",function(){V(s);let c=$(17);return N(c.toggle())}),u(14,"mat-icon",13),a()()(),d(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),u(18,"aux-sidebar",16),a(),d(19,"mat-drawer-content",17)(20,"div",18),u(21,"router-outlet"),a()()()()}i&2&&(r(10),n("svgIcon","mat_outline:search"),r(),n("formControl",o.searchCtrl),r(3),n("svgIcon","heroicons_outline:menu"),r(2),n("autoFocus",!1)("mode",o.drawerMode)("opened",o.drawerOpened),r(2),n("menuData",o.menuData)("showTitle",!1)("title","Code Actions"))},dependencies:[J,Y,Q,X,Oe,Je,pt,mt,ft,ct,Ae],styles:[".max-w-sx[_ngcontent-%COMP%]{max-width:16rem!important}"],data:{animation:[dt,lt,at,st]}})}};ne=M([k()],ne);var ae=class ve{constructor(e,i,o,s,l,c){this.store=e,this.route=i,this.actions$=o,this.dialog=s,this.datetimeFormatPipe=l,this._fuseConfirmationService=c,this.rowData=[],this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"ID",minWidth:100,field:"id",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Code",minWidth:150,field:"code",sort:"asc",filter:"agMultiColumnFilter",sortIndex:2,hide:!1},{headerName:"Codetype",minWidth:150,field:"codetype",filter:"agMultiColumnFilter",sortIndex:3,hide:!1},{headerName:"Description",minWidth:400,field:"description",filter:"agMultiColumnFilter",sortIndex:4,hide:!1},{headerName:"Added By",minWidth:100,field:"adduserid",filter:"agMultiColumnFilter",sortIndex:5,hide:!1},{headerName:"Added Date",minWidth:150,field:"adddate",valueFormatter:T=>this.datetimeFormatPipe.transform(T.data.adddate),filter:"agDateColumnFilter",filterParams:ie,sortIndex:6,hide:!1},{headerName:"Effective Date",minWidth:200,field:"effectivedate",valueFormatter:T=>this.datetimeFormatPipe.transform(T.data.effectivedate),filter:"agDateColumnFilter",filterParams:ie,sortIndex:7,hide:!1},{headerName:"Expired Date",minWidth:200,field:"expiredate",valueFormatter:T=>this.datetimeFormatPipe.transform(T.data.expiredate),filter:"agDateColumnFilter",filterParams:ie,sortIndex:8,hide:!1},{headerName:"Path",minWidth:220,field:"path",filter:"agMultiColumnFilter",sortIndex:9,hide:!1},{headerName:"Actions",minWidth:100,field:"actions",cellRenderer:ut,cellRendererParams:{menuItems:[{name:"Delete Permanently",action:this.deleteRow.bind(this),icon:"mat_outline:delete",color:"text-red-500"}]},filter:!1,sortIndex:10,hide:!1,sortable:!1}],this.visibleColumns=["code","codetype","description","adddate","adduserid"],this.loading$=this.store.select(B.selectLoading),this.data$=this.route.paramMap.pipe(A(T=>this.store.select(B.selectCodeReps))),this.refresh=new ge,this.refresh$=this.refresh.asObservable(),this.selectedRowIndex=-1}ngOnInit(){xe([this.route.paramMap,this.refresh$.pipe(Ie(null))]).pipe(g(this)).subscribe(([e])=>{this.store.dispatch(p.LoadCodes())}),this.data$.pipe(g(this)).subscribe(e=>{this.rowData=e}),this.actions$.pipe(w(p.Refresh),g(this)).subscribe(e=>this.refresh.next(e))}ngAfterViewInit(){}onSelectionChanged(e){e.column.colId!="actions"&&this.openItem(e)}openItem(e){let i={icon:"mat_outline:assignment",iconColor:"primary",title:"SAVE CODE",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:L,dynamicComponentData:e.api.getSelectedRows()[0]||null,submitFunction:"saveContact",enterKeyEnabled:!0};this.dialog.open(te,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:i}).afterClosed().pipe(g(this)).subscribe(o=>{e.api.clearFocusedCell()})}deleteRow(e){this.deleteContact(e.data)}deleteContact(e){this._fuseConfirmationService.open({title:"Delete Code Rep",message:"Are you sure you want to delete this Code rep? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().pipe(g(this)).subscribe(o=>{o==="confirmed"&&this.store.dispatch(p.DeleteCode({dto:e}))})}static{this.\u0275fac=function(i){return new(i||ve)(m(F),m(we),m(R),m(Z),m(oe),m(Qe))}}static{this.\u0275cmp=E({type:ve,selectors:[["ac-code-center-table"]],features:[De([oe])],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","gridOptions","component","rowData","columnDefs","visibleColumns","agGridHeight","loading"]],template:function(i,o){i&1&&(d(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),ye(3,"async"),_("cellClicked",function(l){return o.onSelectionChanged(l)}),a()()()),i&2&&(r(2),n("gridOptions",o.options)("component","codecenter")("rowData",o.rowData)("columnDefs",o.columnDefs)("visibleColumns",o.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",Se(3,7,o.loading$)))},dependencies:[Ct,Fe],styles:["ac-code-center-table .mat-mdc-form-field-bottom-align:before{content:none!important}.description-field[_ngcontent-%COMP%]{max-width:400px;overflow:hidden;text-overflow:ellipsis}.example-second-header-row[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}"]})}};ae=M([k()],ae);var Mo=[{path:"",component:ne,providers:Mt,children:[{path:"",component:ae}]}];export{Mo as default};
