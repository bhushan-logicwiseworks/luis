import{a as Re,b as We}from"./chunk-US4VIAPG.js";import"./chunk-XPFFTSXC.js";import"./chunk-LQP35CM2.js";import"./chunk-JBP6HANX.js";import{a as k}from"./chunk-6LE6SZDP.js";import{a as _e}from"./chunk-X74UJ3QR.js";import{a as Ee}from"./chunk-Y5RI4PHI.js";import{a as Te,b as Ne,c as Ae}from"./chunk-BLZL7MQY.js";import{c as Le}from"./chunk-OJSM7WWP.js";import{j as O}from"./chunk-4RIDPFY2.js";import"./chunk-6YJMKPRN.js";import"./chunk-OD2F5SLA.js";import{a as N}from"./chunk-PVSGC5X6.js";import"./chunk-WX54DYK2.js";import"./chunk-XMHJJKH6.js";import"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as Ie}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as W}from"./chunk-M7CNBRZG.js";import"./chunk-T6JQBFCO.js";import{a as xe}from"./chunk-VK4TGBYQ.js";import{e as Me}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as T}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as R}from"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as Se,b as De,c as we,e as ye}from"./chunk-W6W3L4PS.js";import{a as h,b as I,h as le,n as se,o as C,p as me,q as de,v as g,w as ce}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import"./chunk-WTDAEWCX.js";import"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import"./chunk-BV6IOHNV.js";import{D as ve,c as fe,h as he,m as Ce,q as ge}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as be}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as Fe}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as F,b as u}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as ue,p as pe}from"./chunk-HJKZPT2B.js";import{b as ne,c as oe}from"./chunk-W5GYUEPJ.js";import{$b as f,Ab as w,Bc as te,Ia as Q,Ic as ae,J as V,Ja as J,Jc as re,Ob as d,Zb as c,_b as p,da as q,dc as X,f as G,fc as y,ga as Y,ha as D,md as ie,p as K,pb as m,qa as z,rc as Z,sc as ee,tb as o,v as S,w as H,wa as L}from"./chunk-3Q5CJMKA.js";import{b as x}from"./chunk-WFMAM73Y.js";import{a as M,b}from"./chunk-2AVGQ2MQ.js";var Ke=h("[Feature] Reset State"),He=h("[CareManagementCenter Table/API] Load CareManagement",I()),Ve=h("[CareManagementCenter Table/API] Load CareManagement Success",I()),qe=h("[CareManagementCenter Table/API] Load CareManagement Failure",I()),n={resetState:Ke,LoadCareManagement:He,LoadCareManagementSuccess:Ve,LoadCareManagementFailure:qe};var Oe=(()=>{class r{constructor(t,a){this.actions$=t,this.apiService=a,this.loadCareManagements$=Se(()=>this.actions$.pipe(we(n.LoadCareManagement),D(l=>this.apiService.getCareManagement(l.filter).pipe(S(s=>n.LoadCareManagementSuccess({CareManagements:s})),V(s=>K(n.LoadCareManagementFailure({error:s.error})))))))}static{this.\u0275fac=function(a){return new(a||r)(L(De),L(Fe))}}static{this.\u0275prov=z({token:r,factory:r.\u0275fac})}}return r})();var B="compliance-center-table",P={loading:!1,error:null,CareManagements:[]},Pe=ce(P,g(n.resetState,()=>P),g(n.LoadCareManagement,r=>b(M({},P),{loading:!0})),g(n.LoadCareManagementSuccess,(r,{CareManagements:e})=>b(M({},r),{loading:!1,CareManagements:e})),g(n.LoadCareManagementFailure,(r,{error:e})=>b(M({},r),{loading:!1,error:e}))),Be=r=>r.loading,je=r=>r.error,Ue=r=>r.CareManagements;var j="caremanagement-center";function $e(r,e){return le({[B]:Pe})(r,e)}var ze=me(j),v;(function(r){let e=C(ze,t=>t[B]);r.selectLoading=C(e,Be),r.selectError=C(e,je),r.selectCareManagements=C(e,Ue)})(v||(v={}));var Ge=[de(j,$e),ye(Oe)];var A=class U{constructor(e,t,a){this._fuseMediaWatcherService=e,this.searchService=t,this.breakpointObserver=a,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",type:"group",children:[{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()},classes:{wrapper:"padding-style"}}]},{title:"Filters",type:"group",children:[{title:"ALL",type:"basic",icon:"mat_outline:all_inclusive",link:"./all"}]}],this.searchCtrl=new Ce,this.isHandset$=this.breakpointObserver.observe([R.Tablet,R.Handset]).pipe(S(l=>l.matches),q())}ngOnInit(){this.searchCtrl.valueChanges.pipe(u(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(u(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(t){return new(t||U)(o(xe),o(T),o(pe))}}static{this.\u0275cmp=w({type:U,selectors:[["app-caremanagement-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(t,a){if(t&1){let l=X();c(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),ee(5," Care Management Center "),p()()(),c(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"mat-icon",9)(11,"input",10),p()()()(),c(12,"div",11)(13,"button",12),y("click",function(){Q(l);let E=Z(17);return J(E.toggle())}),f(14,"mat-icon",13),p()()(),c(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),f(18,"aux-sidebar",16),p(),c(19,"mat-drawer-content",17)(20,"div",18),f(21,"router-outlet"),p()()()()}t&2&&(m(10),d("svgIcon","mat_outline:search"),m(),d("formControl",a.searchCtrl),m(3),d("svgIcon","heroicons_outline:menu"),m(2),d("autoFocus",!1)("mode",a.drawerMode)("opened",a.drawerOpened),m(2),d("menuData",a.menuData)("showTitle",!1)("title","SalesCode Actions"))},dependencies:[ue,ve,fe,he,ge,be,Ae,Ne,_e,Te,oe],encapsulation:2})}};A=x([F()],A);var _=class ${constructor(e,t,a,l,s,E){this.store=e,this.route=t,this.dateFormatePipe=a,this.searchService=l,this.auxUtilService=s,this.dialog=E,this.rowData=[],this.options={gridOptions:{rowDragManaged:!1,rowDragEntireRow:!0,rowDragMultiRow:!0,rowSelection:"multiple"},defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"ID",field:"id",minWidth:70,sort:"desc",sortIndex:1},{headerName:"Patient ID",field:"patientId",filter:"agNumberColumnFilter",minWidth:90,cellRenderer:k,cellRendererParams:{field:"patientId"},onCellClicked:i=>this.handleRedirect("caremanagement",{data:{patientid:i.data.patientId}})},{headerName:"State",field:"state",filter:"agMultiColumnFilter",minWidth:70},{headerName:"Date Assigned",field:"dateAssigned",valueFormatter:i=>this.dateFormatePipe.transform(i.data.dateAssigned),filter:"agDateColumnFilter",minWidth:110},{headerName:"Due Date",field:"dueDate",valueFormatter:i=>this.dateFormatePipe.transform(i.data.dueDate),filter:"agDateColumnFilter",minWidth:110},{headerName:"Label",field:"label",filter:"agMultiColumnFilter",minWidth:90},{headerName:"Assigned To",field:"assignedTo",filter:"agMultiColumnFilter",minWidth:115},{headerName:"Serviced By",field:"servicedBy",filter:"agMultiColumnFilter",minWidth:115},{headerName:"Ins ID",field:"insuranceId",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Updated",field:"insuranceUpdated",filter:"agMultiColumnFilter",cellDataType:"text",filterValueGetter:i=>i.data.insuranceUpdated?"YES":"NO",valueFormatter:i=>i.value?"YES":"NO",minWidth:90},{headerName:"Billing Code",field:"billingCode",filter:"agMultiColumnFilter",minWidth:105},{headerName:"Billing Details",field:"billingDetails",filter:"agMultiColumnFilter",minWidth:175},{headerName:"Updated By",field:"updatedByUser",filter:"agMultiColumnFilter",minWidth:115},{headerName:"Noble ID",field:"nobleId",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Sent Ship",field:"sentForShipment",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Ship Date",field:"shipmentDate",valueFormatter:i=>this.dateFormatePipe.transform(i.data.shipmentDate),filter:"agDateColumnFilter",minWidth:110},{headerName:"Notes",field:"contactNotes",cellRenderer:k,cellRendererParams:{field:"contactNotes"},minWidth:75,onCellClicked:i=>this.openContactNote(i.data.id,i.data.patientId)}],this.visibleColumns=["id","patientId","state","dateAssigned","dueDate","assignedTo","servicedBy","insuranceId","insuranceUpdated","billingCode","billingDetails","updatedByUser","nobleId","sentForShipment","shipmentDate","contactNotes"],this.data$=this.route.paramMap.pipe(D(i=>this.store.select(v.selectCareManagements))),this.loading$=this.store.select(v.selectLoading),this.refresh=new G,this.refresh$=this.refresh.asObservable()}ngOnInit(){H([this.route.paramMap,this.refresh$.pipe(Y(null))]).pipe(u(this)).subscribe(([e])=>{switch(e.get("filterSlug")){case"all":this.store.dispatch(n.LoadCareManagement({filter:"ALL"}));break}}),this.data$.subscribe(e=>{this.rowData=e})}onSelectionChanged(e){console.log("Cell clicked:",e),["actions","patientId","contactNotes"].includes(e.column.getColId())||this.openEditRecordRequest(e.data)}openEditRecordRequest(e){let t={icon:"mat_outline:edit_note",title:"EDIT REQUEST",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:Re,dynamicComponentData:{patientId:e.patientId,patientCareManagement:e},submitFunction:"saveCareManagement",enterKeyEnabled:!0};this.dialog.open(W,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(u(this)).subscribe(a=>{this.refresh.next(a)})}openContactNote(e,t){this.store.dispatch(O.LoadContactNotes({patientId:t,refId:e}));let a={icon:"mat_outline:chat",iconColor:"primary",title:"CONTACT NOTES",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:We,dynamicComponentData:{patientId:t,refId:e,moduleName:"CAREMANAGEMENT"},submitFunction:"saveContactNote",enterKeyEnabled:!0};this.dialog.open(W,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:a}).afterClosed().pipe(u(this)).subscribe(l=>{l?.success&&this.store.dispatch(O.LoadContactNotes({patientId:this.patientId,refId:e}))})}ngOnDestroy(){this.store.dispatch(n.resetState())}getIcon(e){return e=="ENGLISH"?"US":e=="SPANISH"?"ES":""}handleRedirect(e,t){this.auxUtilService.redirectToNewTab(e,t)}static{this.\u0275fac=function(t){return new(t||$)(o(se),o(ne),o(N),o(T),o(Ie),o(Me))}}static{this.\u0275cmp=w({type:$,selectors:[["app-caremanagement-center-table"]],features:[te([Ee,N])],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","columnDefs","gridOptions","rowData","component","visibleColumns","loading","agGridHeight"]],template:function(t,a){t&1&&(c(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),ae(3,"async"),y("cellClicked",function(s){return a.onSelectionChanged(s)}),p()()()),t&2&&(m(2),d("columnDefs",a.columnDefs)("gridOptions",a.options)("rowData",a.rowData)("component","caremanagementCenter")("visibleColumns",a.visibleColumns)("loading",re(3,7,a.loading$))("agGridHeight","calc(100vh - 292px)"))},dependencies:[Le,ie],encapsulation:2,changeDetection:0})}};_=x([F()],_);var Xt=[{path:"",component:A,providers:Ge,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:":filterSlug",component:_}]}];export{Xt as default};
