import{a as st}from"./chunk-EPDAUZIC.js";import{a as at}from"./chunk-X74UJ3QR.js";import{a as tt}from"./chunk-VGE2PNKJ.js";import{a as Ze,b as it}from"./chunk-7O4GN6JJ.js";import{a as et}from"./chunk-RW26HZBH.js";import{a as K}from"./chunk-Y5RI4PHI.js";import{a as ot,b as rt,c as nt}from"./chunk-BLZL7MQY.js";import{a as lt,c as ct}from"./chunk-OJSM7WWP.js";import{a as X}from"./chunk-V2BYYYUY.js";import{a as Je}from"./chunk-ODTVUJKH.js";import{a as Qe}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as z}from"./chunk-M7CNBRZG.js";import"./chunk-2LVKS4R7.js";import{a as Ke}from"./chunk-BWPVOFCI.js";import"./chunk-T6JQBFCO.js";import{a as He}from"./chunk-VK4TGBYQ.js";import{c as Ge,d as We,e as G}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as Me}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as Q}from"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as F,b as T,c as x,e as qe}from"./chunk-W6W3L4PS.js";import{a as c,b as p,h as Ae,n as I,o as R,p as we,q as Fe,v as L,w as Te}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import{a as St}from"./chunk-2SL7SW2K.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import{a as Xe}from"./chunk-WTDAEWCX.js";import{c as Ue}from"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import{a as Ve,c as $e,h as Be}from"./chunk-BV6IOHNV.js";import{B as Oe,D as U,c as $,e as J,h as B,i as Ee,l as Re,m as Le,o as je,q as Pe,r as ke,t as Ne}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as ze}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import{a as Ye}from"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as W}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as w,b as g}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as V,p as _e}from"./chunk-HJKZPT2B.js";import{b as ye,c as De}from"./chunk-W5GYUEPJ.js";import{$b as C,Ab as A,Bc as be,Gb as fe,Ia as de,Ic as Ie,J as E,Ja as ue,Jc as xe,Ob as n,Vb as pe,Zb as d,_b as a,da as ce,dc as Ce,f as se,fc as O,ga as me,gc as ge,ha as y,md as Se,p as M,pb as r,qa as N,rc as he,sc as b,tb as s,uc as ve,v as h,w as le,wa as v}from"./chunk-3Q5CJMKA.js";import{b as D}from"./chunk-WFMAM73Y.js";import{a as P,b as k,g as xt}from"./chunk-2AVGQ2MQ.js";var yt=c("[CodeCenter Table/API] Load Code"),Dt=c("[CodeCenter Table/API] Load Configuration Success",p()),At=c("[CodeCenter Table/API] Load Configuration Failure",p()),wt=c("[ConfigurationCenter Create/API] Add Configuration",p()),Ft=c("[ConfigurationCenter Create/API] Add Configuration Success",p()),Tt=c("[ConfigurationCenter Create/API] Add Configuration Failure",p()),S={LoadConfiguration:yt,LoadConfigurationSuccess:Dt,LoadConfigurationFailure:At,AddConfiguration:wt,AddConfigurationSuccess:Ft,AddConfigurationFailure:Tt};var dt=(()=>{class i{constructor(t,o,f){this.actions$=t,this.apiService=o,this.store=f,this.addCodeRep$=F(()=>this.actions$.pipe(x(S.AddConfiguration),y(u=>this.apiService.saveConfiguration(u.configuration).pipe(h(m=>(X.ADD_SUCCESS(),S.AddConfigurationSuccess({configuration:m}))),E(m=>(X.ADD_FAILURE(),M(S.AddConfigurationFailure({error:m.error}))))))))}static{this.\u0275fac=function(o){return new(o||i)(v(T),v(W),v(I))}}static{this.\u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ut=xt(St());var Mt=c("[ConfigurationCenter Table/API] Reset Configurations State"),Et=c("[ConfigurationCenter Table/API] Load Codes"),Rt=c("[ConfigurationCenter Table/API] Load Configurations Success",p()),Lt=c("[ConfigurationCenter Table/API] Load Configurations Failure",p()),jt=c("[ConfigurationCenter Delete/API] Delete Configuration",p()),Pt=c("[ConfigurationCenter Delete/API] Delete Configuration Success"),kt=c("[ConfigurationCenter Delete/API] Delete Configuration Failure",p()),Nt=c("[ConfigurationCenter Table/API] Refresh"),l={LoadConfigurations:Et,LoadConfigurationsSuccess:Rt,LoadConfigurationsFailure:Lt,Refresh:Nt,ResetState:Mt,DeleteConfiguration:jt,DeleteConfigurationSuccess:Pt,DeleteConfigurationFailure:kt};var ft=(()=>{class i{constructor(t,o,f){this.actions$=t,this.store=o,this.apiService=f,this.loadConfiguration$=F(()=>this.actions$.pipe(x(l.LoadConfigurations),y(u=>this.apiService.getAllConfigurations().pipe(h(m=>l.LoadConfigurationsSuccess({configurationList:m})),E(m=>M(l.LoadConfigurationsFailure({error:m.error}))))))),this.deleteConfiguration$=F(()=>this.actions$.pipe(x(l.DeleteConfiguration),y(u=>this.apiService.deleteConfiguration(u.configuration).pipe(h(m=>(ut.default.fire({position:"top-end",icon:"success",title:"Your configuration has been deleted",showConfirmButton:!1,timer:1500}),l.DeleteConfigurationSuccess())),E(m=>M(l.DeleteConfigurationFailure({error:m.error}))))))),this.refresh$=F(()=>this.actions$.pipe(x(S.AddConfigurationSuccess,l.DeleteConfigurationSuccess),h(()=>l.Refresh())))}static{this.\u0275fac=function(o){return new(o||i)(v(T),v(I),v(W))}}static{this.\u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var te="code-center-table",ee={loading:!1,error:null,configurationList:[]},pt=Te(ee,L(l.ResetState,()=>ee),L(l.LoadConfigurations,i=>k(P({},ee),{loading:!0})),L(l.LoadConfigurationsSuccess,(i,{configurationList:e})=>k(P({},i),{loading:!1,configurationList:e})),L(l.LoadConfigurationsFailure,(i,{error:e})=>k(P({},i),{loading:!1,error:e}))),Ct=i=>i.loading,gt=i=>i.error,ht=i=>i.configurationList;var ie="configuration-center";function vt(i,e){return Ae({[te]:pt})(i,e)}var Vt=we(ie),j;(function(i){let e=R(Vt,t=>t[te]);i.selectLoading=R(e,Ct),i.selectError=R(e,gt),i.selectConfiguration=R(e,ht)})(j||(j={}));var bt=[Fe(ie,vt),qe([ft,dt])];function Ut(i,e){if(i&1&&(d(0,"fuse-alert",7),b(1),a()),i&2){let t=ge();n("appearance","outline")("type",t.alert.type)("showIcon",!1)("@shake",!0),r(),ve(" ",t.alert.message," ")}}var _=class oe{constructor(e,t,o,f,u){this.configurationDisplay=e,this._formBuilder=t,this.store=o,this.auxUtilService=f,this.dialogRef=u,this.showDeleteButton=!1,this.state=new Re,this.dateFormat=Je.DATE_FORMAT,this.editMode=!1,this.configuration=e.dynamicComponentData}ngOnInit(){this.configurationForm=this._formBuilder.group({id:[0],group:["",[J.required]],setting:["",[J.required]],value:[""],notes:[""],adduserid:[""],adddate:[""]}),this.configurationForm.patchValue(this.configuration)}ngAfterViewInit(){}ngOnDestroy(){}saveContact(){if(this.configurationForm.invalid)return;let e=this.configurationForm.value;if(this.isInputValid(e)){if(e.id==0){e.adddate=new Date().toISOString();let t=new Date(e.adddate);e.adddate=t.toISOString()}e=this.auxUtilService.transFormValuesToUpperCase(e,["group","setting","value","notes","adduserid","adddate"]),e=this.auxUtilService.cleanData(e),this.store.dispatch(S.AddConfiguration({configuration:e})),this.dialogRef.close()}}isInputValid(e){return e.group==""||e.group==null?(this.alert={type:"error",message:"Group cannot be blank."},setTimeout(()=>{this.alert=null},6e3),!1):!0}onDateChange(e,t){this.configurationForm=this.auxUtilService.manuallyCheckDateValid(e.target.value,this.configurationForm,t)}static{this.\u0275fac=function(t){return new(t||oe)(s(We,8),s(Oe),s(I),s(Qe),s(Ge))}}static{this.\u0275cmp=A({type:oe,selectors:[["app-configuration-center-individual-form"]],inputs:{showDeleteButton:"showDeleteButton"},decls:28,vars:22,consts:[[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-9"],[1,"w-full","max-w-3xl"],[3,"formGroup"],[1,"mt-4"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],[1,"mt-4",3,"appearance","type","showIcon"]],template:function(t,o){t&1&&(d(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),b(6,"Group"),a(),C(7,"mat-icon",5)(8,"input",6),a()(),d(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),b(12,"Setting"),a(),C(13,"mat-icon",5)(14,"input",6),a()(),d(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),b(18,"Value"),a(),C(19,"mat-icon",5)(20,"input",6),a()(),d(21,"div",3)(22,"mat-form-field",4)(23,"mat-label"),b(24,"Notes"),a(),C(25,"mat-icon",5)(26,"input",6),a()(),fe(27,Ut,2,5,"fuse-alert",7),a()()()),t&2&&(r(2),n("formGroup",o.configurationForm),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","group")("placeholder","group")("spellcheck",!1),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","setting")("placeholder","Setting")("spellcheck",!1),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","value")("placeholder","Value")("spellcheck",!1),r(2),n("subscriptSizing","dynamic"),r(3),n("svgIcon","heroicons_solid:user-circle"),r(),n("formControlName","notes")("placeholder","Notes")("spellcheck",!1),r(),pe(o.alert?27:-1))},dependencies:[U,je,$,B,Ee,ke,Ne,Be,Ve,V,$e,Ue,Xe],encapsulation:2,data:{animation:Ye}})}};_=D([w()],_);var q=class re{constructor(e,t,o,f,u,m){this.store=e,this.route=t,this.actions$=o,this.dialog=f,this.datetimeFormatPipe=u,this._fuseConfirmationService=m,this.rowData=[],this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"ID",minWidth:100,field:"id",filter:"agMultiColumnFilter",sortIndex:1,hide:!1},{headerName:"Group",minWidth:150,field:"group",sort:"asc",filter:"agMultiColumnFilter",sortIndex:2,hide:!1},{headerName:"Setting",minWidth:500,field:"setting",filter:"agMultiColumnFilter",sortIndex:3,hide:!1},{headerName:"Value",minWidth:100,field:"value",filter:"agMultiColumnFilter",sortIndex:4,hide:!1},{headerName:"Notes",minWidth:250,field:"notes",filter:"agMultiColumnFilter",sortIndex:5,hide:!1},{headerName:"Added Date",minWidth:200,field:"adddate",valueFormatter:ae=>this.datetimeFormatPipe.transform(ae.data.adddate),filter:"agDateColumnFilter",filterParams:lt,sortIndex:6,hide:!1},{headerName:"Actions",minWidth:100,field:"actions",cellRenderer:st,cellRendererParams:{menuItems:[{name:"Delete Permanently",action:this.deleteRow.bind(this),icon:"mat_outline:delete",color:"text-red-500"}]},filter:!1,sortIndex:10,hide:!1,sortable:!1}],this.visibleColumns=["group","setting","value","notes","adddate","actions"],this.loading$=this.store.select(j.selectLoading),this.data$=this.route.paramMap.pipe(y(ae=>this.store.select(j.selectConfiguration))),this.refresh=new se,this.refresh$=this.refresh.asObservable(),this.selectedRowIndex=-1}ngOnInit(){le([this.route.paramMap,this.refresh$.pipe(me(null))]).pipe(g(this)).subscribe(([e])=>{this.store.dispatch(l.LoadConfigurations())}),this.data$.pipe(g(this)).subscribe(e=>{this.rowData=e}),this.actions$.pipe(x(l.Refresh),g(this)).subscribe(e=>this.refresh.next(e))}ngAfterViewInit(){}onSelectionChanged(e){e.column.colId!="actions"&&this.openItem(e)}openItem(e){let t={icon:"mat_outline:assignment",iconColor:"primary",title:"SAVE CONFIGURATION",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:_,dynamicComponentData:e.api.getSelectedRows()[0]||null,submitFunction:"saveContact",enterKeyEnabled:!0};this.dialog.open(z,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(g(this)).subscribe(o=>{e.api.clearFocusedCell()})}deleteRow(e){this.deleteConfiguration(e.data)}deleteConfiguration(e){this._fuseConfirmationService.open({title:"Delete Configuration",message:"Are you sure you want to delete this Configuration? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().pipe(g(this)).subscribe(o=>{o==="confirmed"&&this.store.dispatch(l.DeleteConfiguration({configuration:e}))})}static{this.\u0275fac=function(t){return new(t||re)(s(I),s(ye),s(T),s(G),s(K),s(Ke))}}static{this.\u0275cmp=A({type:re,selectors:[["app-configuration-center-table"]],features:[be([K])],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","gridOptions","component","rowData","columnDefs","visibleColumns","agGridHeight","loading"]],template:function(t,o){t&1&&(d(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),Ie(3,"async"),O("cellClicked",function(u){return o.onSelectionChanged(u)}),a()()()),t&2&&(r(2),n("gridOptions",o.options)("component","configurationcenter")("rowData",o.rowData)("columnDefs",o.columnDefs)("visibleColumns",o.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",xe(3,7,o.loading$)))},dependencies:[ct,Se],encapsulation:2})}};q=D([w()],q);var Y=class ne{constructor(e,t,o,f){this._fuseMediaWatcherService=e,this.searchService=t,this.breakpointObserver=o,this.dialog=f,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",subtitle:"Add new configuration",type:"group",children:[{title:"Add configuration",type:"basic",icon:"heroicons_outline:plus-circle",function:()=>{this.openCreate()}},{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()}}]}],this.searchCtrl=new Le,this.isHandset$=this.breakpointObserver.observe([Q.Tablet,Q.Handset]).pipe(h(u=>u.matches),ce())}ngOnInit(){this.searchCtrl.valueChanges.pipe(g(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(g(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}openCreate(){let e={icon:"mat_outline:assignment",iconColor:"primary",title:"ADD CONFIGURATION",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:_,dynamicComponentData:null,submitFunction:"saveContact",enterKeyEnabled:!0};this.dialog.open(z,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:e}).afterClosed().pipe(g(this)).subscribe(t=>{})}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(t){return new(t||ne)(s(He),s(Me),s(_e),s(G))}}static{this.\u0275cmp=A({type:ne,selectors:[["app-configuration-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(t,o){if(t&1){let f=Ce();d(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),b(5," ConfigurationCenter "),a()()(),d(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),C(10,"mat-icon",9)(11,"input",10),a()()()(),d(12,"div",11)(13,"button",12),O("click",function(){de(f);let m=he(17);return ue(m.toggle())}),C(14,"mat-icon",13),a()()(),d(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),C(18,"aux-sidebar",16),a(),d(19,"mat-drawer-content",17)(20,"div",18),C(21,"router-outlet"),a()()()()}t&2&&(r(10),n("svgIcon","mat_outline:search"),r(),n("formControl",o.searchCtrl),r(3),n("svgIcon","heroicons_outline:menu"),r(2),n("autoFocus",!1)("mode",o.drawerMode)("opened",o.drawerOpened),r(2),n("menuData",o.menuData)("showTitle",!1)("title","Code Actions"))},dependencies:[V,U,$,B,Pe,ze,nt,rt,at,ot,De],encapsulation:2,data:{animation:[et,it,Ze,tt]}})}};Y=D([w()],Y);var po=[{path:"",component:Y,providers:bt,children:[{path:"",component:q}]}];export{po as default};
