import{a as Ee,b as Re}from"./chunk-GYNEZ7BS.js";import"./chunk-XPFFTSXC.js";import"./chunk-LQP35CM2.js";import"./chunk-JBP6HANX.js";import{a as k}from"./chunk-6LE6SZDP.js";import{a as _e}from"./chunk-X74UJ3QR.js";import"./chunk-Y5RI4PHI.js";import{a as Ie,b as Me,c as Ne}from"./chunk-BLZL7MQY.js";import{c as Le}from"./chunk-OJSM7WWP.js";import{h as W}from"./chunk-4RIDPFY2.js";import"./chunk-6YJMKPRN.js";import"./chunk-OD2F5SLA.js";import{a as M}from"./chunk-PVSGC5X6.js";import"./chunk-WX54DYK2.js";import"./chunk-XMHJJKH6.js";import"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as Fe}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as O}from"./chunk-M7CNBRZG.js";import"./chunk-T6JQBFCO.js";import{a as xe}from"./chunk-VK4TGBYQ.js";import{e as Ae}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as I}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as R}from"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as ye,b as De,c as Se,e as we}from"./chunk-W6W3L4PS.js";import{a as h,b as F,h as se,n as de,o as C,p as le,q as ce,v as g,w as me}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import"./chunk-WTDAEWCX.js";import"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import"./chunk-BV6IOHNV.js";import{D as ve,c as fe,h as he,m as Ce,q as ge}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as be}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as Te}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as T,b as p}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as pe,p as ue}from"./chunk-HJKZPT2B.js";import{b as ae,c as ne}from"./chunk-W5GYUEPJ.js";import{$b as f,Ab as S,Bc as te,Ia as J,Ic as ie,J as V,Ja as X,Jc as re,Ob as c,Zb as m,_b as u,da as q,dc as Y,f as K,fc as w,ga as z,ha as D,md as oe,p as H,pb as l,qa as Q,rc as Z,sc as ee,tb as n,v as y,w as G,wa as E}from"./chunk-3Q5CJMKA.js";import{b as x}from"./chunk-WFMAM73Y.js";import{a as A,b}from"./chunk-2AVGQ2MQ.js";var Ke=h("[Feature] Reset State"),He=h("[AuditCenter Table/API] Load Audit",F()),Ge=h("[AuditCenter Table/API] Load Audit Success",F()),Ve=h("[AuditCenter Table/API] Load Audit Failure",F()),a={resetState:Ke,LoadAudit:He,LoadAuditSuccess:Ge,LoadAuditFailure:Ve};var ke=(()=>{class r{constructor(t,i){this.actions$=t,this.apiService=i,this.loadAudits$=ye(()=>this.actions$.pipe(Se(a.LoadAudit),D(s=>this.apiService.getAudit(s.filter).pipe(y(d=>a.LoadAuditSuccess({Audits:d})),V(d=>H(a.LoadAuditFailure({error:d.error})))))))}static{this.\u0275fac=function(i){return new(i||r)(E(De),E(Te))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var B="audit-center-table",P={loading:!1,error:null,Audits:[]},We=me(P,g(a.resetState,()=>P),g(a.LoadAudit,r=>b(A({},P),{loading:!0})),g(a.LoadAuditSuccess,(r,{Audits:e})=>b(A({},r),{loading:!1,Audits:e})),g(a.LoadAuditFailure,(r,{error:e})=>b(A({},r),{loading:!1,error:e}))),Pe=r=>r.loading,Be=r=>r.error,je=r=>r.Audits;var j="audit-center";function $e(r,e){return se({[B]:We})(r,e)}var ze=le(j),v;(function(r){let e=C(ze,t=>t[B]);r.selectLoading=C(e,Pe),r.selectError=C(e,Be),r.selectAudits=C(e,je)})(v||(v={}));var Ue=[ce(j,$e),we(ke)];var N=class ${constructor(e,t,i){this._fuseMediaWatcherService=e,this.searchService=t,this.breakpointObserver=i,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",type:"group",children:[{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()},classes:{wrapper:"padding-style"}}]},{title:"Filters ",type:"group",children:[{title:"ALL",type:"basic",icon:"mat_outline:all_inclusive",link:"./all"}]}],this.searchCtrl=new Ce,this.isHandset$=this.breakpointObserver.observe([R.Tablet,R.Handset]).pipe(y(s=>s.matches),q())}ngOnInit(){this.searchCtrl.valueChanges.pipe(p(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(p(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(t){return new(t||$)(n(xe),n(I),n(ue))}}static{this.\u0275cmp=S({type:$,selectors:[["app-audit-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(t,i){if(t&1){let s=Y();m(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),ee(5," Audit Center "),u()()(),m(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"mat-icon",9)(11,"input",10),u()()()(),m(12,"div",11)(13,"button",12),w("click",function(){J(s);let L=Z(17);return X(L.toggle())}),f(14,"mat-icon",13),u()()(),m(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),f(18,"aux-sidebar",16),u(),m(19,"mat-drawer-content",17)(20,"div",18),f(21,"router-outlet"),u()()()()}t&2&&(l(10),c("svgIcon","mat_outline:search"),l(),c("formControl",i.searchCtrl),l(3),c("svgIcon","heroicons_outline:menu"),l(2),c("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened),l(2),c("menuData",i.menuData)("showTitle",!1)("title","SalesCode Actions"))},dependencies:[pe,ve,fe,he,ge,be,Ne,Me,_e,Ie,ne],encapsulation:2})}};N=x([T()],N);var _=class U{constructor(e,t,i,s,d,L){this.store=e,this.route=t,this.dateFormatePipe=i,this.searchService=s,this.auxUtilService=d,this.dialog=L,this.rowData=[],this.options={gridOptions:{rowDragManaged:!1,rowDragEntireRow:!0,rowDragMultiRow:!0,rowSelection:"multiple"},defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"ID",field:"id",minWidth:50},{headerName:"Patient ID",field:"patientId",filter:"agNumberColumnFilter",minWidth:100,cellRenderer:k,cellRendererParams:{field:"patientId"},onCellClicked:o=>this.handleRedirect("audit",{data:{patientid:o.data.patientId}})},{headerName:"Date Of Audit",field:"dateOfAudit",valueFormatter:o=>this.dateFormatePipe.transform(o.data.dateOfAudit),filter:"agDateColumnFilter",minWidth:125},{headerName:"Audit Type",field:"auditType",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Sub Type",field:"subType",filter:"agMultiColumnFilter",minWidth:90},{headerName:"Sub Type Description",field:"subTypeDescription",filter:"agMultiColumnFilter",minWidth:200},{headerName:"Assigned To",field:"assignedTo",filter:"agMultiColumnFilter",minWidth:125},{headerName:"Auditor",field:"auditor",filter:"agMultiColumnFilter",minWidth:125},{headerName:"Resolution",field:"resolution",filter:"agMultiColumnFilter",minWidth:125},{headerName:"Resolution Date",field:"resolutionDate",valueFormatter:o=>this.dateFormatePipe.transform(o.data.resolutionDate),filter:"agDateColumnFilter",minWidth:125},{headerName:"Notes",field:"contactNotes",cellRenderer:k,cellRendererParams:{field:"contactNotes"},minWidth:65,onCellClicked:o=>this.openContactNote(o.data.id,o.data.patientId),hide:!1},{headerName:"Created By",field:"createdBy",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Created Date",field:"createdDate",valueFormatter:o=>this.dateFormatePipe.transform(o.data.createdDate),filter:"agDateColumnFilter",minWidth:125},{headerName:"Modified By",field:"modifiedBy",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Modified Date",field:"modifiedDate",valueFormatter:o=>this.dateFormatePipe.transform(o.data.modifiedDate),filter:"agDateColumnFilter",minWidth:150}],this.visibleColumns=["id","patientId","dateOfAudit","auditType","subType","subTypeDescription","assignedTo","auditor","resolution","resolutionDate","contactNotes"],this.data$=this.route.paramMap.pipe(D(o=>this.store.select(v.selectAudits))),this.loading$=this.store.select(v.selectLoading),this.refresh=new K,this.refresh$=this.refresh.asObservable(),this.addedBy="Current User"}ngOnInit(){G([this.route.paramMap,this.refresh$.pipe(z(null))]).pipe(p(this)).subscribe(([e])=>{switch(e.get("filterSlug")){case"all":this.store.dispatch(a.LoadAudit({filter:"ALL"}));break}}),this.data$.subscribe(e=>{this.rowData=e})}onSelectionChanged(e){console.log("Cell clicked:",e),["actions","patientId","contactNotes"].includes(e.column.getColId())||this.openEditAuditRequest(e.data)}openEditAuditRequest(e){let t={icon:"mat_outline:edit_note",title:"EDIT REQUEST",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:Ee,dynamicComponentData:{patientId:this.patientId,addedBy:this.addedBy,audit:e},submitFunction:"saveAudit",enterKeyEnabled:!0};this.dialog.open(O,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(p(this)).subscribe(i=>{this.refresh.next(i)})}ngOnDestroy(){this.store.dispatch(a.resetState())}getIcon(e){return e=="ENGLISH"?"US":e=="SPANISH"?"ES":""}handleRedirect(e,t){this.auxUtilService.redirectToNewTab(e,t)}openContactNote(e,t){this.store.dispatch(W.LoadContactNotes({patientId:t,refId:e}));let i={icon:"mat_outline:chat",iconColor:"primary",title:"CONTACT NOTES",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:Re,dynamicComponentData:{patientId:t,refId:e,moduleName:"COMPLIANCE"},submitFunction:"saveContactNote",enterKeyEnabled:!0};this.dialog.open(O,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:i}).afterClosed().pipe(p(this)).subscribe(s=>{s?.success&&this.store.dispatch(W.LoadContactNotes({patientId:this.patientId,refId:e}))})}static{this.\u0275fac=function(t){return new(t||U)(n(de),n(ae),n(M),n(I),n(Fe),n(Ae))}}static{this.\u0275cmp=S({type:U,selectors:[["app-audit-center-table"]],features:[te([M])],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","columnDefs","gridOptions","rowData","component","visibleColumns","loading","agGridHeight"]],template:function(t,i){t&1&&(m(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),ie(3,"async"),w("cellClicked",function(d){return i.onSelectionChanged(d)}),u()()()),t&2&&(l(2),c("columnDefs",i.columnDefs)("gridOptions",i.options)("rowData",i.rowData)("component","auditCenter")("visibleColumns",i.visibleColumns)("loading",re(3,7,i.loading$))("agGridHeight","calc(100vh - 292px)"))},dependencies:[Le,oe],encapsulation:2,changeDetection:0})}};_=x([T()],_);var Qt=[{path:"",component:N,providers:Ue,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:":filterSlug",component:_}]}];export{Qt as default};
