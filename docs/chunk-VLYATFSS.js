import{a as Oe,b as Ee}from"./chunk-J2BYJM64.js";import"./chunk-XPFFTSXC.js";import"./chunk-LQP35CM2.js";import"./chunk-JBP6HANX.js";import{a as k}from"./chunk-6LE6SZDP.js";import{a as Ae}from"./chunk-X74UJ3QR.js";import"./chunk-Y5RI4PHI.js";import{a as Me,b as _e,c as Ne}from"./chunk-BLZL7MQY.js";import{c as Le}from"./chunk-OJSM7WWP.js";import{e as P}from"./chunk-4RIDPFY2.js";import"./chunk-6YJMKPRN.js";import"./chunk-OD2F5SLA.js";import{a as _}from"./chunk-PVSGC5X6.js";import"./chunk-WX54DYK2.js";import"./chunk-XMHJJKH6.js";import"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as Ie}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as R}from"./chunk-M7CNBRZG.js";import"./chunk-T6JQBFCO.js";import{a as ye}from"./chunk-VK4TGBYQ.js";import{e as be}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as M}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import{a as E}from"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as De,b as Se,c as we,e as Te}from"./chunk-W6W3L4PS.js";import{a as h,b as I,h as le,n as se,o as C,p as ce,q as me,v as g,w as pe}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import"./chunk-WTDAEWCX.js";import"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import"./chunk-BV6IOHNV.js";import{D as ve,c as fe,h as he,m as Ce,q as ge}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as xe}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as Fe}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as F,b as u}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as ue,p as de}from"./chunk-HJKZPT2B.js";import{b as ae,c as ne}from"./chunk-W5GYUEPJ.js";import{$b as f,Ab as w,Bc as te,Ia as Q,Ic as ie,J as V,Ja as X,Jc as oe,Ob as m,Zb as p,_b as d,da as q,dc as Y,f as K,fc as T,ga as J,ha as S,md as re,p as H,pb as c,qa as z,rc as Z,sc as ee,tb as n,v as D,w as G,wa as O}from"./chunk-3Q5CJMKA.js";import{b as y}from"./chunk-WFMAM73Y.js";import{a as b,b as x}from"./chunk-2AVGQ2MQ.js";var Ke=h("[Feature] Reset State"),He=h("[ComplianceCenter Table/API] Load Compliance",I()),Ge=h("[ComplianceCenter Table/API] Load Compliance Success",I()),Ve=h("[ComplianceCenter Table/API] Load Compliance Failure",I()),a={resetState:Ke,LoadCompliance:He,LoadComplianceSuccess:Ge,LoadComplianceFailure:Ve};var ke=(()=>{class o{constructor(t,i){this.actions$=t,this.apiService=i,this.loadCompliances$=De(()=>this.actions$.pipe(we(a.LoadCompliance),S(l=>this.apiService.getCompliance(l.filter).pipe(D(s=>a.LoadComplianceSuccess({Compliances:s})),V(s=>H(a.LoadComplianceFailure({error:s.error})))))))}static{this.\u0275fac=function(i){return new(i||o)(O(Se),O(Fe))}}static{this.\u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var B="compliance-center-table",W={loading:!1,error:null,Compliances:[]},Pe=pe(W,g(a.resetState,()=>W),g(a.LoadCompliance,o=>x(b({},W),{loading:!0})),g(a.LoadComplianceSuccess,(o,{Compliances:e})=>x(b({},o),{loading:!1,Compliances:e})),g(a.LoadComplianceFailure,(o,{error:e})=>x(b({},o),{loading:!1,error:e}))),We=o=>o.loading,Be=o=>o.error,je=o=>o.Compliances;var j="compliance-center";function $e(o,e){return le({[B]:Pe})(o,e)}var Je=ce(j),v;(function(o){let e=C(Je,t=>t[B]);o.selectLoading=C(e,We),o.selectError=C(e,Be),o.selectCompliances=C(e,je)})(v||(v={}));var Ue=[me(j,$e),Te(ke)];var N=class ${constructor(e,t,i){this._fuseMediaWatcherService=e,this.searchService=t,this.breakpointObserver=i,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",type:"group",children:[{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()},classes:{wrapper:"padding-style"}}]},{title:"Filters ",type:"group",children:[{title:"ALL",type:"basic",icon:"mat_outline:all_inclusive",link:"./all"}]}],this.searchCtrl=new Ce,this.isHandset$=this.breakpointObserver.observe([E.Tablet,E.Handset]).pipe(D(l=>l.matches),q())}ngOnInit(){this.searchCtrl.valueChanges.pipe(u(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(u(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(t){return new(t||$)(n(ye),n(M),n(de))}}static{this.\u0275cmp=w({type:$,selectors:[["app-Compliance-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(t,i){if(t&1){let l=Y();p(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),ee(5," ComplianceCenter "),d()()(),p(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"mat-icon",9)(11,"input",10),d()()()(),p(12,"div",11)(13,"button",12),T("click",function(){Q(l);let L=Z(17);return X(L.toggle())}),f(14,"mat-icon",13),d()()(),p(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),f(18,"aux-sidebar",16),d(),p(19,"mat-drawer-content",17)(20,"div",18),f(21,"router-outlet"),d()()()()}t&2&&(c(10),m("svgIcon","mat_outline:search"),c(),m("formControl",i.searchCtrl),c(3),m("svgIcon","heroicons_outline:menu"),c(2),m("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened),c(2),m("menuData",i.menuData)("showTitle",!1)("title","SalesCode Actions"))},dependencies:[ue,ve,fe,he,ge,xe,Ne,_e,Ae,Me,ne],encapsulation:2})}};N=y([F()],N);var A=class U{constructor(e,t,i,l,s,L){this.store=e,this.route=t,this.dateFormatePipe=i,this.searchService=l,this.auxUtilService=s,this.dialog=L,this.rowData=[],this.options={gridOptions:{rowDragManaged:!1,rowDragEntireRow:!0,rowDragMultiRow:!0,rowSelection:"multiple"},defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"ID",field:"id",minWidth:50},{headerName:"Patient ID",field:"patientId",filter:"agNumberColumnFilter",minWidth:100,cellRenderer:k,cellRendererParams:{field:"patientId"},onCellClicked:r=>this.handleRedirect("compliance",{data:{patientid:r.data.patientId}})},{headerName:"Date Occurrence",field:"dateOfOccurrence",valueFormatter:r=>this.dateFormatePipe.transform(r.data.dateOfOccurrence),filter:"agDateColumnFilter",minWidth:125},{headerName:"Issue Type",field:"issueType",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Sub Type",field:"subType",filter:"agMultiColumnFilter",minWidth:90},{headerName:"Sub Type Description",field:"subTypeDescription",filter:"agMultiColumnFilter",minWidth:200},{headerName:"Resolution",field:"resolution",filter:"agMultiColumnFilter",minWidth:125},{headerName:"Resolution Date",field:"resolutionDate",valueFormatter:r=>this.dateFormatePipe.transform(r.data.resolutionDate),filter:"agDateColumnFilter",minWidth:125},{headerName:"Created By",field:"createdBy",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Created Date",field:"createdDate",valueFormatter:r=>this.dateFormatePipe.transform(r.data.createdDate),filter:"agDateColumnFilter",minWidth:125},{headerName:"Modified By",field:"modifiedBy",filter:"agMultiColumnFilter",minWidth:100},{headerName:"Modified Date",field:"modifiedDate",valueFormatter:r=>this.dateFormatePipe.transform(r.data.modifiedDate),filter:"agDateColumnFilter",minWidth:150},{headerName:"Notes",field:"contactNotes",cellRenderer:k,cellRendererParams:{field:"contactNotes"},minWidth:65,onCellClicked:r=>this.openContactNote(r.data.id,r.data.patientId),hide:!1}],this.visibleColumns=["id","patientId","dateOfOccurrence","issueType","subType","subTypeDescription","resolution","resolutionDate","createdBy","createdDate","contactNotes"],this.data$=this.route.paramMap.pipe(S(r=>this.store.select(v.selectCompliances))),this.loading$=this.store.select(v.selectLoading),this.refresh=new K,this.refresh$=this.refresh.asObservable(),this.addedBy="Current User"}ngOnInit(){G([this.route.paramMap,this.refresh$.pipe(J(null))]).pipe(u(this)).subscribe(([e])=>{switch(e.get("filterSlug")){case"all":this.store.dispatch(a.LoadCompliance({filter:"ALL"}));break}}),this.data$.subscribe(e=>{this.rowData=e})}onSelectionChanged(e){console.log("Cell clicked:",e),["actions","patientId","contactNotes"].includes(e.column.getColId())||this.openEditComplianceRequest(e.data)}openEditComplianceRequest(e){let t={icon:"mat_outline:edit_note",title:"EDIT REQUEST",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:Oe,dynamicComponentData:{patientId:this.patientId,addedBy:this.addedBy,compliance:e},submitFunction:"saveCompliance",enterKeyEnabled:!0};this.dialog.open(R,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(u(this)).subscribe(i=>{this.refresh.next(i)})}ngOnDestroy(){this.store.dispatch(a.resetState())}getIcon(e){return e=="ENGLISH"?"US":e=="SPANISH"?"ES":""}handleRedirect(e,t){this.auxUtilService.redirectToNewTab(e,t)}openContactNote(e,t){this.store.dispatch(P.LoadContactNotes({patientId:t,refId:e}));let i={icon:"mat_outline:chat",iconColor:"primary",title:"CONTACT NOTES",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:Ee,dynamicComponentData:{patientId:t,refId:e,moduleName:"COMPLIANCE"},submitFunction:"saveContactNote",enterKeyEnabled:!0};this.dialog.open(R,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:i}).afterClosed().pipe(u(this)).subscribe(l=>{l?.success&&this.store.dispatch(P.LoadContactNotes({patientId:this.patientId,refId:e}))})}static{this.\u0275fac=function(t){return new(t||U)(n(se),n(ae),n(_),n(M),n(Ie),n(be))}}static{this.\u0275cmp=w({type:U,selectors:[["app-compliance-center-table"]],features:[te([_])],decls:4,vars:9,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","columnDefs","gridOptions","rowData","component","visibleColumns","loading","agGridHeight"]],template:function(t,i){t&1&&(p(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),ie(3,"async"),T("cellClicked",function(s){return i.onSelectionChanged(s)}),d()()()),t&2&&(c(2),m("columnDefs",i.columnDefs)("gridOptions",i.options)("rowData",i.rowData)("component","complianceCenter")("visibleColumns",i.visibleColumns)("loading",oe(3,7,i.loading$))("agGridHeight","calc(100vh - 292px)"))},dependencies:[Le,re],encapsulation:2,changeDetection:0})}};A=y([F()],A);var Qt=[{path:"",component:N,providers:Ue,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:":filterSlug",component:A}]}];export{Qt as default};
