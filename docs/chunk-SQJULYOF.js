import{b as bi,c as wi,d as xi}from"./chunk-HHBLH35P.js";import{a as N,b as m,c as d,d as Ci,e as gi,f as W,g as P,h as Ie,i as vi}from"./chunk-FVWJTMHT.js";import{a as _i}from"./chunk-JBP6HANX.js";import{a as we,b as Qe}from"./chunk-YO73HNCF.js";import{b as oi,c as ni,d as ai}from"./chunk-LWOUF7G5.js";import{a as rt}from"./chunk-GSIASDE6.js";import{a as ve}from"./chunk-6LE6SZDP.js";import{a as hi}from"./chunk-EPDAUZIC.js";import{a as ui}from"./chunk-X74UJ3QR.js";import{a as si}from"./chunk-VGE2PNKJ.js";import{a as ri,b as mi}from"./chunk-7O4GN6JJ.js";import{a as li}from"./chunk-RW26HZBH.js";import{a as be}from"./chunk-Y5RI4PHI.js";import{a as ci,b as pi,c as di}from"./chunk-BLZL7MQY.js";import{a as ke,c as fi}from"./chunk-OJSM7WWP.js";import{a as qe}from"./chunk-PVSGC5X6.js";import{a as at}from"./chunk-PL5OXHAL.js";import{a as Qt}from"./chunk-FJCYNQP7.js";import{a as Jt,b as Zt,c as ei}from"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as ie}from"./chunk-V2BYYYUY.js";import{a as Xt}from"./chunk-ODTVUJKH.js";import{a as _e}from"./chunk-Z76PEBTC.js";import"./chunk-GLNCR2H3.js";import{b as Te}from"./chunk-M7CNBRZG.js";import"./chunk-2LVKS4R7.js";import{a as We}from"./chunk-BWPVOFCI.js";import"./chunk-T6JQBFCO.js";import{a as qt}from"./chunk-VK4TGBYQ.js";import{c as je,d as Ge,e as Ce,f as Wt,i as Yt}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as Le}from"./chunk-3IAIBVAD.js";import{a as re}from"./chunk-QZ2WTBPW.js";import{a as Bt,c as Ye}from"./chunk-KFQHPBEM.js";import{a as nt}from"./chunk-7RWCIHFI.js";import{a as Ke}from"./chunk-HIKYOSQ5.js";import{c as ti}from"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import{e as Re}from"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as b,b as z,c as _,e as Ht}from"./chunk-W6W3L4PS.js";import{c as ii}from"./chunk-ZKDLRTZU.js";import"./chunk-FADVVZG5.js";import{n as L,q as Nt}from"./chunk-7TJE7DO7.js";import{a as He}from"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-2SL7SW2K.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import{a as zt,c as fe}from"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import{a as Ut}from"./chunk-I3M6OUQD.js";import{a as ue,b as Be,d as Ue,h as he}from"./chunk-BV6IOHNV.js";import{B as Ne,D as te,c as Z,e as Oe,h as ee,i as se,j as jt,m as me,o as ce,q as Ve,r as pe,t as de}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{l as Gt,o as Kt,q as ze}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as ge}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as G,b as M}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as le,p as Rt}from"./chunk-HJKZPT2B.js";import{b as ae,c as Ot,d as Vt}from"./chunk-W5GYUEPJ.js";import{$b as f,Ab as j,Bc as Mt,Dc as Ft,Ec as At,G as vt,Gb as E,Ia as F,Ic as k,J as D,Ja as A,Jc as I,Ka as St,Mc as Pt,Ob as u,Qb as ot,Sc as $t,Vb as g,Wb as Y,Xb as K,Yb as q,Zb as a,_b as n,da as bt,dc as $,ed as Pe,f as Ct,fc as T,g as gt,ga as wt,gc as S,ha as x,hd as $e,kb as yt,kc as Et,la as Q,lb as Fe,ma as xt,mc as Se,md as J,nc as ye,nd as Lt,oc as Ee,p as y,pb as l,qa as ne,rc as H,sc as h,tb as v,tc as X,uc as De,v as w,vc as Ae,w as _t,wa as V,wc as Dt,xc as Tt,yc as kt,zc as It}from"./chunk-3Q5CJMKA.js";import{b as U}from"./chunk-WFMAM73Y.js";import{a as ft}from"./chunk-2AVGQ2MQ.js";var yi=(()=>{class o{constructor(e,i,s){this.actions$=e,this.store=i,this.apiService=s,this.createEmail$=b(()=>this.actions$.pipe(_(N.CreateEmail),x(p=>this.apiService.createEmail(ft({},p.dto)).pipe(w(r=>N.CreateEmailSuccess({email:r})),D(r=>y(N.CreateEmailFailure({error:r.error}))))))),this.loadOwners$=b(()=>this.actions$.pipe(_(N.LoadOwners),x(p=>this.apiService.getOwners().pipe(w(r=>N.LoadOwnersSuccess({owners:r})),D(r=>y(N.LoadOwnersFailure({error:r.error})))))))}static{this.\u0275fac=function(i){return new(i||o)(V(z),V(L),V(ge))}}static{this.\u0275prov=ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ei=(()=>{class o{constructor(e,i,s,p){this.actions$=e,this.apiService=i,this.store=s,this.location=p,this.loadEmail$=b(()=>this.actions$.pipe(_(m.LoadEmail),x(r=>this.apiService.getEmail(r.emailId).pipe(w(c=>m.LoadEmailSuccess({email:c})),D(c=>y(m.LoadEmailFailure({error:c.error}))))))),this.loadOwners$=b(()=>this.actions$.pipe(_(m.LoadOwners),x(r=>this.apiService.getOwners().pipe(w(c=>m.LoadOwnersSuccess({owners:c})),D(c=>y(m.LoadOwnersFailure({error:c.error}))))))),this.loadNotes$=b(()=>this.actions$.pipe(_(m.LoadNotes),x(r=>this.apiService.getNotes(r.emailId).pipe(w(c=>m.LoadNotesSuccess({notes:c})),D(c=>y(m.LoadNotesFailure({error:c.error}))))))),this.addNote$=b(()=>this.actions$.pipe(_(m.AddNote),x(r=>this.apiService.addNote(r.note).pipe(Q(c=>console.log("")),w(c=>m.AddNoteSuccess({note:c})),D(c=>y(m.AddNoteFailure({error:c.error}))))))),this.loadCommDocument$=b(()=>this.actions$.pipe(_(m.LoadCommDocument),x(r=>this.apiService.getDocument(r.attachmentId).pipe(w(c=>r.isPreviewOnly?m.SetPreviewUrl({url:URL.createObjectURL(c)}):m.LoadCommDocumentSuccess({document:c,isPreviewOnly:r.isPreviewOnly,attachMentName:r.attachMentName})),D(c=>y(m.LoadCommDocumentFailure({error:c.error}))))))),this.loadAudio$=b(()=>this.actions$.pipe(_(m.PlayAudioAttachment),xt(this.store.select(P.selectAudioPlaying)),x(([r,c])=>c?y(m.StopAudioAttachment()):this.apiService.getDocument(r.attachmentId).pipe(w(R=>m.PlayAudioAttachmentSuccess({data:R})),D(R=>y(m.PlayAudioAttachmentFailure({error:R.error}))))))),this.loadAttachments$=b(()=>this.actions$.pipe(_(m.LoadAttachments),x(r=>this.apiService.getAttachments(r.emailId).pipe(w(c=>m.LoadAttachmentsSuccess({attachments:c})),D(c=>y(m.LoadAttachmentsFailure({error:c.error}))))))),this.updateLabel$=b(()=>this.actions$.pipe(_(m.UpdateLabel),x(r=>this.apiService.updateLabel(r.emailId,r.label).pipe(w(c=>m.UpdateLabelSuccess({update:c})),D(c=>y(m.UpdateLabelFailure({error:c.error}))))))),this.updateOwner$=b(()=>this.actions$.pipe(_(m.UpdateOwner),x(r=>this.apiService.updateOwner(r.emailId,r.owner).pipe(w(c=>m.UpdateOwnerSuccess({update:c})),D(c=>y(m.UpdateOwnerFailure({error:c.error}))))))),this.updateByEditGroup$=b(()=>this.actions$.pipe(_(m.UpdateEmailGroupEdit),x(({emailEditGroup:r})=>this.apiService.emailGroupEdit(r).pipe(w(c=>m.UpdateEmailGroupEditSuccess()),D(c=>y(m.UpdateEmailGroupEditFailure({error:c.error}))))))),this.loadTags$=b(()=>this.actions$.pipe(_(m.LoadTags),x(r=>this.apiService.getTags(r.emailId).pipe(w(c=>m.LoadTagsSuccess({tags:c})),D(c=>y(m.LoadTagsFailure({error:c.error}))))))),this.addTag$=b(()=>this.actions$.pipe(_(m.AddTag),x(r=>this.apiService.addTag(r.emailId,r.tag).pipe(w(c=>m.AddTagSuccess()),D(c=>y(m.AddTagFailure({error:c.error}))))))),this.faxIntoPatientRecord$=b(()=>this.actions$.pipe(_(m.PatientFaxIntoPatientRecord),x(r=>this.apiService.faxIntoPatientRecord(r.contactInfo).pipe(w(c=>(ie.ADD_SUCCESS(),this.location.back(),m.PatientFaxIntoPatientRecordSuccess({patient:c}))),D(c=>y(m.PatientFaxIntoPatientRecordFailure({error:c.error}))))))),this.deleteTag$=b(()=>this.actions$.pipe(_(m.DeleteTag),x(r=>this.apiService.deleteTag(r.emailId,r.tag).pipe(w(c=>m.DeleteTagSuccess()),D(c=>y(m.DeleteTagFailure({error:c.error}))))))),this.searchPatient$=b(()=>this.actions$.pipe(_(m.PatientSearch),x(r=>this.apiService.patientSearch(r.patientSearch).pipe(w(c=>(Array.isArray(c)&&!c.length&&ie.CUSTOM_FAILURE("patientNotFound"),m.PatientSearchSuccess({patient:c}))),D(c=>y(m.PatientSearchFailure({error:c.error}))))))),this.openDocumentInTab$=b(()=>this.actions$.pipe(_(m.LoadCommDocumentSuccess),Q(r=>{if(r.isPreviewOnly===void 0){let c=URL?.createObjectURL(r.document);window?.open(c,"_blank")}else{let c=URL?.createObjectURL(r.document),R=document.createElement("a");R.download=r.attachMentName,R.href=c,R.target="_blank",R.click()}})),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||o)(V(z),V(ge),V(L),V(Pe))}}static{this.\u0275prov=ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Di=(()=>{class o{constructor(e,i,s){this.actions$=e,this.store=i,this.apiService=s,this.loadOwners$=b(()=>this.actions$.pipe(_(d.LoadOwners),x(p=>this.apiService.getOwners().pipe(w(r=>d.LoadOwnersSuccess({owners:r})),D(r=>y(d.LoadOwnersFailure({error:r.error}))))))),this.loadEmails$=b(()=>this.actions$.pipe(_(d.LoadEmails),x(p=>this.apiService.getEmails(p.days).pipe(w(r=>d.LoadEmailsSuccess({emails:r})),D(r=>y(d.LoadEmailsFailure({error:r.error}))))))),this.loadEmailsByOwner$=b(()=>this.actions$.pipe(_(d.LoadEmailsByOwner),x(p=>this.apiService.getEmailsByOwner().pipe(w(r=>d.LoadEmailsByOwnerSuccess({emails:r})),D(r=>y(d.LoadEmailsByOwnerFailure({error:r.error}))))))),this.loadCompletedEmails$=b(()=>this.actions$.pipe(_(d.LoadCompletedEmails),x(p=>this.apiService.getCompletedEmails().pipe(w(r=>d.LoadCompletedEmailsSuccess({emails:r})),D(r=>y(d.LoadCompletedEmailsFailure({error:r.error}))))))),this.loadDeletedEmails$=b(()=>this.actions$.pipe(_(d.LoadDeletedEmails),x(p=>this.apiService.getDeletedEmails().pipe(w(r=>d.LoadDeletedEmailsSuccess({emails:r})),D(r=>y(d.LoadDeletedEmailsFailure({error:r.error}))))))),this.loadMyEmails$=b(()=>this.actions$.pipe(_(d.LoadMyEmails),x(p=>this.apiService.getMyEmails().pipe(w(r=>d.LoadMyEmailsSuccess({emails:r})),D(r=>y(d.LoadMyEmailsFailure({error:r.error}))))))),this.loadEmailsBySource$=b(()=>this.actions$.pipe(_(d.LoadEmailsBySource),x(p=>this.apiService.getEmailsBySource(p.source).pipe(w(r=>d.LoadEmailsBySourceSuccess({emails:r})),D(r=>y(d.LoadEmailsBySourceFailure({error:r.error}))))))),this.loadCommDocument$=b(()=>this.actions$.pipe(_(d.LoadCommDocument),x(p=>this.apiService.getDocument(p.emailId).pipe(w(r=>d.LoadCommDocumentSuccess({document:r})),D(r=>y(d.LoadCommDocumentFailure({error:r.error}))))))),this.markMailAsComplete$=b(()=>this.actions$.pipe(_(d.MarkMailAsComplete),x(p=>this.apiService.markMailAsComplete(p.emailId).pipe(w(()=>d.MarkMailAsCompleteSuccess()),D(r=>y(d.MarkMailAsCompleteFailure({error:r.error}))))))),this.deleteMail$=b(()=>this.actions$.pipe(_(d.DeleteMail),x(p=>this.apiService.deleteMail(p.emailId).pipe(Q(r=>console.log("")),w(()=>d.DeleteMailSuccess()),D(r=>y(d.DeleteMailFailure({error:r.error}))))))),this.deleteMails$=b(()=>this.actions$.pipe(_(d.DeleteMails),x(p=>this.apiService.deleteMails(p.emaildata).pipe(w(()=>d.DeleteMailSuccess()),D(r=>y(d.DeleteMailFailure({error:r.error}))))))),this.markMailsAsComplete$=b(()=>this.actions$.pipe(_(d.MarkMailsAsComplete),x(p=>this.apiService.markMailsAsComplete(p.emaildata).pipe(w(()=>d.MarkMailAsCompleteSuccess()),D(r=>y(d.MarkMailAsCompleteFailure({error:r.error}))))))),this.reopenCompletedEmail$=b(()=>this.actions$.pipe(_(d.ReopenCompletedEmail),x(p=>this.apiService.reopenCompletedEmail(p.emailId).pipe(Q(()=>{ie.ADD_SUCCESS()}),w(()=>d.ReopenCompletedEmailSuccess()),D(r=>(ie.ADD_FAILURE(),y(d.ReopenCompletedEmailFailure({error:r.error})))))))),this.createEmailSuccessNotification$=b(()=>this.actions$.pipe(_(N.CreateEmailSuccess),Q(()=>{ie.ADD_SUCCESS()})),{dispatch:!1}),this.refresh$=b(()=>this.actions$.pipe(_(d.MarkMailAsCompleteSuccess,d.DeleteMailSuccess,N.CreateEmailSuccess,m.UpdateEmailGroupEditSuccess,d.ReopenCompletedEmailSuccess),w(()=>d.Refresh()))),this.openDocumentInTab$=b(()=>this.actions$.pipe(_(d.LoadCommDocumentSuccess),Q(p=>{let r=URL?.createObjectURL(p.document);window?.open(r,"_blank")})),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||o)(V(z),V(L),V(ge))}}static{this.\u0275prov=ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ti=[Nt(Ci,gi),Ht([Di,Ei,yi])];var Oi=["viewer"],Vi=(o,t)=>({active:o,"border-2 border-primary-500":t});function Ni(o,t){o&1&&(a(0,"div",22),St(),a(1,"svg",24),f(2,"circle",25)(3,"path",26),n()())}function Ri(o,t){if(o&1){let e=$();a(0,"div",5)(1,"div",18)(2,"div",19)(3,"mat-checkbox",20),T("change",function(){let s=F(e).$implicit,p=S();return A(p.togglePageSelection(s.page))}),n()(),a(4,"img",21),T("click",function(){let s=F(e).$implicit,p=S();return A(p.redirectToPage(s.page))}),n(),E(5,Ni,4,0,"div",22),n(),a(6,"span",23),h(7),n()()}if(o&2){let e=t.$implicit,i=S();l(),u("ngClass",At(5,Vi,i.totalPage===e.page,i.isPageSelected(e.page))),l(2),u("checked",i.isPageSelected(e.page)),l(),u("src",e.url,Fe),l(),g(e.url===null?5:-1),l(2),X(e.page)}}function Bi(o,t){o&1&&(a(0,"mat-error"),h(1,"Please enter id"),n())}function Ui(o,t){o&1&&(a(0,"mat-error"),h(1,"Please enter File Name"),n())}function ji(o,t){o&1&&(a(0,"mat-error"),h(1,"Please enter Contact Notes"),n())}function Gi(o,t){if(o&1){let e=$();a(0,"div",16)(1,"div",27)(2,"p",28),h(3),n(),a(4,"p"),h(5),n()(),a(6,"form",29)(7,"mat-form-field",30)(8,"mat-label"),h(9,"File Name"),n(),f(10,"input",14),E(11,Ui,2,0,"mat-error"),n(),a(12,"mat-form-field",30)(13,"mat-label"),h(14,"Description"),n(),f(15,"input",14),n(),a(16,"mat-form-field",13)(17,"mat-label"),h(18,"Contact Notes"),n(),f(19,"textarea",31),E(20,ji,2,0,"mat-error"),n(),a(21,"button",32),T("click",function(){F(e);let s=S();return A(s.save())}),h(22,"Save"),n()()()}if(o&2){let e=S();l(3),Ae("",e.searchPatientInfo.firstName," ",e.searchPatientInfo.lastName,""),l(2),Dt(" ",e.searchPatientInfo.city,", ",e.searchPatientInfo.state," ",e.searchPatientInfo.zipcode," "),l(),u("formGroup",e.contactForm),l(4),u("formControlName","fileName")("placeholder","File Name")("spellcheck",!1),l(),g(e.contactForm.get("fileName").hasError("required")?11:-1),l(4),u("formControlName","description")("placeholder","Description")("spellcheck",!1),l(4),u("formControlName","contactNotes")("placeholder","Contact Note")("rows",7)("spellcheck",!1),l(),g(e.contactForm.get("contactNotes").hasError("required")?20:-1)}}function zi(o,t){o&1&&(a(0,"p",17),h(1,"No Patient"),n())}var Je=class lt{constructor(t,e,i,s,p){this._formBuilder=t,this.auxUtilService=e,this.route=i,this.store=s,this.location=p,this.newPatientId$=this.store.select(P.selectPatients),this.attachments$=this.store.select(P.selectAttachments),this.loadingAttachments$=this.store.select(P.selectLoadingAttachments),this.loading$=this.store.select(P.selectLoading),this.previewUrl$=this.store.select(P.selectPreviewUrl),this.pages=[],this.currentPage=1,this.pageSize=1,this.selectedPages=new Set,this.toolbarData=[{title:"Back",type:"basic",icon:"mat_outline:arrow_back",function:()=>{this.back()}}]}ngOnInit(){this.docId=Number(this.route.snapshot.paramMap.get("id")),this.store.dispatch(m.LoadCommDocument({attachmentId:this.docId,isPreviewOnly:!0})),this.newPatientId$.pipe(M(this)).subscribe(t=>{this.searchPatientInfo=t&&t.length?t[0]:null}),this.searchForm=this._formBuilder.group({id:["",[Oe.required]]}),this.contactForm=this._formBuilder.group({fileName:["",[Oe.required]],description:[""],contactNotes:["",[Oe.required]]})}loadComplete(t){if(this.pageSize===1){this.pageSize=t._transport._numPages;for(let e=0;e<t._transport._numPages;e++)this.pages.push({page:e+1,url:null})}}redirectToPage(t){this.currentPage=t}render(t){this.pages[t.pageNumber-1].url=t.source.canvas.toDataURL()}back(){this.location.back()}searchPatient(){if(!this.searchForm.invalid&&this.auxUtilService.objFilled(this.searchForm.value)){let t=this.searchForm.value;t=this.auxUtilService.transFormValues(t,at),this.store.dispatch(m.PatientSearch({patientSearch:t}))}}togglePageSelection(t){this.selectedPages.has(t)?this.selectedPages.delete(t):this.selectedPages.add(t)}isPageSelected(t){return this.selectedPages.has(t)}save(){if(this.contactForm.invalid)return;let t={attachmentId:this.docId,patientId:this.searchForm.get("id").value,contactNote:this.contactForm.get("contactNotes").value,fileName:this.contactForm.get("fileName").value,description:this.contactForm.get("description").value,pagesToSave:Array.from(this.selectedPages).sort((e,i)=>e-i)};t=this.auxUtilService.transFormValuesToUpperCase(t,["contactNote"]),t=this.auxUtilService.transFormValues(t,at),this.store.dispatch(m.PatientFaxIntoPatientRecord({contactInfo:t}))}ngOnDestroy(){this.store.dispatch(m.ResetState())}static{this.\u0275fac=function(e){return new(e||lt)(v(Ne),v(_e),v(ae),v(L),v(Pe))}}static{this.\u0275cmp=j({type:lt,selectors:[["app-open-pdf-viewer"]],viewQuery:function(e,i){if(e&1&&(Se(Oi,5),Se(we,5)),e&2){let s;ye(s=Ee())&&(i.viewerRef=s.first),ye(s=Ee())&&(i.pdfViewer=s.first)}},decls:28,vars:29,consts:[[1,"m-1","flex","w-full","flex-col"],[1,"mb-2","flex","bg-white","p-1","shadow"],[3,"navigation","name"],[1,"pdf-view","flex","w-full","md:flex"],[1,"flex","w-full","flex-col","items-center","overflow-auto","bg-white","shadow","md:w-1/3"],[1,"text-center"],[1,"ml-1.5","mr-1.5","flex","w-full","flex-col","bg-white","pr-1","shadow"],[1,"flex","flex-col","p-4"],[2,"width","100%","height","600px",3,"pageChange","page-rendered","after-load-complete","page","page","src","rotation","original-size","show-all","fit-to-page","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"],["type","spinner",3,"diameter","show"],[1,"flex","w-full","flex-col","bg-white","shadow","md:w-1/3"],[1,"text-secondary","mb-3","font-bold","uppercase"],[3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","",1,"uppercase",3,"formControlName","placeholder","spellcheck"],["mat-raised-button","","color","primary","type","submit"],[1,"mt-1.5"],[1,"mt-3"],[1,"image-section","relative","mt-4","rounded-lg","border",3,"ngClass"],[1,"absolute","right-2","top-2","z-10"],["color","primary",3,"change","checked"],[1,"w-11/12","cursor-pointer",3,"click","src"],[1,"loader-block","absolute"],[1,"mb-4","mt-1","block"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"-ml-1","mr-3","h-5","w-5","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"my-3"],[1,"font-bold"],[3,"formGroup"],[1,"mt-2","w-full"],["matInput","","cdkTextareaAutosize","",1,"uppercase",3,"formControlName","placeholder","rows","spellcheck"],["mat-raised-button","","color","primary","type","button",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1),f(2,"fuse-horizontal-navigation",2),n(),a(3,"div",3)(4,"div",4),K(5,Ri,8,8,"div",5,Y),n(),a(7,"div",6)(8,"div",7)(9,"pdf-viewer",8),k(10,"async"),It("pageChange",function(p){return kt(i.currentPage,p)||(i.currentPage=p),p}),T("page-rendered",function(p){return i.render(p)})("after-load-complete",function(p){return i.loadComplete(p)}),n()(),f(11,"ac-loading-overlay",9),k(12,"async"),n(),a(13,"div",10)(14,"div",7)(15,"h2",11),h(16,"Link document to patient"),n(),a(17,"form",12),T("ngSubmit",function(){return i.searchPatient()}),a(18,"mat-form-field",13)(19,"mat-label"),h(20,"Patient #"),n(),f(21,"input",14),E(22,Bi,2,0,"mat-error"),n(),a(23,"button",15),h(24,"OK"),n()(),E(25,Gi,23,18,"div",16),k(26,"async"),E(27,zi,2,0,"p",17),n()()()()),e&2&&(l(2),u("navigation",i.toolbarData)("name","pdf-toolbar"),l(3),q(i.pages),l(4),u("page",i.pageSize),Tt("page",i.currentPage),u("src",I(10,23,i.previewUrl$))("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!0)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!0),l(2),u("diameter",30)("show",I(12,25,i.loadingAttachments$)),l(6),u("formGroup",i.searchForm),l(4),u("formControlName","id")("placeholder","Patient id")("spellcheck",!1),l(),g(i.searchForm.get("id").hasError("required")?22:-1),l(3),g(i.searchPatientInfo&&!I(26,27,i.loading$)?25:27))},dependencies:[Qt,$e,He,Qe,we,re,te,ce,Z,ee,se,pe,de,he,ue,fe,Be,ze,zt,J],styles:[".pdf-view[_ngcontent-%COMP%]{height:calc(100vh - 221px)}.image-section[_ngcontent-%COMP%]{width:150px;height:210px}.image-section.active[_ngcontent-%COMP%]{border:3px solid gray!important}.loader-block[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%)}"]})}};Je=U([G()],Je);var Ze=class mt{constructor(t,e,i,s){this._fuseMediaWatcherService=t,this.searchService=e,this.breakpointObserver=i,this.dialog=s,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",subtitle:"Task, project & team",type:"group",children:[{title:"Create Task",type:"basic",icon:"heroicons_outline:plus-circle",function:()=>{this.openCreate()},classes:{wrapper:"padding-style"}},{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()},classes:{wrapper:"padding-style"}}]},{title:"MY WORK",type:"group",children:[{title:"My Inbox",type:"basic",icon:"heroicons_outline:mail",link:"./my-inbox",classes:{wrapper:"padding-style"}}]},{title:"BROWSE",type:"group",children:[{title:"Unassigned",type:"basic",icon:"heroicons_outline:x-circle",link:"./unassigned",classes:{wrapper:"padding-style"}},{title:"By Owner",type:"basic",icon:"heroicons_outline:user-circle",link:"./by-owner",classes:{wrapper:"padding-style"}},{title:"Completed",type:"basic",icon:"mat_outline:playlist_add_check",link:"./completed",classes:{wrapper:"padding-style"}},{title:"Deleted",type:"basic",icon:"mat_outline:delete_sweep",link:"./deleted",classes:{wrapper:"padding-style"}}]},{title:"BY SOURCE",type:"group",children:[{title:"APP",type:"basic",icon:"heroicons_outline:refresh",link:"./app",classes:{wrapper:"padding-style"}},{title:"Fast",type:"basic",icon:"heroicons_outline:refresh",link:"./fast",classes:{wrapper:"padding-style"}},{title:"Self",type:"basic",icon:"heroicons_outline:refresh",link:"./self",classes:{wrapper:"padding-style"}}]}],this.searchCtrl=new me,this.isHandset$=this.breakpointObserver.observe([nt.Tablet,nt.Handset]).pipe(w(p=>p.matches),bt())}ngOnInit(){this.searchCtrl.valueChanges.pipe(M(this)).subscribe(t=>this.searchService.search.next(t)),this._fuseMediaWatcherService.onMediaChange$.pipe(M(this)).subscribe(({matchingAliases:t})=>{t.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}openCreate(){let t={icon:"mat_outline:assignment",iconColor:"primary",title:"Create Task",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Create",dynamicComponent:vi,dynamicComponentData:{patientId:0},submitFunction:"submit",enterKeyEnabled:!0};this.dialog.open(Te,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(M(this)).subscribe(e=>{})}static{this.\u0275fac=function(e){return new(e||mt)(v(qt),v(Le),v(Rt),v(Ce))}}static{this.\u0275cmp=j({type:mt,selectors:[["ac-comm-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(e,i){if(e&1){let s=$();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),h(5," CommCenter "),n()()(),a(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"mat-icon",9)(11,"input",10),n()()()(),a(12,"div",11)(13,"button",12),T("click",function(){F(s);let r=H(17);return A(r.toggle())}),f(14,"mat-icon",13),n()()(),a(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),f(18,"aux-sidebar",16),n(),a(19,"mat-drawer-content",17)(20,"div",18),f(21,"router-outlet"),n()()()()}e&2&&(l(10),u("svgIcon","mat_outline:search"),l(),u("formControl",i.searchCtrl),l(3),u("svgIcon","heroicons_outline:menu"),l(2),u("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened),l(2),u("menuData",i.menuData)("showTitle",!1)("title","SalesCode Actions"))},dependencies:[le,te,Z,ee,Ve,Kt,di,pi,ui,ci,Ot],styles:[".max-w-sx[_ngcontent-%COMP%]{max-width:16rem!important}"],data:{animation:[li,mi,ri,si]}})}};Ze=U([G()],Ze);var Me=["checkedField","emailSource","createdDate","receivedDate","from","subject","patientid","owner","label","fileCount","actions"],Mi=["checkedField","emailSource","createdDate","receivedDate","from","owner","label","fileCount","actions"],Fi=["emailSource","createdDate","from","owner","label","modifiedDate","completed"],Ai=["emailSource","createdDate","from","owner","label","modifiedDate","deleted"],Pi=["checkedField","emailSource","createdDate","dos","from","owner","patientid","label","fileCount","actions"],pt=["checkedField","emailSource","createdDate","dos","from","status","patientid","insurance","label","actions"];var Ki=["shadowElem"];function qi(o,t){if(o&1){let e=$();a(0,"button",36),T("click",function(){F(e);let s=S();return A(s.downloadPdf())}),f(1,"mat-icon",37),n()}}function Hi(o,t){if(o&1){let e=$();a(0,"button",38),T("click",function(){F(e);let s=S();return A(s.openPdf())}),f(1,"mat-icon",39),n()}}function Qi(o,t){if(o&1){let e=$();a(0,"button",40),T("click",function(){F(e);let s=S();return A(s.markCompleted())}),f(1,"mat-icon",41),n()}}function Xi(o,t){if(o&1){let e=$();a(0,"button",42),T("click",function(){F(e);let s=S();return A(s.markDeleted())}),f(1,"mat-icon",43),n()}}function Ji(o,t){if(o&1){let e=$();a(0,"button",44),T("click",function(){F(e);let s=S();return A(s.reopenTask())}),f(1,"mat-icon",45),n()}}function Zi(o,t){o&1&&(a(0,"span",16),h(1,"From:"),n())}function eo(o,t){if(o&1&&(a(0,"span",17),h(1),n()),o&2){let e=S();l(),X(e.email==null?null:e.email.from)}}function to(o,t){if(o&1&&(a(0,"a",18)(1,"div",46),f(2,"mat-icon",47),n(),a(3,"div")(4,"p",48),h(5),n(),a(6,"p",49),h(7,"Call Patient"),n()()()),o&2){let e=S();Et("href","tel:",e.email==null?null:e.email.phoneNumber,"",Fe),l(5),X(e.email==null?null:e.email.from)}}function io(o,t){if(o&1&&(a(0,"mat-option",23),h(1),n()),o&2){let e=t.$implicit;u("value",e.networkName),l(),De("",e.networkName," ")}}function oo(o,t){o&1&&f(0,"mat-progress-spinner",25),o&2&&u("diameter",24)}function no(o,t){if(o&1&&f(0,"mat-icon",26),o&2){let e=S();u("icIcon",e.icCheck)}}function ao(o,t){o&1&&f(0,"mat-progress-spinner",25),o&2&&u("diameter",24)}function ro(o,t){o&1&&f(0,"mat-icon",50)}function lo(o,t){if(o&1){let e=$();a(0,"mat-icon",52),T("click",function(){F(e);let s=S(2),p=H(61);return A(s.editLabel(p))}),n()}}function so(o,t){if(o&1&&(a(0,"span"),E(1,ro,1,0,"mat-icon",50)(2,lo,1,0,"mat-icon",51),n()),o&2){let e=S();l(),g(e.isDeletedCompleted()?1:-1),l(),g(e.isDeletedCompleted()?-1:2)}}function mo(o,t){if(o&1){let e=$();a(0,"mat-chip-row",53),T("removed",function(){let s=F(e).$implicit,p=S();return A(p.deleteTag(s))}),h(1),f(2,"mat-icon",54),n()}if(o&2){let e=t.$implicit;u("removable",!0),l(),De(" ",e," ")}}function co(o,t){o&1&&f(0,"mat-progress-spinner",25),o&2&&u("diameter",24)}function po(o,t){if(o&1&&f(0,"mat-icon",26),o&2){let e=S();u("icIcon",e.icCheck)}}function uo(o,t){o&1&&h(0," Attachments ")}function ho(o,t){if(o&1&&f(0,"mat-progress-bar",65),o&2){let e=S(3);u("value",e.player.currentTime/e.player.duration*100)}}function fo(o,t){o&1&&f(0,"mat-icon",66)}function Co(o,t){o&1&&f(0,"mat-icon",67)}function go(o,t){if(o&1&&(a(0,"div"),E(1,fo,1,0,"mat-icon",66),k(2,"async"),E(3,Co,1,0,"mat-icon",67),k(4,"async"),n()),o&2){let e=S(3);l(),g(I(2,2,e.audioPlaying$)?-1:1),l(2),g(I(4,4,e.audioPlaying$)?3:-1)}}function _o(o,t){if(o&1){let e=$();a(0,"div",62),T("click",function(){let s=F(e).$implicit,p=S(2);return A(p.viewDocument(s))}),f(1,"ic-icon",63),a(2,"p",64),h(3),n(),E(4,ho,1,1,"mat-progress-bar",65),k(5,"async"),E(6,go,5,6,"div"),n()}if(o&2){let e=t.$implicit,i=t.$index,s=S(2);ot("mt-2",i!==0),l(),u("icon",s.icAttachFile),l(2),X(e.name),l(),g(e.type==="audio/mpeg"&&I(5,6,s.audioPlaying$)&&s.player.duration?4:-1),l(2),g(e.type==="audio/mpeg"?6:-1)}}function vo(o,t){if(o&1&&(a(0,"mat-tab"),E(1,uo,1,0,"ng-template",55),a(2,"div",56)(3,"p",57),f(4,"mat-icon",58),a(5,"span"),h(6,"Attachments"),n()(),a(7,"div",59),K(8,_o,7,8,"div",60,Y),k(10,"async"),n(),f(11,"ac-loading-overlay",27),k(12,"async"),n(),f(13,"pdf-viewer",61),k(14,"async"),n()),o&2){let e=S();l(8),q(I(10,8,e.attachments$)),l(3),u("diameter",30)("show",I(12,10,e.loadingAttachments$)),l(2),u("src",I(14,12,e.previewUrl$))("render-text",!0)("original-size",!0)("fit-to-page",!0)("show-all",!1)("page",1)}}function bo(o,t){o&1&&h(0," Message ")}function wo(o,t){o&1&&(a(0,"mat-tab"),E(1,bo,1,0,"ng-template",55),a(2,"div",56)(3,"p",57),f(4,"mat-icon",68),a(5,"span"),h(6,"Messages"),n()(),a(7,"p",69),f(8,"span",null,2),n()()())}function xo(o,t){o&1&&h(0," Notes ")}function So(o,t){o&1&&(a(0,"div",75)(1,"p"),h(2,"No notes added yet."),n()())}function yo(o,t){if(o&1&&(a(0,"div",77)(1,"p",78),h(2),k(3,"datetimeformat"),k(4,"titlecase"),n(),f(5,"p",79),n()),o&2){let e=t.$implicit,i=t.$index;ot("border-t",i!==0)("mt-0",i===0),l(2),Ae(" ",I(3,7,e==null?null:e.createdDate)," by ",I(4,9,e==null?null:e.createdBy)," "),l(3),u("innerHTML",e==null?null:e.description,yt)}}function Eo(o,t){if(o&1&&(a(0,"div"),E(1,So,3,0,"div",75),K(2,yo,6,11,"div",76,Y),n()),o&2){let e=t;l(),g(!e||(e==null?null:e.length)===0?1:-1),l(),q(e)}}function Do(o,t){o&1&&(a(0,"p",74),h(1," Sorry! An error occured while saving, please try again. "),n())}function To(o,t){if(o&1){let e=$();a(0,"mat-tab"),E(1,xo,1,0,"ng-template",55),a(2,"div",56)(3,"p",57),f(4,"mat-icon",70),a(5,"span"),h(6,"Notes"),n()(),E(7,Eo,4,1,"div"),k(8,"async"),a(9,"mat-dialog-actions",71)(10,"form",72),T("ngSubmit",function(){F(e);let s=S();return A(s.addNote())}),f(11,"quill-editor",73,3),E(13,Do,2,0,"p",74),k(14,"async"),n()(),f(15,"ac-loading-overlay",27),k(16,"async"),n()()}if(o&2){let e,i=S();l(7),g((e=I(8,8,i.notes$))?7:-1,e),l(3),u("formGroup",i.notesForm),l(),u("formControlName","note")("placeholder","Enter your note...")("modules",i.quillModules),l(2),g(I(14,10,i.error$)?13:-1),l(2),u("diameter",30)("show",I(16,12,i.loadingNotes$))}}function ko(o,t){if(o&1){let e=$();a(0,"div",80)(1,"h4",81),h(2,"New Label"),n(),a(3,"p"),h(4,"Enter label text here.."),n(),a(5,"mat-form-field",82),f(6,"input",83,4),n(),a(8,"div")(9,"div",84)(10,"button",85),T("click",function(){F(e);let s=H(7),p=S();return A(p.close("false",s.value))}),h(11," Cancel "),n(),a(12,"button",86),T("click",function(){F(e);let s=H(7),p=S();return A(p.close("true",s.value))}),h(13," Save "),n()()()()}}var B=function(o){return o[o.Attachments=0]="Attachments",o[o.Message=1]="Message",o[o.Notes=2]="Notes",o}(B||{}),et=class dt{constructor(t,e,i,s,p,r,c,R){this.data=t,this.dialog=e,this.matDialogRef=i,this.store=s,this.cd=p,this.router=r,this.route=c,this._fuseConfirmationService=R,this.email$=this.store.select(P.selectEmail),this.owners$=this.store.select(P.selectOwners),this.loadingOwners$=this.store.select(P.selectLoadingOwners),this.notes$=this.store.select(P.selectNotes),this.loadingNotes$=this.store.select(P.selectLoadingNotes),this.updatingNotes$=this.store.select(P.selectUpdatingNotes),this.attachments$=this.store.select(P.selectAttachments),this.loadingAttachments$=this.store.select(P.selectLoadingAttachments),this.previewUrl$=this.store.select(P.selectPreviewUrl),this.ownerCtrl=new me,this.labelCtrl=new me,this.loading$=this.store.select(P.selectLoading),this.updatingLabel$=this.store.select(P.selectUpdatingLabel),this.updatingOwner$=this.store.select(P.selectUpdatingOwner),this.audioPlaying$=this.store.select(P.selectAudioPlaying),this.audio$=this.store.select(P.selectAudio),this.error$=this.store.select(P.selectError),this.tags=new gt([]),this.tags$=this.tags.asObservable(),this.loadingTags$=this.store.select(P.selectLoadingTags),this.updatingTags$=this.store.select(P.selectUpdatingTags),this.notesForm=new jt({note:new me}),this.isreadonly=!1,this.quillModules={toolbar:!1},this.currentPosition=0,this.separatorKeysCodes=[13,188],this.email=this.data.dynamicComponentData,this.isDeletedCompleted()?(this.isreadonly=!0,this.ownerCtrl.disable()):this.ownerCtrl.enable(),this.store.dispatch(m.LoadEmail({emailId:this.email.id})),this.store.dispatch(m.LoadOwners()),this.store.dispatch(m.LoadAttachments({emailId:this.email.id})),this.store.dispatch(m.LoadNotes({emailId:this.email.id})),this.store.dispatch(m.LoadTags({emailId:this.email.id})),this.ownerCtrl.setValue(this.email?.owner),this.labelCtrl.setValue(this.email?.label),this.store.select(P.selectTagNames).pipe(M(this)).subscribe(O=>this.tags.next(O)),this.ownerCtrl.valueChanges.pipe(M(this)).subscribe(O=>this.updateOwner(O)),this.audio$.pipe(M(this)).subscribe(O=>{if(!O&&this.player)return this.player.pause();O&&(this.player=new Audio(URL.createObjectURL(O)),this.player.play(),this.player.addEventListener("timeupdate",C=>{}),this.player.addEventListener("ended",C=>{this.store.dispatch(m.StopAudioAttachment())}))}),this.store.select(P.selectAttachments).pipe(M(this)).subscribe(O=>{O?.length&&O[0].type!=="audio/mpeg"&&this.store.dispatch(m.LoadCommDocument({attachmentId:O[0].id,isPreviewOnly:!0}))})}ngOnInit(){this.getSelectedTabIndex(),this.attachments$.pipe(M(this)).subscribe(t=>{t.length&&(this.attachMentID=t[0].id,this.attachMentName=t[0].name)})}ngAfterViewInit(){if(this.shadowElem){let t=this.shadowElem.nativeElement.attachShadow({mode:"open"}),e=document.createElement("div");t.appendChild(e),this.email$.pipe(vt(i=>!!i?.body),M(this)).subscribe(i=>{e.innerHTML=i.body})}}viewDocument(t){if(t.type==="audio/mpeg")return this.store.dispatch(m.PlayAudioAttachment({attachmentId:t.id}));this.store.dispatch(m.LoadCommDocument({attachmentId:t.id}))}updateLabel(t){this.store.dispatch(m.UpdateLabel({emailId:this.email.id,label:t}))}updateOwner(t){this.store.dispatch(m.UpdateOwner({emailId:this.email.id,owner:t}))}addTag(t){if(!t.value||this.tags.getValue().some(e=>e===t.value)){t.input&&(t.input.value=null);return}this.tags.next([...this.tags.getValue(),t.value]),this.store.dispatch(m.AddTag({emailId:this.email.id,tag:t.value})),t.input&&(t.input.value=null)}deleteTag(t){this.tags.next(this.tags.getValue().filter(e=>e!==t)),this.store.dispatch(m.DeleteTag({emailId:this.email.id,tag:t}))}addNote(){if(this.notesForm.invalid||!this.notesForm.value.note)return;let t=this.notesForm.value,e={emailID:this.email.id,description:t.note};this.store.dispatch(m.AddNote({note:e})),this.notesForm.reset(),this.store.dispatch(m.LoadNotes({emailId:this.email.id}))}editLabel(t){this.dialog.open(t,{width:"300px",maxWidth:"100%"})}close(t,e){if(t=="true"&&e){let i=e.toString().toUpperCase();this.updateLabel(i),this.labelCtrl.setValue(i),this._fuseConfirmationService.open({title:"Label saved!",message:`
            You entered:
            <pre><code>${i}</code></pre>
          `,actions:{confirm:{label:"Done"},cancel:{show:!1}},icon:{name:"heroicons_outline:check-circle",color:"success"}})}}isDeletedCompleted(){return!!(this.email.isDeleted||this.email.isCompleted)}ngOnDestroy(){this.store.dispatch(m.SetPreviewUrl({url:null})),this.player&&(this.store.dispatch(m.StopAudioAttachment()),this.player?.pause(),this.player=null)}markDeleted(){this._fuseConfirmationService.open({title:"Are you sure?",message:"You won't be able to revert this!",actions:{confirm:{label:"Yes, delete it!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(e=>{e=="confirmed"&&(this.store.dispatch(d.DeleteMail({emailId:this.email.id})),this.matDialogRef.close())})}markCompleted(){this._fuseConfirmationService.open({title:"Are you sure?",message:"You will flag this item as completed!",actions:{confirm:{label:"Yes, it's completed!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(e=>{e=="confirmed"&&(this.store.dispatch(d.MarkMailAsComplete({emailId:this.email.id})),this.matDialogRef.close())})}successMessage(t,e){this._fuseConfirmationService.open({title:t,message:e,actions:{confirm:{label:"OK"},cancel:{show:!1}},icon:{name:"heroicons_outline:check-circle",color:"success"}}).afterClosed().pipe(M(this)).subscribe(s=>{this.matDialogRef.close()})}reopenTask(){this._fuseConfirmationService.open({title:"Are you sure?",message:"You will reopen this completed task!",actions:{confirm:{label:"Yes, reopen it!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(e=>{e==="confirmed"&&(this.store.dispatch(d.ReopenCompletedEmail({emailId:this.email.id})),this.matDialogRef.close())})}openPdf(){this.matDialogRef.close("email-section");let t=this.router.url;this.router.navigateByUrl(`${t}/link-doc/${this.attachMentID}`)}downloadPdf(){this.store.dispatch(m.LoadCommDocument({attachmentId:this.attachMentID,isPreviewOnly:!1,attachMentName:this.attachMentName}))}getSelectedTabIndex(){switch(this.email.emailSource){case"TASK":this.selectedTab=B.Notes;break;case"EMAIL":this.selectedTab=B.Message;break;case"SALES":this.selectedTab=B.Message;break;case"FORMSPREE":this.selectedTab=B.Message;break;case"SELF":this.selectedTab=B.Message;break;case"FAST":this.selectedTab=B.Message;break;case"VM":this.selectedTab=B.Attachments;break;case"WOUND":this.selectedTab=B.Attachments;break;case"APP":this.selectedTab=B.Attachments;break;default:this.selectedTab=B.Attachments}}static{this.\u0275fac=function(e){return new(e||dt)(v(Ge,8),v(Ce),v(je),v(L),v($t),v(Vt),v(ae),v(We))}}static{this.\u0275cmp=j({type:dt,selectors:[["ac-comm-center-email"]],viewQuery:function(e,i){if(e&1&&Se(Ki,5),e&2){let s;ye(s=Ee())&&(i.shadowElem=s.first)}},decls:62,vars:48,consts:[["chipList",""],["labelModale",""],["shadowElem",""],["quillEditor",""],["label",""],[1,"row"],[1,"column","column1","dark:bg-transparent"],[1,"relative"],[1,"flex","items-center"],["matTooltip","Download Pdf","type","button","tabindex","-1",1,"ml-4"],["matTooltip","Link Document","type","button","tabindex","-1",1,"ml-4"],["matTooltip","Mark as Completed","type","button","tabindex","-1",1,"ml-4"],["matTooltip","Mark as Deleted","type","button","tabindex","-1",1,"text-secondary","ml-4","mr-2","hover:text-red-500"],["matTooltip","Reopen Task","type","button","tabindex","-1",1,"ml-6","hover:text-gray-500"],[1,"mx-6","mt-4","flex","flex-col","font-mono"],[1,"flex-1","truncate","py-4"],[1,"mr-2","text-base","font-bold"],[1,"truncate"],["tabindex","-1","matRipple","",1,"relative","flex","items-center","rounded-full","px-2","py-3","transition","duration-200","ease-in-out","hover:bg-blue-100",3,"href"],[1,"mx-6","flex","items-center","font-mono"],[1,"relative","flex-1"],["appearance","outline",1,"no-padding","w-full"],[3,"formControl"],[3,"value"],["matSuffix","",1,"mx-2"],["matTooltip","Saving Changes...","mode","indeterminate",3,"diameter"],["matSuffix","","matTooltip","All Changes Saved",1,"text-green-500",3,"icIcon"],["type","spinner",3,"diameter","show"],["appearance","outline",1,"no-padding","ml-2","flex-1"],["matInput","","readonly","",3,"formControl"],[1,"relative","mx-6","font-mono"],["appearance","outline",1,"w-full"],["aria-label","Fruit selection"],[3,"removable"],["placeholder","New Tag...",3,"matChipInputTokenEnd","disabled","matChipInputAddOnBlur","matChipInputFor","matChipInputSeparatorKeyCodes"],[1,"font-mono",3,"selectedIndex"],["matTooltip","Download Pdf","type","button","tabindex","-1",1,"ml-4",3,"click"],["svgIcon","mat_outline:cloud_download","size","24px",1,"text-xl"],["matTooltip","Link Document","type","button","tabindex","-1",1,"ml-4",3,"click"],["svgIcon","mat_outline:insert_link","size","24px",1,"text-xl"],["matTooltip","Mark as Completed","type","button","tabindex","-1",1,"ml-4",3,"click"],["svgIcon","mat_outline:check","size","24px",1,"text-xl","text-green-500"],["matTooltip","Mark as Deleted","type","button","tabindex","-1",1,"text-secondary","ml-4","mr-2","hover:text-red-500",3,"click"],["svgIcon","mat_outline:delete","size","24px",1,"text-red-500"],["matTooltip","Reopen Task","type","button","tabindex","-1",1,"ml-6","hover:text-gray-500",3,"click"],["svgIcon","heroicons_outline:lock-open-right","size","24px"],[1,"mr-3","flex","h-12","w-12","items-center","justify-center","rounded-full","bg-blue-100","text-blue-500"],["svgIcon","mat_outline:local_phone"],[1,"m-0","text-sm"],[1,"text-secondary","m-0","text-sm"],["svgIcon","mat_outline:edit","matSuffix","","matTooltip","Edit Label",1,"text-gray-300"],["svgIcon","mat_outline:edit","matSuffix","","matTooltip","Edit Label",1,"text-green-500"],["svgIcon","mat_outline:edit","matSuffix","","matTooltip","Edit Label",1,"text-green-500",3,"click"],[3,"removed","removable"],["svgIcon","mat_outline:close"],["mat-tab-label",""],[1,"relative","mt-4"],[1,"flex","items-center","text-lg","font-medium"],["svgIcon","mat_outline:attach_file",1,"mr-2","text-primary"],[1,"mt-4"],["matRipple","",1,"bg-base","relative","flex","cursor-pointer","select-none","items-center","truncate","rounded","border","p-2","text-xs",3,"mt-2"],[1,"mt-8","h-96","cursor-pointer","shadow",2,"display","block",3,"src","render-text","original-size","fit-to-page","show-all","page"],["matRipple","",1,"bg-base","relative","flex","cursor-pointer","select-none","items-center","truncate","rounded","border","p-2","text-xs",3,"click"],["size","24px",1,"text-secondary","block","flex-none","pr-2",3,"icon"],[1,"flex-auto","truncate"],[1,"mx-2",3,"value"],["svgIcon","mat_outline:play_arrow",1,"block","flex-none","pr-2","text-green-500"],["svgIcon","mat_outline:stop",1,"block","flex-none","pr-2","text-red-500"],["svgIcon","mat_outline:message",1,"mr-2","text-primary"],[1,"messageBox","mt-2","rounded","border","text-sm"],["svgIcon","mat_outline:notes",1,"mr-2","text-primary"],[1,"m-0","flex-none","border-t","py-4"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"mt-2","w-full","uppercase",3,"formControlName","placeholder","modules"],[1,"font-medium","text-red-500"],[1,"text-secondary","py-4"],[1,"px-4","pb-2","pl-8","pt-2",3,"border-t","mt-0"],[1,"px-4","pb-2","pl-8","pt-2"],[1,"text-xs","text-gray-500"],[1,"text-sm",3,"innerHTML"],[1,"edit-label"],[1,"text-2xl","font-medium"],["appearance","outline",1,"d:block","mt-3","w-full"],["matInput","","type","text",1,"uppercase"],[1,"flex","justify-between"],["mat-flat-button","","type","button","mat-dialog-close","",3,"click"],["mat-flat-button","","type","button","mat-dialog-close","","color","primary",3,"click"]],template:function(e,i){if(e&1){let s=$();a(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),E(4,qi,2,0,"button",9)(5,Hi,2,0,"button",10)(6,Qi,2,0,"button",11)(7,Xi,2,0,"button",12)(8,Ji,2,0,"button",13),n(),a(9,"div",14)(10,"div",15),E(11,Zi,2,0,"span",16)(12,eo,2,1,"span",17)(13,to,8,3,"a",18),n()(),a(14,"div",19)(15,"div",20)(16,"mat-form-field",21)(17,"mat-label"),h(18,"Owner"),n(),a(19,"mat-select",22),K(20,io,2,2,"mat-option",23,Y),k(22,"async"),n(),a(23,"div",24),E(24,oo,1,1,"mat-progress-spinner",25),k(25,"async"),E(26,no,1,1,"mat-icon",26),k(27,"async"),n()(),f(28,"ac-loading-overlay",27),k(29,"async"),n(),a(30,"mat-form-field",28)(31,"mat-label"),h(32,"Label"),n(),f(33,"input",29),a(34,"div",24),E(35,ao,1,1,"mat-progress-spinner",25),k(36,"async"),E(37,so,3,2,"span"),k(38,"async"),n()()(),a(39,"div",30)(40,"mat-form-field",31)(41,"mat-label"),h(42,"Tags"),n(),a(43,"mat-chip-grid",32,0),K(45,mo,3,2,"mat-chip-row",33,Y),k(47,"async"),a(48,"input",34),T("matChipInputTokenEnd",function(r){return F(s),A(i.addTag(r))}),n()(),a(49,"div",24),E(50,co,1,1,"mat-progress-spinner",25),k(51,"async"),E(52,po,1,1,"mat-icon",26),k(53,"async"),n()(),f(54,"ac-loading-overlay",27),k(55,"async"),n(),a(56,"mat-tab-group",35),E(57,vo,15,14,"mat-tab")(58,wo,10,0,"mat-tab")(59,To,17,14,"mat-tab"),n()()()(),E(60,ko,14,0,"ng-template",null,1,Pt)}if(e&2){let s=H(44);l(4),g(((i.email==null?null:i.email.emailSource)=="FAX"||(i.email==null?null:i.email.emailSource)=="EMAIL"||(i.email==null?null:i.email.emailSource)=="Email")&&i.attachMentID?4:-1),l(),g(((i.email==null?null:i.email.emailSource)=="FAX"||(i.email==null?null:i.email.emailSource)=="App"||(i.email==null?null:i.email.emailSource)=="APP"||(i.email==null?null:i.email.emailSource)=="EMAIL"||(i.email==null?null:i.email.emailSource)=="Email")&&i.attachMentID?5:-1),l(),g(i.isreadonly?-1:6),l(),g(i.isreadonly?-1:7),l(),g((i.email==null?null:i.email.emailSource)=="TASK"&&(i.email==null?null:i.email.isCompleted)===!0?8:-1),l(3),g((i.email==null?null:i.email.emailSource)!="VM"?11:-1),l(),g((i.email==null?null:i.email.emailSource)!="VM"?12:-1),l(),g((i.email==null?null:i.email.emailSource)==="VM"?13:-1),l(6),u("formControl",i.ownerCtrl),l(),q(I(22,28,i.owners$)),l(4),g(I(25,30,i.updatingOwner$)?24:-1),l(2),g(I(27,32,i.updatingOwner$)?-1:26),l(2),u("diameter",50)("show",I(29,34,i.loadingOwners$)),l(5),u("formControl",i.labelCtrl),l(2),g(I(36,36,i.updatingLabel$)?35:-1),l(2),g(I(38,38,i.updatingLabel$)?-1:37),l(8),q(I(47,40,i.tags$)),l(3),u("disabled",i.isreadonly)("matChipInputAddOnBlur",!0)("matChipInputFor",s)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),l(2),g(I(51,42,i.updatingTags$)?50:-1),l(2),g(I(53,44,i.updatingTags$)?-1:52),l(2),u("diameter",50)("show",I(55,46,i.loadingTags$)),l(2),u("selectedIndex",i.selectedTab),l(),g((i.email==null?null:i.email.emailSource)!=="TASK"&&(i.email==null?null:i.email.emailSource)!=="SALES"&&(i.email==null?null:i.email.emailSource)!=="FORMSPREE"&&(i.email==null?null:i.email.emailSource)!=="SELF"&&(i.email==null?null:i.email.emailSource)!=="FAST"?57:-1),l(),g((i.email==null?null:i.email.emailSource)!=="TASK"?58:-1),l(),g((i.email==null?null:i.email.emailSource)=="TASK"?59:-1)}},dependencies:[Ye,le,Gt,he,ue,Ke,te,ce,Z,ee,se,Ve,pe,de,Re,Ue,Ut,re,fe,wi,bi,xi,ai,ni,oi,Bt,Qe,we,Yt,_i,ze,Wt,J,Lt,be],styles:[".row[_ngcontent-%COMP%]{display:flex}.column[_ngcontent-%COMP%]{padding:10px;background:#fff}.column1[_ngcontent-%COMP%]{flex:800px;padding:20px 20px 0;overflow:hidden}.column2[_ngcontent-%COMP%]{flex:800px;overflow:hidden;background:#fff;padding:0 20px 20px;margin:0 auto;border-radius:3px;color:#0000;text-shadow:0 0 black;transition:color .3s ease}.messageBox[_ngcontent-%COMP%]{overflow:scroll;width:100%;height:300px;max-width:100%;max-height:300px}.h-100[_ngcontent-%COMP%]{height:100%;max-height:350px;overflow:scroll}[_nghost-%COMP%]     .no-padding .mat-form-field-wrapper{padding:0}"]})}};et=U([G()],et);var Io=o=>({"mb-2":o});function Mo(o,t){if(o&1&&(a(0,"mat-option",6),h(1),n()),o&2){let e=t.$implicit;u("value",e.networkName),l(),X(e.networkName)}}function Fo(o,t){o&1&&(a(0,"mat-error"),h(1,"Please enter valid date!! It should be MM/DD/YYYY."),n())}function Ao(o,t){o&1&&(a(0,"mat-error",13),h(1,"Due date cannot be in the past."),n())}var tt=class ut{constructor(t,e,i,s,p,r){this.fb=t,this.data=e,this.store=i,this.actions$=s,this.auxUtilService=p,this.dialogRef=r,this.owners$=this.store.select(Ie.selectOwners),this.loadingOwners$=this.store.select(Ie.selectLoadingOwners),this.loading$=this.store.select(Ie.selectLoading),this.error$=this.store.select(Ie.selectError),this.user$=this.store.select(ii.selectUser),this.dateFormat=Xt.DATE_FORMAT,this.selectedRowData=e.dynamicComponentData,this.form=this.fb.group({label:[""],duedate:["",this.auxUtilService.futureDateValidator()],owner:[""],NewOwner:[""],isOwnerClear:[!1],currentUser:[""],isDueDateClear:[!1],isLabelClear:[!1]})}ngOnInit(){this.user$.pipe(M(this)).subscribe(t=>this.form.patchValue({from:t.email})),this.store.dispatch(N.LoadOwners()),this.actions$.pipe(_(N.CreateEmailSuccess),M(this)).subscribe(()=>this.dialogRef.close())}submit(){if(this.form.invalid)return;let t=this.form.value,e=this.selectedRowData.map(s=>s.id);t.numbers=e;let i="1900-01-01T00:00:00";t.duedate=t.duedate===""?i:t.duedate,this.updateOwner(t),this.dialogRef.close()}updateOwner(t){this.store.dispatch(m.UpdateEmailGroupEdit({emailEditGroup:t}))}onDateChange(t,e){this.form=this.auxUtilService.manuallyCheckDateValid(t.target.value,this.form,e)}static{this.\u0275fac=function(e){return new(e||ut)(v(Ne),v(Ge,8),v(L),v(z),v(_e),v(je))}}static{this.\u0275cmp=j({type:ut,selectors:[["app-comm-center-group-edit"]],decls:33,vars:20,consts:[["duedate","matDatepicker"],[3,"ngSubmit","formGroup"],[1,"relative","pb-80","pl-4","pt-1"],[1,"mt-3","flex"],["appearance","outline",1,"w-8/12",3,"subscriptSizing"],["formControlName","owner"],[1,"uppercase",3,"value"],["formControlName","isOwnerClear",3,"color"],["matInput","","formControlName","label",1,"uppercase"],["formControlName","isLabelClear",3,"color"],["appearance","outline",1,"w-8/12",3,"subscriptSizing","ngClass"],["matInput","","formControlName","duedate","placeholder","MM/DD/YYYY",3,"change","matDatepicker"],["matIconSuffix","",3,"for"],[1,"whitespace-nowrap"],["formControlName","isDueDateClear",3,"color"],["type","spinner",3,"diameter","show"]],template:function(e,i){if(e&1){let s=$();a(0,"form",1),T("ngSubmit",function(){return F(s),A(i.submit())}),a(1,"div",2)(2,"div",3)(3,"mat-form-field",4)(4,"mat-label"),h(5,"Owner"),n(),a(6,"mat-select",5),K(7,Mo,2,2,"mat-option",6,Y),k(9,"async"),n()(),a(10,"mat-checkbox",7),h(11,"Clear Data"),n()(),a(12,"div",3)(13,"mat-form-field",4)(14,"mat-label"),h(15,"Label"),n(),f(16,"input",8),n(),a(17,"mat-checkbox",9),h(18,"Clear Data"),n()(),a(19,"div",3)(20,"mat-form-field",10)(21,"mat-label"),h(22,"Due Date"),n(),a(23,"input",11),T("change",function(r){return F(s),A(i.onDateChange(r,"duedate"))}),n(),f(24,"mat-datepicker-toggle",12)(25,"mat-datepicker",null,0),E(27,Fo,2,0,"mat-error")(28,Ao,2,0,"mat-error",13),n(),a(29,"mat-checkbox",14),h(30,"Clear Data"),n()()(),f(31,"ac-loading-overlay",15),k(32,"async"),n()}if(e&2){let s=H(26);u("formGroup",i.form),l(3),u("subscriptSizing","dynamic"),l(4),q(I(9,14,i.owners$)),l(3),u("color","primary"),l(3),u("subscriptSizing","dynamic"),l(4),u("color","primary"),l(3),u("subscriptSizing","dynamic")("ngClass",Ft(18,Io,i.form.get("duedate").hasError("notValidDate"))),l(3),u("matDatepicker",s),l(),u("for",s),l(3),g(i.form.get("duedate").hasError("notValidDate")?27:-1),l(),g(i.form.get("duedate").hasError("pastDate")?28:-1),l(),u("color","primary"),l(2),u("diameter",50)("show",I(32,16,i.loadingOwners$))}},dependencies:[te,ce,Z,ee,se,pe,de,he,ue,Ke,Re,He,fe,$e,Zt,ei,Ue,Jt,Be,re,J],encapsulation:2})}};tt=U([G()],tt);function Po(o,t){if(o&1){let e=$();a(0,"button",12),T("click",function(){F(e);let s=S(2);return A(s.batchCompleteMail())}),f(1,"mat-icon",13),n()}}function $o(o,t){if(o&1){let e=$();a(0,"button",14),T("click",function(){F(e);let s=S(2);return A(s.batchDeleteMail())}),f(1,"mat-icon",15),n()}}function Lo(o,t){if(o&1){let e=$();a(0,"button",16),T("click",function(){F(e);let s=S(2);return A(s.groupEdit())}),f(1,"mat-icon",17),n()}}function Oo(o,t){if(o&1){let e=$();a(0,"div",2)(1,"div")(2,"button",5),T("click",function(){F(e);let s=S();return A(s.Refresh())}),f(3,"mat-icon",6),a(4,"span"),h(5,"Refresh"),n()()(),a(6,"div",7),h(7),n(),a(8,"div",8),E(9,Po,2,0,"button",9)(10,$o,2,0,"button",10)(11,Lo,2,0,"button",11),n()()}if(o&2){let e=S();l(7),De("",e.selection.selected.length," Items Selected"),l(2),g(e.isDisabled()?-1:9),l(),g(e.isDisabled()?-1:10),l(),g(e.isDisabled()?-1:11)}}function Vo(o,t){if(o&1){let e=$();a(0,"div",3)(1,"div")(2,"button",5),T("click",function(){F(e);let s=S();return A(s.Refresh())}),f(3,"mat-icon",6),a(4,"span"),h(5,"Refresh"),n()()(),a(6,"div",18),h(7,"\xA0"),n()()}}var it=class ht{constructor(t,e,i,s,p,r,c,R,O){this.store=t,this.route=e,this.actions$=i,this.dateTimeFormatePipe=s,this.dateFormatePipe=p,this.dialog=r,this._fuseConfirmationService=c,this.searchService=R,this.auxUtilService=O,this.columnDefs=[{headerName:"Id",field:"id",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",minWidth:75,sortIndex:3,hide:!1},{headerName:"Source",field:"emailSource",cellRenderer:rt,onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",minWidth:80,sortIndex:2,hide:!1,filterParams:{filters:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter",filterParams:{cellRenderer:rt}}]}},{headerName:"Due Date",field:"receivedDate",onCellClicked:C=>{this.openEmailDrawer(C)},valueFormatter:C=>this.dateFormatePipe.transform(C.data.receivedDate),filter:"agDateColumnFilter",filterParams:ke,sortIndex:5,hide:!1,minWidth:100},{headerName:"Created Date",field:"createdDate",onCellClicked:C=>{this.openEmailDrawer(C)},valueFormatter:C=>this.dateTimeFormatePipe.transform(C.data.createdDate),filter:"agDateColumnFilter",filterParams:ke,sortIndex:4,hide:!1,minWidth:135},{headerName:"From",field:"from",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",minWidth:225,sortIndex:6,hide:!1},{headerName:"To",field:"to",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",minWidth:225,sortIndex:7,hide:!1},{headerName:"Date of SVC",field:"dos",onCellClicked:C=>{this.openEmailDrawer(C)},valueFormatter:C=>this.dateFormatePipe.transform(C.data.dos),filter:"agDateColumnFilter",filterParams:ke,sortIndex:8,hide:!1,minWidth:100},{headerName:"Subject",field:"subject",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",sortIndex:9,hide:!1,minWidth:175},{headerName:"Patient ID",field:"patientid",filter:"agMultiColumnFilter",minWidth:100,cellRenderer:ve,cellRendererParams:{field:"patientid"},onCellClicked:C=>this.handleRedirect("patientid",{data:{patientid:C.data.patientid}})},{headerName:"Owner",field:"owner",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",sortIndex:11,hide:!1,minWidth:100},{headerName:"Label",field:"label",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",sortIndex:12,hide:!1,minWidth:250},{headerName:"Modified by",field:"modifiedBy",onCellClicked:C=>{this.openEmailDrawer(C)},filter:"agMultiColumnFilter",sortIndex:13,hide:!1,minWidth:70},{headerName:"Modified Date",field:"modifiedDate",onCellClicked:C=>{this.openEmailDrawer(C)},valueFormatter:C=>this.dateTimeFormatePipe.transform(C.data.modifiedDate),filter:"agDateColumnFilter",filterParams:ke,sortIndex:14,hide:!1,minWidth:150},{headerName:"Completed",field:"completed",cellRenderer:ve,onCellClicked:C=>{this.openEmailDrawer(C)},cellRendererParams:{field:"completed"},sortIndex:15,hide:!1,minWidth:150},{headerName:"Deleted",field:"deleted",cellRenderer:ve,onCellClicked:C=>{this.openEmailDrawer(C)},cellRendererParams:{field:"deleted"},sortIndex:16,hide:!1,minWidth:150},{headerName:"File",field:"fileCount",cellRenderer:ve,onCellClicked:C=>{this.openEmailDrawer(C)},cellRendererParams:{field:"fileCount"},sortIndex:17,hide:!1,minWidth:65},{headerName:"Ins Ver",field:"status",cellRenderer:ve,onCellClicked:C=>{this.openEmailDrawer(C)},cellRendererParams:{field:"status"},filter:"agMultiColumnFilter",sortIndex:18,hide:!1,minWidth:100},{headerName:"Insurance",field:"insurance",minWidth:175,onCellClicked:C=>{this.openEmailDrawer(C)},cellRenderer:C=>`
                <div class="rounded px-2 py-1 font-medium text-xs flex-none bg-cyan-100 text-cyan-600 truncate insurance-pill">
                    ${C.data.insurance!==null?C.data.insurance:""}
                </div>
                `,filter:"agMultiColumnFilter",sortIndex:19,hide:!1,cellStyle:{display:"flex",alignItems:"center"}},{headerName:"",field:"actions",cellRenderer:hi,cellRendererParams:{menuItems:[{name:"Mark as Completed",action:this.markAsCompleted.bind(this),icon:"check",color:"text-green-500"},{name:"Delete",action:this.deleteMessage.bind(this),icon:"mat_outline:delete",color:"text-red-500"}]},minWidth:120,filter:!1,sortIndex:20,hide:!1}],this.rowData=[],this.options={gridOptions:{rowSelection:{mode:"multiRow",checkboxes:!0,headerCheckbox:!0,selectAll:"filtered",checkboxColumn:{resizable:!1,suppressMovable:!0,lockPosition:!0,filter:!1,sortable:!1,headerName:"",headerTooltip:"Checkboxes indicate selection"}},rowMultiSelectWithClick:!0,headerHeight:36,rowHeight:40,suppressRowClickSelection:!0},defaultColDef:{flex:1,filter:!0,sortable:!0}},this.visibleColumns=Me,this.data$=this.route.paramMap.pipe(x(C=>{switch(C.get("filterSlug")){case"unassigned":return this.store.select(W.selectEmails);case"by-owner":return this.store.select(W.selectEmailsByOwner);case"completed":return this.store.select(W.selectCompletedEmails);case"deleted":return this.store.select(W.selectDeletedEmails);case"my-inbox":return this.store.select(W.selectMyEmails);case"app":return this.store.select(W.selectEmailsBySource);case"fast":return this.store.select(W.selectEmailsBySource);case"self":return this.store.select(W.selectEmailsBySource)}})),this.loading$=this.store.select(W.selectLoading),this.pageSizeOption={pageSize:20,pageSizeOptions:[5,10,20,50]},this.refresh=new Ct,this.refresh$=this.refresh.asObservable(),this.selectedRowIndex=-1,this.selection=new ti(!0,[]),this.filterSlug=""}ngOnInit(){_t([this.route.paramMap,this.refresh$.pipe(wt(null))]).pipe(M(this)).subscribe(([t])=>{let e=t.get("filterSlug");switch(e&&this.filterSlug!==""&&e!==this.filterSlug&&this.searchService.resetFilter.next({resetGrid:!0}),this.filterSlug=e,e){case"unassigned":this.visibleColumns=Mi,this.selection.clear(),this.store.dispatch(d.LoadEmails({days:0}));break;case"by-owner":this.visibleColumns=Me,this.selection.clear(),this.store.dispatch(d.LoadEmailsByOwner());break;case"completed":this.visibleColumns=Fi,this.selection.clear(),this.resetGridFilters(),this.store.dispatch(d.LoadCompletedEmails());break;case"deleted":this.visibleColumns=Ai,this.selection.clear(),this.store.dispatch(d.LoadDeletedEmails());break;case"my-inbox":this.visibleColumns=Me,this.selection.clear(),this.store.dispatch(d.LoadMyEmails());break;case"app":this.visibleColumns=Pi,this.selection.clear(),this.store.dispatch(d.LoadEmailsBySource({source:"app"}));break;case"fast":this.visibleColumns=pt,this.selection.clear(),this.store.dispatch(d.LoadEmailsBySource({source:"fast"}));break;case"self":this.visibleColumns=pt,this.selection.clear(),this.store.dispatch(d.LoadEmailsBySource({source:"self"}));break;default:this.visibleColumns=Me,this.selection.clear(),this.store.dispatch(d.LoadMyEmails());break}}),this.data$.pipe(M(this)).subscribe(t=>{this.rowData=t}),this.actions$.pipe(_(d.Refresh),M(this)).subscribe(t=>this.refresh.next(t))}markAsCompleted(t){this.completeMail(t.data)}Refresh(){this.refresh.next(null)}deleteMessage(t){this.deleteMail(t.data)}onSelectionChanged(t){this.selectedRow=t.api.getSelectedRows();let e=t.api.getSelectedRows();this.selection.setSelection(...t.api.getSelectedRows())}openEmailDrawer(t){this.selectedRowIndex=t.rowIndex,t.api.deselectAll(),this.openEmail(t)}ngAfterViewInit(){}openEmail(t){this.selection.clear();let e={icon:"mat_outline:assignment",iconColor:"primary",title:"DETAILS",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"Add",dynamicComponent:et,dynamicComponentData:t.data||null,submitFunction:"addNote",enterKeyEnabled:!1};this.dialog.open(Te,{width:"800px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:e}).afterClosed().pipe(M(this)).subscribe(i=>{})}deleteMail(t){this._fuseConfirmationService.open({title:"Are you sure?",message:"You won't be able to revert this!",actions:{confirm:{label:"Yes, delete it!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(i=>{i=="confirmed"&&(this.store.dispatch(d.DeleteMail({emailId:t.id})),this.successMessage("Deleted!","Record has been deleted."))})}completeMail(t){this._fuseConfirmationService.open({title:"Are you sure?",message:"You will flag this item as completed!",actions:{confirm:{label:"Yes, it's completed!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(i=>{i=="confirmed"&&this.store.dispatch(d.MarkMailAsComplete({emailId:t.id}))})}batchCompleteMail(){this._fuseConfirmationService.open({title:"Are you sure?",message:`You will flag ${this.selection.selected.length} selected items as completed!`,actions:{confirm:{label:"Yes, it's completed!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(e=>{if(e=="confirmed"){let i=this.selection.selected.map(s=>s.id);this.store.dispatch(d.MarkMailsAsComplete({emaildata:i}))}})}batchDeleteMail(){this._fuseConfirmationService.open({title:"Are you sure?",message:"You won't be able to revert this!",actions:{confirm:{label:"Yes, delete!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(M(this)).subscribe(e=>{if(e=="confirmed"){let i=this.selection.selected.map(s=>s.id);this.store.dispatch(d.DeleteMails({emaildata:i})),this.successMessage("Deleted!","Record has been deleted.")}})}isDisabled(){return this.selection.isEmpty()}successMessage(t,e){this._fuseConfirmationService.open({title:t,message:e,actions:{confirm:{label:"OK"},cancel:{show:!1}},icon:{name:"heroicons_outline:check-circle",color:"success"}})}resetGridFilters(){}groupEdit(){let t={icon:"mat_outline:edit_note",title:"Group Edit",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:tt,dynamicComponentData:this.selectedRow,submitFunction:"submit",enterKeyEnabled:!0},e=this.dialog.open(Te,{width:"700px",height:"auto",data:t})}handleRedirect(t,e){e.data.patientid&&this.auxUtilService.redirectToNewTab(t,e)}static{this.\u0275fac=function(e){return new(e||ht)(v(L),v(ae),v(z),v(be),v(qe),v(Ce),v(We),v(Le),v(_e))}}static{this.\u0275cmp=j({type:ht,selectors:[["ac-comm-center-table"]],features:[Mt([be,qe])],decls:6,vars:11,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-hidden","bg-white","shadow","dark:bg-transparent"],[1,"justfy-between","flex","w-full","items-center","border-b-[1px]","border-[#BDC3C7]","bg-white","pb-2","pt-2","dark:bg-transparent"],[1,"justfy-between","flex","w-full","border-b-[1px]","border-[#BDC3C7]","bg-white","pb-2","pt-2","dark:bg-transparent"],[3,"rowSelectionChange","gridOptions","component","rowData","columnDefs","visibleColumns","agGridHeight","loading"],["mat-stroked-button","","color","primary","matTooltip","Refresh",1,"inline-flex","items-center","gap-2","py-2","pl-4",3,"click"],["svgIcon","mat_outline:refresh"],[1,"whitespace-nowrap","py-2","pl-4","text-lg"],[1,"flex","w-full"],["matTooltip","Complete",1,"pl-4"],["matTooltip","Delete",1,"pl-4","text-primary-500"],["matTooltip","Group Edit",1,"pl-4","text-primary-500"],["matTooltip","Complete",1,"pl-4",3,"click"],["svgIcon","check","size","24px",1,"text-green-500"],["matTooltip","Delete",1,"pl-4","text-primary-500",3,"click"],["svgIcon","mat_outline:delete","size","24px",1,"text-red-500"],["matTooltip","Group Edit",1,"pl-4","text-primary-500",3,"click"],["svgIcon","mat_outline:edit_note","size","24px",1,"text-purple-500"],[1,"whitespace-nowrap","py-2","pl-4","pr-8","text-lg"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1),E(2,Oo,12,4,"div",2)(3,Vo,8,0,"div",3),a(4,"aux-ag-grid",4),k(5,"async"),T("rowSelectionChange",function(p){return i.onSelectionChanged(p)}),n()()()),e&2&&(l(2),g(i.filterSlug!=="completed"&&i.filterSlug!=="deleted"?2:-1),l(),g(i.filterSlug==="completed"||i.filterSlug==="deleted"?3:-1),l(),u("gridOptions",i.options)("component","commcenter")("rowData",i.rowData)("columnDefs",i.columnDefs)("visibleColumns",i.visibleColumns)("agGridHeight","calc(100vh - 362px)")("loading",I(5,9,i.loading$)))},dependencies:[Ye,le,fi,J],styles:[".insurance-pill{max-height:32px;display:flex;align-items:center}"],changeDetection:0})}};it=U([G()],it);var Cr=[{path:"",component:Ze,providers:Ti,children:[{path:"",redirectTo:"my-inbox",pathMatch:"full"},{path:":filterSlug",component:it},{path:":filterSlug/link-doc/:id",component:Je}]}];export{Cr as default};
