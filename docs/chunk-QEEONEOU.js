import{$a as fe,Ba as ao,Ka as lo,La as so,Na as He,Oa as co,Pa as mo,Qa as po,Ra as fo,Sa as Qr,T as to,Ta as uo,Ua as Si,Va as bi,Wa as ho,Xa as vo,Ya as Co,Za as go,_a as _o,a as Xt,ab as Hr,b as Xn,bb as xo,c as eo,cb as Kr,db as Jr,eb as Yr,fb as Zr,ga as io,gb as Xr,hb as ea,ib as ta,jb as ia,kb as na,la as no,lb as oa,mb as ko,nb as $o,ob as Pe,pb as xe,qb as Bo,rb as No,sb as Vo,tb as jo,ub as Oo,va as oo,vb as ei,wb as ra,xb as Ro,ya as ro}from"./chunk-CYV2MHKG.js";import{b as yo,c as So,d as bo,e as wo,f as Lo,g as Do,h as Io,i as Ao,j as Mo,k as Eo,l as To}from"./chunk-ZWQIBEUI.js";import{a as Fo}from"./chunk-VZ64S7CE.js";import{a as Yn,b as Zn}from"./chunk-3NH6NOP6.js";import{$ as Qe,A as jn,B as Ht,C as On,D as Rn,E as Kt,F as pe,G as Pn,H as Jt,I as Fi,J as Un,K as Yt,L as zn,M as qn,N as Gn,O as _i,P as Wn,Q as Se,R as xi,S as Qn,T as ae,U as Hn,V as Kn,W as Jn,X as J,Y as Zt,Z as X,_ as z,a as M,aa as yi,b as re,c as Pt,d as vi,e as Ci,f as wn,g as Ln,h as Dn,i as Ut,j as In,k as An,l as zt,m as gi,n as Mn,o as En,p as qt,q as We,r as Tn,s as kn,t as Gt,u as $n,v as Wt,w as Bn,x as Nn,y as Qt,z as Vn}from"./chunk-XL4UWPO2.js";import{a as Sn,b as bn}from"./chunk-JST4RBVZ.js";import"./chunk-HHBLH35P.js";import{a as gn,b as Fn}from"./chunk-YO73HNCF.js";import{a as Rt}from"./chunk-ZKZQT5NF.js";import{a as _n}from"./chunk-TJLYJQXY.js";import{a as xn,b as yn}from"./chunk-D7SFZ6EE.js";import{a as un}from"./chunk-6LE6SZDP.js";import{a as Cn}from"./chunk-DOHNGIRK.js";import{a as vn}from"./chunk-CFVP3FCT.js";import{a as fn}from"./chunk-EPDAUZIC.js";import{a as pn}from"./chunk-X74UJ3QR.js";import{a as Bt}from"./chunk-VGE2PNKJ.js";import{a as $t,b as Nt}from"./chunk-7O4GN6JJ.js";import{a as Oe}from"./chunk-RW26HZBH.js";import{a as Re}from"./chunk-Y5RI4PHI.js";import{a as Vt,b as jt,c as Ot}from"./chunk-BLZL7MQY.js";import{c as hn}from"./chunk-OJSM7WWP.js";import{a as dn}from"./chunk-OD2F5SLA.js";import"./chunk-WX54DYK2.js";import{a as cn}from"./chunk-FJCYNQP7.js";import"./chunk-YCMFPTNH.js";import{a as Mt,c as Et}from"./chunk-VRDZKI6P.js";import{a as Dt,b as It,c as At}from"./chunk-6HRBECBJ.js";import"./chunk-E6UI7ODH.js";import{a as _e}from"./chunk-V2BYYYUY.js";import"./chunk-ODTVUJKH.js";import{a as Lt}from"./chunk-Z76PEBTC.js";import{c as mn}from"./chunk-GLNCR2H3.js";import{a as hi,b as de}from"./chunk-M7CNBRZG.js";import"./chunk-2LVKS4R7.js";import{a as yt}from"./chunk-BWPVOFCI.js";import{a as Ve,b as je}from"./chunk-T6JQBFCO.js";import{a as St}from"./chunk-VK4TGBYQ.js";import{c as $e,d as xt,e as me}from"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as Zi}from"./chunk-3IAIBVAD.js";import{a as Ae}from"./chunk-QZ2WTBPW.js";import{c as sn}from"./chunk-KFQHPBEM.js";import{a as ui}from"./chunk-7RWCIHFI.js";import{a as Tt}from"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import{d as ln}from"./chunk-XU6AK5HV.js";import{e as ut}from"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as D,b as Z,c as b,e as an}from"./chunk-W6W3L4PS.js";import{c as kt}from"./chunk-ZKDLRTZU.js";import"./chunk-FADVVZG5.js";import{n as E,q as Ji}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import{a as Wr}from"./chunk-2SL7SW2K.js";import"./chunk-XX7H3YTW.js";import{f as Be}from"./chunk-MYHJKLLN.js";import{c as _t}from"./chunk-6WEMRU4N.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import{a as ht,b as vt,c as Ct,d as gt,g as on,h as Ft}from"./chunk-BV6IOHNV.js";import{A as en,B as tn,D as ke,c as Me,e as ce,h as Ee,i as mt,l as Ge,m as Xi,o as dt,q as Te,r as pt,t as ft}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{l as nn,o as Ne,q as rn}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import{a as bt}from"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as wt}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as Q,b as L}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as se,p as Yi}from"./chunk-HJKZPT2B.js";import{b as Fe,c as ct,d as le,e as Ki}from"./chunk-W5GYUEPJ.js";import{$b as f,Ab as V,B as Vi,Bc as Le,Cc as nt,Dc as De,G as Ce,Gb as F,H as tt,Ia as T,Ic as x,J as $,Ja as k,Jc as y,Kc as ot,Mc as rt,N as pi,Ob as s,Q as ji,Qb as it,Sc as Ie,T as Oi,Ub as fi,Vb as A,Wb as ue,Xb as ie,Yb as ne,Zb as a,_b as o,ac as he,bc as ve,da as Ri,dc as j,f as we,fc as w,g as et,ga as ge,gc as g,ha as I,hc as Ui,hd as at,ic as zi,id as lt,kd as Qi,la as qe,ld as Hi,ma as ee,mc as qi,md as G,nc as Gi,oc as Wi,od as st,p as S,pb as r,qa as te,rc as O,sc as m,tb as p,tc as R,uc as q,v as _,vb as Pi,w as oe,wa as B,x as di}from"./chunk-3Q5CJMKA.js";import{b as W}from"./chunk-WFMAM73Y.js";import{a as U,b as be,g as v}from"./chunk-2AVGQ2MQ.js";function la(n,e){if(n&1&&(a(0,"mat-option",25),m(1),o()),n&2){let t=e.$implicit;s("value",t.name),r(),q(" ",t.name," ")}}function sa(n,e){if(n&1&&(a(0,"mat-option",25),m(1),o()),n&2){let t=e.$implicit;s("value",t),r(),q(" ",t.branchcode," ")}}function ca(n,e){n&1&&(a(0,"mat-error"),m(1,"Please enter valid start date"),o())}function ma(n,e){n&1&&(a(0,"mat-error"),m(1,"Please enter valid expiration date"),o())}function da(n,e){n&1&&(a(0,"mat-error"),m(1,"Please enter valid expiration date"),o())}function pa(n,e){n&1&&(a(0,"mat-error"),m(1,"Please enter valid modified date"),o())}var ti=class wi{constructor(e,t,i){this.fb=e,this.store=t,this.auxUtilService=i,this.category=new Ge,this.branchName=new Ge,this.categories=Rt,this.refresh=new we,this.licenseCityState$=this.store.select(J.selectZipCode),this.licenseBranch$=this.store.select(J.selectBranch),this.licenseData$=this.store.select(J.selectLicenseById),this.toolbarData=[{title:"Save",type:"basic",icon:"mat_outline:save",function:()=>{this.save()}}]}ngOnInit(){this.licenseForm=this.fb.group({id:[0],state:["",[ce.required]],category:["",[ce.required]],isLicenseRequired:["",[ce.required]],branchId:[""],licenseNumber:[""],statrtDate:[],expirationDate:[""],note:[""],addedBy:[""],addedDate:[""],modifiedBy:[""],modifiedDate:[""]}),this.licenseData$.pipe(L(this)).subscribe(e=>{e&&(this.licenseDetails=e,this.licenseForm.patchValue({id:this.licenseDetails.id,state:this.licenseDetails.state,category:this.licenseDetails.category,isLicenseRequired:this.licenseDetails.islicenserequired,branchId:this.licenseDetails.branchid,licenseNumber:this.licenseDetails.licensenumber,statrtDate:this.licenseDetails.startdate=="1900-01-01T00:00:00"?"":this.licenseDetails.startdate,expirationDate:this.licenseDetails.expirationdate=="1900-01-01T00:00:00"?"":this.licenseDetails.expirationdate,note:this.licenseDetails.note,addedBy:this.licenseDetails.addedby,addedDate:this.licenseDetails.addeddate,modifiedBy:this.licenseDetails.modifiedby,modifiedDate:this.licenseDetails.modifieddate}))}),this.licenseCityState$.pipe(L(this)).subscribe(e=>{e&&this.licenseForm.get("state").setValue(e.state)}),oe([this.licenseBranch$,this.licenseForm.get("branchId").valueChanges.pipe(ge(this.licenseForm.get("branchId").value))]).pipe(L(this)).subscribe(([e,t])=>{if(e&&t){let i=e.find(l=>l.id===t);i&&this.onBranchSelected(i)}}),this.filteredCategories=S(this.categories),this.category.valueChanges.pipe(ge(""),_(e=>this.CategoryFilter(e||""))).subscribe(e=>{this.filteredCategories=S(e)})}CategoryFilter(e){return this.categories.filter(t=>t.name.toLowerCase().indexOf(e?.toLowerCase())===0)}save(){if(this.licenseForm.invalid)return;this.licenseForm.get("statrtDate").value===""&&(this.licenseForm.value.statrtDate="1900-01-01T00:00:00");let e=this.licenseForm.value;this.licenseForm.get("expirationDate").value===""&&(e.expirationDate="1900-01-01T00:00:00"),e=this.auxUtilService.transFormValuesToUpperCase(e,["state","category","licenseNumber","note","addedBy","modifiedBy","branchId","addedDate","modifiedDate","id","branchId"]),this.store.dispatch(re.UpdateLicense({licenses:e}))}trackByFn(e){return e.abbreviation}categoryhandler(e){this.category.setValue(e.option.value)}onDateChange(e,t){this.licenseForm=this.auxUtilService.manuallyCheckDateValid(e.target.value,this.licenseForm,t)}onBranchSelected(e){let t=e;this.licenseForm.get("branchId").setValue(t.id,{emitEvent:!1}),this.branchName.setValue(t.branchcode)}static{this.\u0275fac=function(t){return new(t||wi)(p(en),p(E),p(Lt))}}static{this.\u0275cmp=V({type:wi,selectors:[["app-license-details"]],features:[Le([{provide:on,useValue:{appearance:"outline"}}])],decls:108,vars:51,consts:[["autoInput",""],["auto1","matAutocomplete"],["auto2","matAutocomplete"],["statrtDate","matDatepicker"],["expirationDate","matDatepicker"],["addedDate","matDatepicker"],["modifiedDate","matDatepicker"],[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"flex","w-full","bg-white","p-1","shadow","dark:bg-transparent"],[3,"navigation","name"],[1,"w-full","pb-2","pl-1","pr-1","pt-2","md:flex"],[1,"flex","w-full","flex-col","md:w-1/2"],[1,"flex","flex-col","bg-white","p-4","shadow","dark:bg-transparent"],[1,"text-secondary","my-2","flex","items-center","text-xl","font-semibold"],[1,"mr-2",3,"svgIcon"],[1,"mt-4","flex","flex-col"],[1,"flex","w-full"],[1,"w-3/12","pr-2"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","","readonly","true","tabindex","1",1,"uppercase",3,"formControlName","placeholder"],[1,"w-6/12","pr-2"],["matInput","","type","text","tabindex","2",1,"uppercase",3,"formControlName","placeholder","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select True or False","tabindex","3",3,"formControlName"],[3,"value"],[1,"flex","w-full","pt-5"],["matInput","","tabindex","4",1,"uppercase",3,"formControlName","placeholder"],[1,"w-full",3,"subscriptSizing"],["matInput","","type","text","tabindex","4",1,"uppercase",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],["tabindex","7","matInput","","formControlName","statrtDate",3,"change","matDatepicker","placeholder"],["matIconSuffix","",3,"for"],["tabindex","8","matInput","","formControlName","expirationDate",3,"change","matDatepicker","placeholder"],["matInput","","readonly","true",1,"uppercase",3,"formControlName","placeholder"],["matInput","","readonly","true","formControlName","addedDate",3,"change","matDatepicker","placeholder"],["matIconSuffix",""],["matInput","","readonly","true","formControlName","modifiedDate",3,"change","matDatepicker","placeholder"],[1,"flex","w-full","flex-col","pl-2","md:w-1/2"],[1,"w-full"],["tabindex","9","matInput","","rows","13","placeholder","Your notes Here",1,"uppercase",3,"formControlName"]],template:function(t,i){if(t&1){let l=j();a(0,"div",7)(1,"form",8),w("ngSubmit",function(){return T(l),k(i.save())}),a(2,"div",9),f(3,"fuse-horizontal-navigation",10),o(),a(4,"div",11)(5,"div",12)(6,"div",13)(7,"div",14),f(8,"mat-icon",15),m(9," License Details "),o(),a(10,"div",16)(11,"div",17)(12,"mat-form-field",18)(13,"mat-label"),m(14,"State"),o(),f(15,"mat-icon",19)(16,"input",20),o(),a(17,"mat-form-field",21)(18,"mat-label"),m(19,"Category"),o(),f(20,"mat-icon",19)(21,"input",22,0),a(23,"mat-autocomplete",null,1),F(25,la,2,2,"mat-option",23),x(26,"async"),o()(),a(27,"mat-form-field",18)(28,"mat-label"),m(29,"License Required"),o(),f(30,"mat-icon",19),a(31,"mat-select",24)(32,"mat-option",25),m(33,"True"),o(),a(34,"mat-option",25),m(35,"False"),o()()()(),a(36,"div",26)(37,"mat-form-field",21)(38,"mat-label"),m(39,"License Number"),o(),f(40,"mat-icon",19)(41,"input",27),o(),a(42,"div",21)(43,"mat-form-field",28)(44,"mat-label"),m(45,"Branch"),o(),f(46,"mat-icon",19)(47,"input",29,0),a(49,"mat-autocomplete",30,2),w("optionSelected",function(d){return T(l),k(i.onBranchSelected(d.option.value))}),F(51,sa,2,2,"mat-option",23),x(52,"async"),o()()()(),a(53,"div",26)(54,"mat-form-field",18)(55,"mat-label"),m(56,"Start Date"),o(),a(57,"input",31),w("change",function(d){return T(l),k(i.onDateChange(d,"statrtDate"))}),o(),f(58,"mat-datepicker-toggle",32)(59,"mat-datepicker",null,3),F(61,ca,2,0,"mat-error"),o(),a(62,"mat-form-field",18)(63,"mat-label"),m(64,"Expiration Date"),o(),a(65,"input",33),w("change",function(d){return T(l),k(i.onDateChange(d,"expirationDate"))}),o(),f(66,"mat-datepicker-toggle",32)(67,"mat-datepicker",null,4),F(69,ma,2,0,"mat-error"),o()(),a(70,"div",26)(71,"mat-form-field",18)(72,"mat-label"),m(73,"Added By"),o(),f(74,"mat-icon",19)(75,"input",34),o(),a(76,"mat-form-field",18)(77,"mat-label"),m(78,"Added Date"),o(),a(79,"input",35),w("change",function(d){return T(l),k(i.onDateChange(d,"addedDate"))}),o(),f(80,"mat-datepicker-toggle",36)(81,"mat-datepicker",null,5),F(83,da,2,0,"mat-error"),o(),a(84,"mat-form-field",18)(85,"mat-label"),m(86,"Modified By"),o(),f(87,"mat-icon",19)(88,"input",34),o(),a(89,"mat-form-field",18)(90,"mat-label"),m(91,"Modified Date"),o(),a(92,"input",37),w("change",function(d){return T(l),k(i.onDateChange(d,"modifiedDate"))}),o(),f(93,"mat-datepicker-toggle",36)(94,"mat-datepicker",null,6),F(96,pa,2,0,"mat-error"),o()()()()(),a(97,"div",38)(98,"div",13)(99,"div",14),f(100,"mat-icon",15),m(101," License Notes "),o(),a(102,"div",16)(103,"div",17)(104,"mat-form-field",39)(105,"mat-label"),m(106,"Notes"),o(),f(107,"textarea",40),o()()()()()()()()}if(t&2){let l=O(24),c=O(50),d=O(60),C=O(68),h=O(82),u=O(95);r(),s("formGroup",i.licenseForm),r(2),s("navigation",i.toolbarData)("name","patient-toolbar"),r(5),s("svgIcon","person_outline"),r(7),s("svgIcon","heroicons_solid:exclamation-circle"),r(),s("formControlName","state")("placeholder","State"),r(4),s("svgIcon","mat_outline:category"),r(),s("formControlName","category")("placeholder","Category")("matAutocomplete",l),r(4),s("ngForOf",y(26,47,i.filteredCategories)),r(5),s("svgIcon","heroicons_solid:document-text"),r(),s("formControlName","isLicenseRequired"),r(),s("value",!0),r(2),s("value",!1),r(6),s("svgIcon","heroicons_solid:user-circle"),r(),s("formControlName","licenseNumber")("placeholder","License Number"),r(2),s("subscriptSizing","dynamic"),r(3),s("svgIcon","heroicons_solid:office-building"),r(),s("formControl",i.branchName)("placeholder","Branch")("matAutocomplete",c),r(4),s("ngForOf",y(52,49,i.licenseBranch$)),r(6),s("matDatepicker",d)("placeholder","Start Date"),r(),s("for",d),r(3),A(i.licenseForm.get("statrtDate").hasError("notValidDate")?61:-1),r(4),s("matDatepicker",C)("placeholder","Expiration Date"),r(),s("for",C),r(3),A(i.licenseForm.get("expirationDate").hasError("notValidDate")?69:-1),r(5),s("svgIcon","heroicons_solid:user-circle"),r(),s("formControlName","addedBy")("placeholder","Added By"),r(4),s("matDatepicker",h)("placeholder","Added Date"),r(4),A(i.licenseForm.get("addedDate").hasError("notValidDate")?83:-1),r(4),s("svgIcon","heroicons_solid:user-circle"),r(),s("formControlName","modifiedBy")("placeholder","Modified By"),r(4),s("matDatepicker",u)("placeholder","Modified Date"),r(4),A(i.licenseForm.get("modifiedDate").hasError("notValidDate")?96:-1),r(4),s("svgIcon","email"),r(7),s("formControlName","note")}},dependencies:[ke,dt,Me,Ee,mt,Te,pt,ft,cn,se,Ft,ht,Ct,_t,Et,Mt,lt,ut,Tt,It,At,gt,Dt,vt,G],encapsulation:2,data:{animation:bt}})}};ti=W([Q()],ti);var _r=v(co()),xr=v(mo()),yr=v(hi()),Sr=v(po()),br=v(fo()),wr=v(uo()),Lr=v(Si()),Dr=v(Xt()),Ir=v(bi()),Ar=v(ho()),Mr=v(vo()),Er=v(Co()),Tr=v(go());var Mi=v(eo());var zo=v(co()),qo=v(mo()),Go=v(hi()),Wo=v(po()),Qo=v(fo()),Ho=v(Qr()),Ko=v(uo()),Jo=v(Si()),Yo=v(Xt()),Zo=v(bi()),Xo=v(ho()),er=v(vo()),tr=v(Co()),ir=v(go());var fa=n=>({viewMode:n});function ua(n,e){if(n&1){let t=j();a(0,"div",6),w("click",function(){let l=T(t).viewMode,c=g();return k(c.setViewMode(l))}),f(1,"ic-icon",7),o()}if(n&2){let t=e.viewMode,i=g();s("@fadeInUp",void 0),r(),s("icon",t==="list"?i.icGallery:i.icList)("inline",!0)}}var ii=class Li{constructor(e,t){this.store=e,this.fileActions=t,this.icAdd=Ko.default,this.icRefresh=tr.default,this.icCloudDownload=qo.default,this.icTrash=Go.default,this.icEye=Wo.default,this.icList=Qo.default,this.icGallery=zo.default,this.icCloudCircle=ir.default,this.icFolder=Yo.default,this.icFile=Zo.default,this.icLink=Xo.default,this.icCopyAll=Jo.default,this.icMoreVert=er.default,this.icPencil=Ho.default,this.isAdmin=!1,this.viewMode$=this.store.select(z.selectViewMode),this.selectedFile$=this.store.select(z.selectSelectedFile),this.displayFn$=this.store.select(kt.selectIsAdmin),this.files$=this.store.select(z.selectFilesInFolder),this.folderChildren$=this.store.select(X.selectChildren),this.selectedFileFolderMap={}}ngOnInit(){this.displayFn$.pipe(L(this)).subscribe(e=>{e==!0?this.isAdmin=!0:this.isAdmin=!1}),oe([this.files$,this.folderChildren$]).pipe(L(this)).subscribe(([e,t])=>{t&&(this.selectedFileFolderMap=U(U({},this.selectedFileFolderMap),Be(t,"folderId"))),e&&(this.selectedFileFolderMap=U(U({},this.selectedFileFolderMap),Be(e,"fileId")))})}setViewMode(e){this.store.dispatch(Kt({viewMode:e==="list"?"gallery":"list"}))}downloadFile(){let e=[];this.fileActions.selection.selected.forEach(i=>{e.push(this.selectedFileFolderMap[i])}),this.store.dispatch(Jt({files:e}))}fileIsSelected(){return this.fileActions.selection.selected.every(e=>this.selectedFileFolderMap[e]?.hasOwnProperty("fileName"))}allowDelete(){return this.fileActions.selection.selected.every(t=>this.selectedFileFolderMap[t]?.hasOwnProperty("fileName"))?!0:this.fileActions.selection.selected.every(i=>!this.selectedFileFolderMap[i]?.hasOwnProperty("fileName"))}isSelected(){return this.fileActions.selection.selected.every(e=>e.hasOwnProperty("fileName")&&!e.hasOwnProperty("fileName"))}static{this.\u0275fac=function(t){return new(t||Li)(p(E),p(fe))}}static{this.\u0275cmp=V({type:Li,selectors:[["app-license-center-action-bar"]],decls:8,vars:7,consts:[["viewModeToggle",""],["id","file-action-bar",1,"flex","w-full","items-center","justify-between","px-8","py-4"],[1,"flex","w-full","flex-1","items-center","justify-between"],[1,"right","flex","items-center"],[1,"mx-2",2,"height","30px","border-right-color","blue",3,"vertical"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["matRipple","","matRippleColor","rgba(250,250,250,.2)",1,"flex","cursor-pointer","items-center","justify-center","rounded-full","px-3","py-1","hover:shadow-xl",2,"width","42px",3,"click"],["color","#2563eb","size","24px",1,"font-light","text-white",3,"icon","inline"]],template:function(t,i){if(t&1&&(a(0,"div",1)(1,"div",2)(2,"div",3),f(3,"mat-divider",4)(4,"span",5),x(5,"async"),o()()(),F(6,ua,2,3,"ng-template",null,0,rt)),t&2){let l=O(7);r(3),s("vertical",!0),r(),s("ngTemplateOutlet",l)("ngTemplateOutletContext",De(5,fa,y(5,3,i.viewMode$)))}},dependencies:[dn,Hi,nn,je,Ve,G],styles:["[_nghost-%COMP%]{width:100%}button.mat-flat-button.mat-primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.tree-scroller[_ngcontent-%COMP%]{flex:1 1 auto}  .mdc-button__label{display:flex;align-items:center}"],data:{animation:[Fo,Oe]}})}};ii=W([Q()],ii);var nr=v(Hr()),or=v(xo());function ha(n,e){n&1&&(a(0,"span",3),m(1," > "),o())}function va(n,e){if(n&1){let t=j();a(0,"div",1)(1,"div",2),w("click",function(){let l=T(t).$implicit,c=g();return k(c.setCurrentFolder(l))}),m(2),x(3,"async"),o(),F(4,ha,2,0,"span",3),o()}if(n&2){let t,i=e.$implicit,l=e.$index,c=e.$count,d=g();r(),it("dark:text-gray-400",l!==c-1)("text-blue-300",l===c-1),r(),q(" ",i.folderName.toString().indexOf("Root")===0?(t=y(3,6,d.selectedVault$))==null?null:t.vaultName:i.folderName," "),r(2),A(l!==c-1&&l!==0?4:-1)}}var rr=(()=>{class n{constructor(t,i){this.store=t,this.fileActionService=i,this.icChevronRight=nr.default,this.icFolderOpen=or.default,this.breadcrumbs$=this.store.select(Qe.selectBreadcrumbsArray)}ngOnInit(){}setCurrentFolder(t){this.fileActionService.selection.clear(),this.store.dispatch(ae({folder:t})),this.store.dispatch(to({file:null,skipNavigation:!0}))}static{this.\u0275fac=function(i){return new(i||n)(p(E),p(fe))}}static{this.\u0275cmp=V({type:n,selectors:[["app-license-file-list-breadcrumbs"]],decls:4,vars:2,consts:[[1,"flex","flex-auto","select-none","overflow-hidden","px-6","pb-4","pt-5"],[1,"relative","flex"],[1,"item-center","flex","cursor-pointer","text-lg","text-black","hover:text-blue-500",3,"click"],[1,"mx-2","text-gray-400"]],template:function(i,l){i&1&&(a(0,"div",0),ie(1,va,5,8,"div",1,ue),x(3,"async"),o()),i&2&&(r(),ne(y(3,0,l.breadcrumbs$)))},dependencies:[G],encapsulation:2})}}return n})();var ur=v(Kr()),hr=v(Jr()),vr=v(Yr()),Cr=v(Zr()),gr=v(xo()),Fr=v(Xr());var ar=v(ta()),lr=v(ia()),sr=v(ea()),cr=v(Si()),mr=v(na()),dr=v(bi());var Ca=["UpdateElementComponent"],ga=n=>({file:n});function Fa(n,e){if(n&1){let t=j();a(0,"pdf-viewer",14),w("click",function(){T(t);let l=g(3);return k(l.previewFile())}),o()}if(n&2){let t=g(2);s("src",t.fileBlob)("render-text",!0)("original-size",!0)("fit-to-page",!0)("show-all",!1)("page",1)}}function _a(n,e){if(n&1&&(a(0,"div"),m(1),x(2,"async"),x(3,"date"),o()),n&2){let t,i=g(3);r(),R(ot(3,3,(t=y(2,1,i.notification$))==null?null:t.when,"shortDate"))}}function xa(n,e){if(n&1&&(a(0,"span",13),m(1),o()),n&2){let t=e.$implicit;r(),q(" ",t.tag," ")}}function ya(n,e){if(n&1&&(a(0,"div",1)(1,"div",2),m(2,"Preview"),o(),a(3,"div",3),F(4,Fa,1,6,"pdf-viewer",4),o()(),a(5,"div",5)(6,"div",6),m(7,"PDF"),o()(),a(8,"div",7),m(9,"General"),o(),a(10,"div",8)(11,"div",9)(12,"div",10),m(13,"File Name"),o(),a(14,"div"),m(15),o()(),a(16,"div",9)(17,"div",10),m(18,"Description"),o(),a(19,"div"),m(20),o()(),a(21,"div",9)(22,"div",10),m(23,"Security Level"),o(),a(24,"div")(25,"span",11),m(26),o()()(),a(27,"div",9)(28,"div",10),m(29,"Notification"),o(),he(30),F(31,_a,4,6,"div"),x(32,"async"),ve(),o(),a(33,"div",12)(34,"div",10),m(35,"File Tags"),o(),ie(36,xa,2,1,"span",13,ue),x(38,"async"),o()(),a(39,"div",7),m(40,"Dates"),o(),a(41,"div",8)(42,"div",9)(43,"div",10),m(44,"Start Date"),o(),a(45,"div"),m(46),x(47,"datetimeformat"),o()(),a(48,"div",9)(49,"div",10),m(50,"Expiration Date"),o(),a(51,"div"),m(52),x(53,"datetimeformat"),o()(),a(54,"div",9)(55,"div",10),m(56,"Created By"),o(),a(57,"div"),m(58),o()(),a(59,"div",9)(60,"div",10),m(61,"Created Date"),o(),a(62,"div"),m(63),x(64,"datetimeformat"),o()(),a(65,"div",9)(66,"div",10),m(67,"Modified By"),o(),a(68,"div"),m(69),o()()()),n&2){let t,i=g(),l=g();r(4),A(i.fileBlob?4:-1),r(11),q(" ",i.displayName," "),r(5),R(i.description),r(5),s("matMenuTriggerFor",l.securityLevelSelect)("matMenuTriggerData",De(23,ga,i))("ngClass",l.badgeBg(i.securityLevel)),r(),R(i.securityLevel),r(5),A((t=y(32,13,l.notification$))!=null&&t.when?31:-1),r(5),ne(y(38,15,l.tags$)),r(10),R(i.startDate?y(47,17,i.startDate):""),r(6),R(i.expirationDate?y(53,19,i.expirationDate):""),r(6),R(i.createdBy),r(5),R(y(64,21,i.createdDate)),r(6),R(i.modifiedBy)}}function Sa(n,e){if(n&1&&(a(0,"div",0),F(1,ya,70,25),o()),n&2){let t=g();r(),A(t.isEditable?-1:1)}}var oi=class Di{constructor(e,t,i,l,c,d,C){this.store=e,this.cd=t,this.va=i,this.dialog=l,this.matDialogRef=c,this.data=d,this.accessUpdateElementComponentFunction=C,this.tags$=this.store.select(z.selectTags),this.notification$=this.store.select(z.selectNotifications),this.icAdd=ar.default,this.icEdit=sr.default,this.icFileCopy=cr.default,this.icCancel=lr.default,this.selectedFile$=this.store.select(z.selectSelectedFile),this.addOnBlur=!0,this.securityLevels=Array.from({length:5},(h,u)=>u),this.separatorKeysCodes=[13,188,9],this.icFile=dr.default,this.icInfo=mr.default,this.isEditable=!1,this.isEditable=d.dynamicComponentData}ngOnInit(){this.selectedFile$.pipe(L(this)).subscribe(e=>{e&&this.current!==e?.fileId&&(this.current=e.fileId,this.store.dispatch(Gt({id:e.fileId})),this.store.dispatch(Wt({fileId:e.fileId})),this.store.dispatch(Ht({fileId:e.fileId})))})}saveData(){}makeFormEditable(){if(this.isEditable=!this.isEditable,this.isEditable==!0){this.matDialogRef.close();let e={icon:"mat_outline:assignment",iconColor:"primary",title:"EDIT FILE DETAIL",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"",dynamicComponent:Bo,dynamicComponentData:!0,submitFunction:"",enterKeyEnabled:!0};this.dialog.open(de,{width:"550px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","ac-commcenter-dialog","m0-dialog","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:e}).afterClosed().pipe(L(this)).subscribe(t=>{this.isEditable=!1})}}edit(){this.selectedFile$.pipe(pi(1)).subscribe(e=>this.store.dispatch(qt({file:e})))}ngOnDestroy(){this.current=null}previewFile(){this.store.dispatch(Pt({file:this.current}))}badgeBg(e){return["bg-green-500","bg-green-300","bg-yellow-400","bg-orange-400","bg-red-400"][e]}add(e){let t=e.input,i=e.value;(i||"").trim()&&this.store.dispatch(Ut({tag:{fileId:this.current,tag:i.trim()}})),t&&(t.value="")}remove(e){this.store.dispatch(Qt({tag:e}))}setLevel(e,t){this.store.dispatch(We({file:be(U({},e),{securityLevel:t}),updateStatus:!0})),this.matDialogRef.close()}editNotification(){this.notification$.pipe(pi(1)).subscribe(e=>{this.dialog.open(ko,{data:e,minWidth:"30vw",panelClass:"dialog-no-close"})})}fileSaved(e){this.closeModal()}closeModal(){this.matDialogRef.close()}static{this.\u0275fac=function(t){return new(t||Di)(p(E),p(Ie),p(xe),p(me),p($e),p(xt,8),p(Pe))}}static{this.\u0275cmp=V({type:Di,selectors:[["ac-license-file-detail"]],viewQuery:function(t,i){if(t&1&&qi(Ca,5,Pi),t&2){let l;Gi(l=Wi())&&(i.dynamicComponentContainer=l.first)}},features:[Le([Pe])],decls:2,vars:3,consts:[[1,"flex","flex-auto","flex-col","p-2"],[1,"aspect-[9/6]"],[1,"text-lg","font-medium"],[1,"flex","h-full","items-center","justify-center","rounded-lg","border","bg-gray-50","dark:bg-card"],[1,"cursor-pointer","shadow",2,"display","block","height","inherit","width","-webkit-fill-available",3,"src","render-text","original-size","fit-to-page","show-all","page"],[1,"mt-8","flex","flex-col","items-start"],[1,"mt-1","rounded","bg-red-600","px-1.5","text-sm","font-semibold","leading-5","text-white"],[1,"mt-8","text-lg","font-medium"],[1,"mt-4","flex","flex-col","divide-y","border-b","border-t","font-medium"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"flex","justify-center","rounded-full","px-3","py-1","text-center","font-normal","uppercase",3,"matMenuTriggerFor","matMenuTriggerData","ngClass"],[1,"flex","items-center","py-3"],[1,"file-tag","ml-2","mt-1","bg-gray-600","px-1.5","text-sm","font-semibold","leading-5","text-white"],[1,"cursor-pointer","shadow",2,"display","block","height","inherit","width","-webkit-fill-available",3,"click","src","render-text","original-size","fit-to-page","show-all","page"]],template:function(t,i){if(t&1&&(F(0,Sa,2,1,"div",0),x(1,"async")),t&2){let l;A((l=y(1,1,i.selectedFile$))?0:-1,l)}},dependencies:[Fn,gn,ln,at,G,st,Re],styles:[".chip-list[_ngcontent-%COMP%]{width:100%}.custom-filed[_ngcontent-%COMP%]     .mdc-text-field{border:0!important;box-shadow:none!important}.file-tag[_ngcontent-%COMP%]{width:fit-content}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline{color:#0009!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#4299e1!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:red!important;opacity:.8!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-input-element{caret-color:#4299e1!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field-invalid .mat-input-element, .vault-center-tag-input[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:red!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field-label{color:#0009!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field.mat-focused .mat-form-field-label{color:#4299e1!important}.vault-center-tag-input[_ngcontent-%COMP%]     .mat-form-field.mat-form-field-invalid .mat-form-field-label{color:red!important}"],changeDetection:0})}};oi=W([Q()],oi);var pr=v(Xt());var ba=["*"],wa=n=>({"active rounded-2xl":n}),La=()=>({color:"#e8bb4d"});function Da(n,e){n&1&&f(0,"mat-icon",6),n&2&&s("svgIcon","folder")("ngStyle",nt(2,La))}function Ia(n,e){n&1&&(a(0,"div",7),f(1,"mat-icon",10),a(2,"div",11),m(3," PDF "),o()()),n&2&&(r(),s("svgIcon","heroicons_solid:document"))}var fr=(()=>{class n{constructor(t,i){this.store=t,this.fileActions=i,this.icFolder=pr.default,this.isFileSelected=!1,this.selectedFile$=this.store.select(He.selectSelectedFile)}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||n)(p(E),p(fe))}}static{this.\u0275cmp=V({type:n,selectors:[["ac-license-gallery-view-item"]],inputs:{item:"item",isFileSelected:"isFileSelected"},ngContentSelectors:ba,decls:14,vars:10,consts:[[1,"p-6"],[1,"-m-2","flex","flex-wrap"],[1,"bg-card","relative","m-2","h-40","w-40","rounded-2xl","p-4","shadow"],[1,"absolute","inset-0","z-10","flex","cursor-pointer","flex-col","p-4",3,"ngClass","matTooltip","matTooltipDisabled"],[1,"aspect-[9/6]"],[1,"flex","h-full","items-center","justify-center"],[1,"icon-size-24",3,"svgIcon","ngStyle"],[1,"relative"],[1,"flex","flex-auto","flex-col","justify-center","text-center","text-sm","font-medium"],[1,"text-secondary","truncate"],[1,"text-hint","icon-size-14",3,"svgIcon"],[1,"absolute","bottom-0","left-0","rounded","bg-red-600","px-1.5","text-sm","font-semibold","leading-5","text-white"]],template:function(i,l){if(i&1&&(Ui(),a(0,"div",0)(1,"div",1)(2,"div",2),zi(3),a(4,"a",3),x(5,"async"),a(6,"div",4)(7,"div",5),F(8,Da,1,3,"mat-icon",6)(9,Ia,4,1,"div",7),o()(),a(10,"div",8),he(11),a(12,"div",9),m(13),o(),ve(),o()()()()()),i&2){let c;r(4),s("ngClass",De(8,wa,((c=y(5,6,l.selectedFile$))==null?null:c.fileId)===l.item.fileId&&!l.fileActions.selection.selected.length&&l.isFileSelected))("matTooltip",l.item.displayName||l.item.folderName)("matTooltipDisabled",((l.item.displayName||l.item.folderName)==null?null:(l.item.displayName||l.item.folderName).length)<20),r(4),A(l.item.displayName?-1:8),r(),A(l.item.displayName?9:-1),r(4),R(l.item.displayName||l.item.folderName)}},dependencies:[at,sn,se,Qi,G],styles:[".gallery-item[_ngcontent-%COMP%]:not(.active):hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1));--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}@media only screen and (max-width: 600px){.responsive[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;line-height:8px}}@media only screen and (min-width: 600px) and (max-width: 800px){.responsive[_ngcontent-%COMP%]{width:21.3333333333px;height:21.3333333333px;font-size:21.3333333333px;line-height:10.6666666667px}}@media only screen and (min-width: 800px) and (max-width: 1500px){.responsive[_ngcontent-%COMP%]{width:32px;height:32px;font-size:32px;line-height:16px}}@media only screen and (min-width: 1500px) and (max-width: 1800px){.responsive[_ngcontent-%COMP%]{width:42.6666666667px;height:42.6666666667px;font-size:42.6666666667px;line-height:21.3333333333px}}@media only screen and (min-width: 1800px){.responsive[_ngcontent-%COMP%]{width:64px!important;height:64px!important;font-size:64px;line-height:32px}}"]})}}return n})();function Ma(n,e){if(n&1&&(a(0,"div",15),f(1,"ic-icon",16),a(2,"span",17),m(3,"No files found"),o()()),n&2){let t=g(2);r(),s("icon",t.icCloudNone)("inline",!0)}}function Ea(n,e){n&1&&f(0,"mat-header-cell")}function Ta(n,e){n&1&&f(0,"img",18)}function ka(n,e){if(n&1&&f(0,"ic-icon",19),n&2){let t=g(3);s("icon",t.icFolder)("inline",!0)}}function $a(n,e){if(n&1&&(a(0,"mat-cell"),F(1,Ta,1,0,"img",18)(2,ka,1,2,"ic-icon",19),o()),n&2){let t=e.$implicit;r(),A(t.displayName?1:-1),r(),A(t.displayName?-1:2)}}function Ba(n,e){n&1&&(a(0,"mat-header-cell",20),m(1," Name"),o())}function Na(n,e){if(n&1&&(a(0,"span",22),m(1),x(2,"contentType"),o()),n&2){let t=g().$implicit;r(),R(y(2,1,t.contentType))}}function Va(n,e){if(n&1&&(a(0,"mat-cell")(1,"div",21)(2,"span"),m(3),o(),F(4,Na,3,3,"span",22),o()()),n&2){let t=e.$implicit;r(3),R(t.displayName||t.folderName),r(),A(t.displayName?4:-1)}}function ja(n,e){n&1&&(a(0,"mat-header-cell",20),m(1," size"),o())}function Oa(n,e){if(n&1&&(a(0,"span"),m(1),x(2,"filesize"),o()),n&2){let t=g().$implicit;r(),R(y(2,1,t.contentSize))}}function Ra(n,e){if(n&1&&(a(0,"mat-cell"),F(1,Oa,3,3,"span"),o()),n&2){let t=e.$implicit;r(),A(t.displayName?1:-1)}}function Pa(n,e){n&1&&(a(0,"mat-header-cell",20),m(1," Modified"),o())}function Ua(n,e){if(n&1&&(a(0,"span"),m(1),x(2,"date"),o()),n&2){let t=g().$implicit;r(),q(" ",ot(2,1,t.modifiedDate,"short"),"")}}function za(n,e){if(n&1&&(a(0,"mat-cell"),F(1,Ua,3,4,"span"),o()),n&2){let t=e.$implicit;r(),A(t.displayName?1:-1)}}function qa(n,e){n&1&&f(0,"mat-header-row")}function Ga(n,e){if(n&1){let t=j();a(0,"mat-row",23),x(1,"async"),w("click",function(){let l=T(t).$implicit,c=g(2);return k(c.selectFile(l))}),o()}if(n&2){let t,i=e.$implicit,l=g(2);it("active",((t=y(1,2,l.selectedFile$))==null?null:t.fileId)===i.fileId)}}function Wa(n,e){if(n&1&&(a(0,"mat-table",3),F(1,Ma,4,2,"ng-template",5),he(2,6),F(3,Ea,1,0,"mat-header-cell",7)(4,$a,3,2,"mat-cell",8),ve(),he(5,9),F(6,Ba,2,0,"mat-header-cell",10)(7,Va,5,2,"mat-cell",8),ve(),he(8,11),F(9,ja,2,0,"mat-header-cell",10)(10,Ra,2,1,"mat-cell",8),ve(),he(11,12),F(12,Pa,2,0,"mat-header-cell",10)(13,za,2,1,"mat-cell",8),ve(),F(14,qa,1,0,"mat-header-row",13)(15,Ga,2,4,"mat-row",14),o()),n&2){let t=g();s("dataSource",t.dataSource),r(14),s("matHeaderRowDef",t.displayedColumns),r(),s("matRowDefColumns",t.displayedColumns)}}function Qa(n,e){if(n&1){let t=j();a(0,"ac-license-gallery-view-item",26),w("click",function(){let l=T(t).$implicit,c=g(2);return k(c.selectFile(l))}),o()}if(n&2){let t=e.$implicit,i=g(2);s("item",t)("isFileSelected",i.fileSelected)}}function Ha(n,e){if(n&1&&(a(0,"div",15),f(1,"ic-icon",27),a(2,"span",17),m(3,"No files found"),o()()),n&2){let t=g(2);r(),s("icon",t.icCloudNone)("inline",!0)}}function Ka(n,e){if(n&1&&(a(0,"div")(1,"div",24),ie(2,Qa,1,2,"ac-license-gallery-view-item",25,fi().trackByFn,!0),o(),F(4,Ha,4,2,"div",15),o()),n&2){let t=g();r(2),ne(t.dataSource.filteredData),r(2),A(!(t.dataSource==null||t.dataSource.data==null)&&t.dataSource.data.length?-1:4)}}function Ja(n,e){if(n&1){let t=j();a(0,"ic-icon",31),w("click",function(l){T(t);let c=g().$implicit,d=g(2);return k(d.setSelectedFile(l,c))}),o()}if(n&2){let t=g(3);s("icon",t.icAddCircle)("inline",!0)}}function Ya(n,e){if(n&1){let t=j();a(0,"ic-icon",32),w("click",function(l){T(t);let c=g().$implicit,d=g(2);return k(d.setUnselectedFile(l,c))}),o()}if(n&2){let t=g(3);s("icon",t.icCheck)("inline",!0)}}function Za(n,e){if(n&1){let t=j();a(0,"ac-gallery-view-item",26),w("click",function(){let l=T(t).$implicit,c=g(2);return k(c.selectFile(l))}),a(1,"div",28),F(2,Ja,1,2,"ic-icon",29)(3,Ya,1,2,"ic-icon",30),o()()}if(n&2){let t=e.$implicit,i=g(2);s("item",t)("isFileSelected",i.fileSelected),r(2),A(i.fileActionsMenuService.selection.isSelected(t.fileId||t.folderId)?-1:2),r(),A(i.fileActionsMenuService.selection.isSelected(t.fileId||t.folderId)?3:-1)}}function Xa(n,e){if(n&1&&(a(0,"div",15),f(1,"ic-icon",27),a(2,"span",17),m(3,"No files found"),o()()),n&2){let t=g(2);r(),s("icon",t.icCloudNone)("inline",!0)}}function el(n,e){if(n&1&&(a(0,"div")(1,"div",24),ie(2,Za,4,4,"ac-gallery-view-item",25,fi().trackByFn,!0),o(),F(4,Xa,4,2,"div",15),o()),n&2){let t=g();r(2),ne(t.dataSource.filteredData),r(2),A(!(t.dataSource==null||t.dataSource.data==null)&&t.dataSource.data.length?-1:4)}}var ri=class Ai{constructor(e,t,i,l,c,d,C){this.store=e,this.cd=t,this.fileActionsMenuService=i,this.route=l,this.dragService=c,this.dialog=d,this.router=C,this.icFolder=gr.default,this.icQueryStats=Fr.default,this.icCloudNone=vr.default,this.icControl=Cr.default,this.files$=this.store.select(z.selectFilesInFolder),this.currentFolder$=this.store.select(X.selectCurrentFolder),this.selectedFile$=this.store.select(z.selectSelectedFile),this.loading$=this.store.select(z.selectLoading),this.viewMode$=this.store.select(z.selectViewMode),this.folderChildren$=this.store.select(X.selectChildren),this.selectFolders$=this.store.select(X.selectEntities),this.allFiles$=this.store.select(z.selectEntities),this.folders$=this.store.select(X.selectAll),this.dataSource=new To,this.displayedColumns=["logo","displayName","contentSize","modifiedDate"],this.pageSize=20,this.pageSizeOptions=[5,10,20,50],this.icAddCircle=ur.default,this.icCheck=hr.default,this.fileSelected=!1,this.selectedFileFolderMap={}}ngOnInit(){oe([this.route.queryParamMap,this.selectFolders$,this.folders$,this.route.params]).pipe(L(this)).subscribe(([e,t,i,l])=>{let c=l.vaultId,d=e.get("folderId"),C=e.get("fileId"),h=parseInt(window.location.href.split("/")[5],10);if(!t||!Object.keys(t).length)return;let u=new URLSearchParams(window.location.search),N=u.get("folderId"),P=u.get("fileId"),K=!this.paramFolderId||N!==d||this.paramVaultId!==c,Ze=!this.paramFileId||P!==C;this.paramVaultId=c,this.paramFolderId=d,this.paramFileId=C;let ye=e.has("folderId")?t[d]:null;if(ye||(ye=this.findRootFolder(i,c)),e.has("folderId")&&ye){if(e.has("fileId")&&Ze){this.store.dispatch(ae({folder:ye,withFile:Number(C)}));return}K&&this.store.dispatch(ae({folder:ye}))}if(c&&!e.has("folderId")){let Xe=this.findRootFolder(i,c);Xe&&(this.router.navigateByUrl(`/company/license-center/${h}/license-folder`,{replaceUrl:!0}),this.store.dispatch(ae({folder:Xe})))}}),this.fileActionsMenuService.search.subscribe(e=>{e=e?.trim(),e=e?.toLowerCase(),this.dataSource.filter=e||"",this.cd.markForCheck()}),oe([this.files$,this.folderChildren$]).pipe(L(this)).subscribe(([e,t])=>{let i=[];t&&(this.selectedFileFolderMap=U(U({},this.selectedFileFolderMap),Be(t,"folderId")),i.push(...t)),e&&(i.push(...e),this.selectedFileFolderMap=U(U({},this.selectedFileFolderMap),Be(e,"fileId"))),this.dataSource.data=i,this.cd.detectChanges()})}findRootFolder(e,t){return e.find(i=>i.vaultId===Number(t)&&i.folderParentId===null)}setSelectedFile(e,t){e.stopImmediatePropagation(),e.preventDefault(),this.fileActionsMenuService.selection.select(t.fileId||t.folderId),t.displayName&&this.store.dispatch(pe({file:t}))}setUnselectedFile(e,t){e.stopImmediatePropagation(),e.preventDefault(),this.fileActionsMenuService.selection.deselect(t.fileId||t.folderId),t.displayName&&(this.store.dispatch(pe({file:null})),this.fileActionsMenuService.selection.selected&&this.fileActionsMenuService.selection.selected.forEach(i=>{this.selectedFileFolderMap[i].displayName&&this.store.dispatch(pe({file:this.selectedFileFolderMap[i]}))}))}selectFile(e){if(this.fileActionsMenuService.selection.clear(),!e.displayName)return this.store.dispatch(pe({file:null})),this.store.dispatch(ae({folder:e}));this.fileSelected=!0,this.store.dispatch(pe({file:e}));let t={icon:"mat_outline:assignment",iconColor:"primary",title:"VIEW FILE DETAIL",titleColor:"text-secondary",cancelButtonText:"Cancel",saveButtonText:"",dynamicComponent:oi,dynamicComponentData:!1,submitFunction:"saveData",enterKeyEnabled:!0};this.dialog.open(de,{width:"550px",maxWidth:"100%",panelClass:["animate__animated","animate__slideInRight","animated","ac-commcenter-dialog","m0-dialog","custom-container"],position:{top:"0px",right:"0px"},height:"100vh",data:t}).afterClosed().pipe(L(this)).subscribe(i=>{this.fileSelected=!1})}ngAfterViewInit(){}ngOnDestroy(){this.store.dispatch(Pn()),this.store.dispatch(no())}trackByFn(e){return e.fileId||e.folderId}static{this.\u0275fac=function(t){return new(t||Ai)(p(E),p(Ie),p(fe),p(Fe),p(Vo),p(me),p(le))}}static{this.\u0275cmp=V({type:Ai,selectors:[["app-license-center-file-list"]],decls:9,vars:6,consts:[["gallery",""],[1,"vault-center-list","flex","h-full","flex-auto","flex-col","overflow-auto"],[1,"relative","mt-0"],["matSort","","id","vault-center-table",1,"shadow-none",3,"dataSource"],[3,"show"],["cdkNoDataRow",""],["matColumnDef","logo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","displayName"],["mat-sort-header","","class","uppercase",4,"matHeaderCellDef"],["matColumnDef","contentSize"],["matColumnDef","modifiedDate"],[4,"matHeaderRowDef"],[3,"active","click",4,"matRowDef","matRowDefColumns"],[1,"flex","w-full","flex-col","items-center","justify-center","py-6","text-gray-400"],["color","#4299e1","size","48px",3,"icon","inline"],[1,"mt-5"],["src","fileTypeIcons/file-pdf-box.svg","height","18px","width","18px",2,"width","18px !important","height","18px !important","max-width","unset"],["color","#e8bb4d","size","24px",3,"icon","inline"],["mat-sort-header","",1,"uppercase"],[1,"flex","items-center"],[1,"ml-3","self-end","text-xs","uppercase","text-gray-400"],[3,"click"],[1,"flex","flex-wrap"],[1,"gallery-items","h-full","min-w-8",3,"item","isFileSelected"],[1,"gallery-items","h-full","min-w-8",3,"click","item","isFileSelected"],["color","#2f855a","size","48px",3,"icon","inline"],[1,"absolute","right-0","top-0","z-40","px-1","py-1"],["color","gray","size","18px",1,"cursor-pointer",3,"icon","inline"],["color","#2f855a","size","18px",1,"cursor-pointer",3,"icon","inline"],["color","gray","size","18px",1,"cursor-pointer",3,"click","icon","inline"],["color","#2f855a","size","18px",1,"cursor-pointer",3,"click","icon","inline"]],template:function(t,i){t&1&&(a(0,"div",1)(1,"div",2),F(2,Wa,16,3,"mat-table",3),x(3,"async"),F(4,Ka,5,1,"div"),f(5,"ac-loading-overlay",4),x(6,"async"),o()(),F(7,el,5,1,"ng-template",null,0,rt)),t&2&&(r(2),A(y(3,2,i.viewMode$)==="list"?2:4),r(3),s("show",y(6,4,i.loading$)))},dependencies:[yo,Yn,je,Ve,wo,bo,Lo,So,Do,Zn,Io,Mo,Ao,Eo,fr,Ae,G,st,No],encapsulation:2,changeDetection:0})}};ri=W([Q()],ri);var ai=class Ei{constructor(e,t,i,l){this.store=e,this.fileActions=t,this.dialog=i,this._fuseConfirmationService=l,this.icAdd=wr.default,this.icRefresh=Er.default,this.icCloudDownload=xr.default,this.icTrash=yr.default,this.icEye=Sr.default,this.icList=br.default,this.icGallery=_r.default,this.icCloudCircle=Tr.default,this.icFolder=Dr.default,this.icFile=Ir.default,this.icLink=Ar.default,this.icCopyAll=Lr.default,this.icMoreVert=Mr.default,this.isAdmin=!1,this.viewMode$=this.store.select(z.selectViewMode),this.selectedFile$=this.store.select(He.selectSelectedFile),this.displayFn$=this.store.select(kt.selectIsAdmin),this.selectedVault$=this.store.select(lo.selectCurrentVault),this.files$=this.store.select(He.selectFilesInFolder),this.folderChildren$=this.store.select(so.selectChildren),this.selectedFileFolderMap={},this.licenseFolder$=this.store.select(Zt.selectLicenseFolderByIdRep)}ngOnInit(){this.displayFn$.pipe(L(this)).subscribe(e=>{e==!0?this.isAdmin=!0:this.isAdmin=!1}),this.selectedVault$.pipe(L(this)).subscribe(e=>{this.vaultData=e}),oe([this.files$,this.folderChildren$]).pipe(L(this)).subscribe(([e,t])=>{t&&(this.selectedFileFolderMap=U(U({},this.selectedFileFolderMap),(0,Mi.keyBy)(t,"folderId"))),e&&(this.selectedFileFolderMap=U(U({},this.selectedFileFolderMap),(0,Mi.keyBy)(e,"fileId")))})}setViewMode(e){this.store.dispatch(Kt({viewMode:e==="list"?"gallery":"list"}))}fileIsSelected(){return this.fileActions.selection.selected.every(e=>this.selectedFileFolderMap[e]?.hasOwnProperty("fileName"))}allowDelete(){return this.fileActions.selection.selected.every(t=>this.selectedFileFolderMap[t]?.hasOwnProperty("fileName"))?!0:this.fileActions.selection.selected.every(i=>!this.selectedFileFolderMap[i]?.hasOwnProperty("fileName"))}isSelected(){return this.fileActions.selection.selected.every(e=>e.hasOwnProperty("fileName")&&!e.hasOwnProperty("fileName"))}deleteFile(){let e=[];this.fileActions.selection.selected.forEach(c=>{e.push(this.selectedFileFolderMap[c])});let i=e.filter(c=>c.displayName),l=e.filter(c=>!c.displayName);i.length||this.store.dispatch(io({folder:l}))}generateLink(){let e=this.fileActions.selection.selected[0];this.store.dispatch(ao({resourceType:this.selectedFileFolderMap[e].fileId?"file":"folder",resource:this.selectedFileFolderMap[e]}))}copySelection(){}renameVault(){this.dialog.open(de,{width:"30vw",height:"auto",data:{icon:"mat_outline:edit_note",title:"Edit Vault",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:_o,dynamicComponentData:{vault:this.vaultData,toCreate:"Vault",isEdit:!0},submitFunction:"edit",enterKeyEnabled:!1,deleteFunction:"delete"},autoFocus:!1}).afterClosed().pipe(Ce(e=>!!e)).subscribe(e=>{if(!e.del)return this.store.dispatch(oo(e));this._fuseConfirmationService.open({title:"Confirm Delete",message:"Do you really want to delete <b>"+this.vaultData.vaultName+"</b> and all of its files and folders?",actions:{confirm:{label:"Yes, delete it!"},cancel:{label:"Cancel"}}}).afterClosed().pipe(Ce(t=>t=="confirmed")).subscribe(t=>{this.fileActions.selection.clear(),this.store.dispatch(ro({id:e.id}))})})}changeFile(e){this.store.dispatch(zt({files:e}))}moveSelection(){}static{this.\u0275fac=function(t){return new(t||Ei)(p(E),p(fe),p(me),p(yt))}}static{this.\u0275cmp=V({type:Ei,selectors:[["app-license-folder"]],decls:4,vars:0,consts:[[1,"z-50","flex-shrink-0"],[1,""],[1,"flex-shrink-0"],[3,"emitFileChange"]],template:function(t,i){t&1&&(f(0,"app-license-center-action-bar",0)(1,"app-license-file-list-breadcrumbs",1)(2,"app-license-center-file-list",2),a(3,"ac-full-screen-dropzone",3),w("emitFileChange",function(c){return i.changeFile(c)}),o())},dependencies:[ii,rr,ri,Oo],styles:["[_nghost-%COMP%]{display:block}"],data:{animation:[Oe,Nt,$t,Xn,Bt]}})}};ai=W([Q()],ai);function il(n,e){if(n&1&&(a(0,"mat-option",13)(1,"span",27),m(2),o(),a(3,"span"),m(4),o()()),n&2){let t=e.$implicit;s("value",t.abbreviation),r(2),q(" ",t.abbreviation," "),r(2),R(t.name)}}function nl(n,e){if(n&1&&(a(0,"mat-option",13),m(1),o()),n&2){let t=e.$implicit;s("value",t.name),r(),R(t.name)}}function ol(n,e){if(n&1&&(a(0,"mat-option",13),m(1),o()),n&2){let t=e.$implicit;s("value",t),r(),q(" ",t.branchcode," ")}}function rl(n,e){if(n&1&&(a(0,"mat-error"),m(1),o()),n&2){g();let t=O(61);r(),q("Please enter valid start date!! It should be ",t," .")}}function al(n,e){if(n&1&&(a(0,"mat-error"),m(1),o()),n&2){g();let t=O(70);r(),q("Please enter valid expiration date!! It should be ",t," .")}}var li=class Ti{constructor(e,t,i,l){this.dialogRef=e,this._formBuilder=t,this.auxUtilService=i,this.store=l,this.categories=Rt,this.branchName=new Ge("",ce.required),this.usstates=vn,this.refresh=new we,this.licenseCityState$=this.store.select(J.selectZipCode),this.branch$=this.store.select(J.selectBranch)}ngOnInit(){this.contactForm=this._formBuilder.group({id:[0],state:["",[ce.required]],category:["",[ce.required]],isLicenseRequired:["",[ce.required]],branchId:["",[ce.required]],licenseNumber:[""],expirationDate:[""],statrtDate:[""],note:[""]}),this.filteredStates=this.contactForm.get("state").valueChanges.pipe(ge(""),_(e=>e?this._filterStates(e):this.usstates.slice())),this.licenseCityState$.pipe(L(this)).subscribe(e=>{e?this.contactForm.get("state").setValue(e.state):this.contactForm.get("state").setValue("")}),this.filteredCategories=this.contactForm.get("category").valueChanges.pipe(ge(""),_(e=>this.CategoryFilter(e)))}stateFilter(e){return this.usstates.filter(t=>t.name.toLowerCase().indexOf(e?.toLowerCase())===0)}CategoryFilter(e){return this.categories.filter(t=>t.name.toLowerCase().indexOf(e?.toLowerCase())===0)}saveQuickLicense(){if(this.contactForm.invalid)return;this.contactForm.get("statrtDate").value===""&&this.contactForm.patchValue({statrtDate:"1900-01-01T00:00:00"});let e=this.contactForm.value;this.contactForm.get("expirationDate").value===""&&(e.expirationDate="1900-01-01T00:00:00"),this.auxUtilService.transFormValuesToUpperCase(e,["state","category","licenseNumber","note"]),this.isInputValid(e)&&this.dialogRef.close(e)}isInputValid(e){return e.state==""||e.category==""||e.isLicenseRequired==null?!1:e.branchId!=null}_filterStates(e){let t=e.toLowerCase().replace(/\s+/g," ");return this.usstates.filter(i=>i.name.toLowerCase().replace(/\s+/g," ").includes(t)||i.abbreviation.toLowerCase().includes(t))}onDateChange(e,t){this.contactForm=this.auxUtilService.manuallyCheckDateValid(e.target.value,this.contactForm,t)}displayBranchCode(e){return e?e.branchcode:""}onBranchSelected(e){let t=e;this.contactForm.get("branchId").setValue(t.id,{emitEvent:!1}),this.branchName.setValue(t.branchcode)}static{this.\u0275fac=function(t){return new(t||Ti)(p($e),p(tn),p(Lt),p(E))}}static{this.\u0275cmp=V({type:Ti,selectors:[["app-license-quick-save"]],decls:72,vars:40,consts:[["auto","matAutocomplete"],["autoInput",""],["auto1","matAutocomplete"],["auto2","matAutocomplete"],["statrtDate","matDatepicker"],["expirationDate","matDatepicker"],[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-9"],[1,"w-full","max-w-3xl"],[3,"formGroup"],[1,"mt-4"],["bindLabel","abbreviation",1,"state-select","w-full",3,"subscriptSizing"],["matInput","","tabindex","1","aria-label","State",3,"matAutocomplete","formControlName"],["matSuffix","",1,"mr-2","flex-auto","text-3xl"],[3,"value"],[1,"mt-3"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","","type","text","tabindex","2",1,"uppercase",3,"formControlName","placeholder","matAutocomplete"],["placeholder","Select True or False","tabindex","3",3,"formControlName"],["matInput","","type","text","tabindex","4",1,"uppercase",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["matInput","","tabindex","5",1,"uppercase",3,"formControlName","placeholder"],["matInput","","formControlName","statrtDate","tabindex","6",3,"change","matDatepicker","placeholder"],["matIconSuffix","",3,"for"],[1,"mb-3","mt-3"],["matInput","","formControlName","expirationDate","tabindex","7",3,"change","matDatepicker","placeholder"],[1,"mr-1","font-bold"]],template:function(t,i){if(t&1){let l=j();a(0,"div",6)(1,"div",7)(2,"form",8)(3,"div",9)(4,"mat-form-field",10)(5,"mat-label"),m(6,"State"),o(),f(7,"input",11),a(8,"mat-icon",12),m(9,"arrow_drop_down"),o(),a(10,"mat-autocomplete",null,0),ie(12,il,5,3,"mat-option",13,ue),x(14,"async"),o()()(),a(15,"div",14)(16,"mat-form-field",15)(17,"mat-label"),m(18,"Category"),o(),f(19,"mat-icon",16)(20,"input",17,1),a(22,"mat-autocomplete",null,2),ie(24,nl,2,2,"mat-option",13,ue),x(26,"async"),o()()(),a(27,"div",14)(28,"mat-form-field",15)(29,"mat-label"),m(30,"License Required"),o(),f(31,"mat-icon",16),a(32,"mat-select",18)(33,"mat-option",13),m(34,"True"),o(),a(35,"mat-option",13),m(36,"False"),o()()()(),a(37,"div",14)(38,"mat-form-field",15)(39,"mat-label"),m(40,"Branch"),o(),f(41,"mat-icon",16)(42,"input",19,1),a(44,"mat-autocomplete",20,3),w("optionSelected",function(d){return T(l),k(i.onBranchSelected(d.option.value))}),F(46,ol,2,2,"mat-option",21),x(47,"async"),o()()(),a(48,"div",14)(49,"mat-form-field",15)(50,"mat-label"),m(51,"License Number"),o(),f(52,"mat-icon",16)(53,"input",22),o()(),a(54,"div",14)(55,"mat-form-field",15)(56,"mat-label"),m(57,"Start Date"),o(),a(58,"input",23),w("change",function(d){return T(l),k(i.onDateChange(d,"statrtDate"))}),o(),f(59,"mat-datepicker-toggle",24)(60,"mat-datepicker",null,4),F(62,rl,2,1,"mat-error"),o()(),a(63,"div",25)(64,"mat-form-field",15)(65,"mat-label"),m(66,"Expiration Date"),o(),a(67,"input",26),w("change",function(d){return T(l),k(i.onDateChange(d,"expirationDate"))}),o(),f(68,"mat-datepicker-toggle",24)(69,"mat-datepicker",null,5),F(71,al,2,1,"mat-error"),o()()()()()}if(t&2){let l=O(11),c=O(23),d=O(45),C=O(61),h=O(70);r(2),s("formGroup",i.contactForm),r(2),s("subscriptSizing","dynamic"),r(3),s("matAutocomplete",l)("formControlName","state"),r(5),ne(y(14,34,i.filteredStates)),r(4),s("subscriptSizing","dynamic"),r(3),s("svgIcon","mat_outline:category"),r(),s("formControlName","category")("placeholder","Category")("matAutocomplete",c),r(4),ne(y(26,36,i.filteredCategories)),r(4),s("subscriptSizing","dynamic"),r(3),s("svgIcon","heroicons_solid:office-building"),r(),s("formControlName","isLicenseRequired"),r(),s("value",!0),r(2),s("value",!1),r(3),s("subscriptSizing","dynamic"),r(3),s("svgIcon","mat_outline:apartment"),r(),s("formControl",i.branchName)("placeholder","Branch")("matAutocomplete",d),r(4),s("ngForOf",y(47,38,i.branch$)),r(3),s("subscriptSizing","dynamic"),r(3),s("svgIcon","heroicons_solid:user-circle"),r(),s("formControlName","licenseNumber")("placeholder","License Number"),r(2),s("subscriptSizing","dynamic"),r(3),s("matDatepicker",C)("placeholder","Start Date"),r(),s("for",C),r(3),A(i.contactForm.get("statrtDate").hasError("notValidDate")?62:-1),r(2),s("subscriptSizing","dynamic"),r(3),s("matDatepicker",h)("placeholder","Expiration Date"),r(),s("for",h),r(3),A(i.contactForm.get("expirationDate").hasError("notValidDate")?71:-1)}},dependencies:[ke,dt,Me,Ee,mt,Te,pt,ft,Ft,ht,_t,Et,se,gt,Mt,ut,Ct,Tt,lt,It,At,Dt,vt,G],encapsulation:2,data:{animation:bt}})}};li=W([Q()],li);var si=class ki{constructor(e,t,i,l,c){this._fuseMediaWatcherService=e,this.searchService=t,this.breakpointObserver=i,this.dialog=l,this.store=c,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData=[{title:"Actions",subtitle:"Add new License",type:"group",children:[{title:"Add License",type:"basic",icon:"heroicons_outline:plus-circle",function:()=>{this.openCreate()}},{title:"Clear Filter",type:"basic",icon:"heroicons_outline:trash",function:()=>{this.clearFilter()}}]},{title:"Filters",type:"group",children:[{title:"ALL",type:"basic",icon:"mat_outline:all_inclusive",link:"./all"}]}],this.searchCtrl=new Xi,this.isHandset$=this.breakpointObserver.observe([ui.Tablet,ui.Handset]).pipe(_(d=>d.matches),Ri())}ngOnInit(){this.store.dispatch(M.LoadBranchDropDown()),this.searchCtrl.valueChanges.pipe(L(this)).subscribe(e=>this.searchService.search.next(e)),this._fuseMediaWatcherService.onMediaChange$.pipe(L(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this.searchService.search.next(null)}openCreate(){let e={icon:"mat_outline:edit_note",title:"ADD LICENSE",cancelButtonText:"Cancel",saveButtonText:"Save",dynamicComponent:li,dynamicComponentData:null,submitFunction:"saveQuickLicense",enterKeyEnabled:!1};this.dialog.open(de,{width:"700px",height:"auto",data:e,autoFocus:!1}).afterClosed().pipe(L(this)).subscribe(t=>{t&&this.store.dispatch(M.AddLicense({license:t}))})}clearFilter(){this.searchService.resetFilter.next({resetGrid:!0})}static{this.\u0275fac=function(t){return new(t||ki)(p(St),p(Zi),p(Yi),p(me),p(E))}}static{this.\u0275cmp=V({type:ki,selectors:[["ac-license-center"]],decls:22,vars:9,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(t,i){if(t&1){let l=j();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),m(5," LicenseCenter "),o()()(),a(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"mat-icon",9)(11,"input",10),o()()()(),a(12,"div",11)(13,"button",12),w("click",function(){T(l);let d=O(17);return k(d.toggle())}),f(14,"mat-icon",13),o()()(),a(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),f(18,"aux-sidebar",16),o(),a(19,"mat-drawer-content",17)(20,"div",18),f(21,"router-outlet"),o()()()()}t&2&&(r(10),s("svgIcon","mat_outline:search"),r(),s("formControl",i.searchCtrl),r(3),s("svgIcon","heroicons_outline:menu"),r(2),s("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened),r(2),s("menuData",i.menuData)("showTitle",!1)("title","Referral Actions"))},dependencies:[se,ke,Me,Ee,Te,Ne,Ot,jt,pn,Vt,ct],styles:[".max-w-sx[_ngcontent-%COMP%]{max-width:16rem!important}"],data:{animation:[Oe,Nt,$t,Bt]}})}};si=W([Q()],si);var $i=v(eo());var sl=()=>["/company/license-center/"];function cl(n,e){if(n&1&&(a(0,"div",20),f(1,"ngx-avatars",24),a(2,"div",25)(3,"div",26)(4,"h2",27),m(5),o()(),a(6,"div",28)(7,"div",29),m(8),o()()()()),n&2){let t=g();r(),s("name",t.licenseDetails==null?null:t.licenseDetails.state),r(4),q(" ",t.licenseDetails==null?null:t.licenseDetails.state," "),r(3),q(" ",t.licenseDetails.id," ")}}var ci=class Bi{constructor(e,t,i,l,c,d,C){this._fuseMediaWatcherService=e,this.store=t,this.route=i,this.router=l,this.actions$=c,this.titleService=d,this.cdr=C,this.drawerMode="side",this.drawerOpened=!0,this.loading$=this.store.select(J.selectLoading).pipe(ji(500)),this.data$=this.route.paramMap.pipe(I(h=>this.store.select(J.selectLicenseById))),this.licenseFolder$=this.store.select(Zt.selectLicenseFolderByIdRep),this.menuData$=new et([{title:"Servicing Actions",type:"group",children:[{title:"License",type:"basic",icon:"heroicons_outline:location-marker",link:"./license-details",classes:{wrapper:"padding-style"}}]},{title:"Folder",type:"group",children:[]}])}ngOnInit(){this.title=this.router.url.split("/")[4],this.titleService.setValue(this.title),this.titleService.value$.pipe(L(this)).subscribe(e=>{setTimeout(()=>{this.title=e})}),this.data$.pipe(L(this)).subscribe(e=>{e&&(this.licenseDetails=e,this.store.dispatch(re.AddLicenseFolder({id:e.state})))}),this.licenseFolder$.pipe(L(this)).subscribe(e=>{if(e){this.store.dispatch(Se({id:e.vaultId}));let t=[{title:e.folderName,type:"basic",link:"./license-folder",queryParams:{folderId:e.folderId},icon:"heroicons_outline:folder",function:()=>{this.store.dispatch(Se({id:e.vaultId}))}}],i=this.menuData$.getValue();i[1]=be(U({},i[1]),{children:(0,$i.cloneDeep)(t)}),this.menuData$.next((0,$i.cloneDeep)(i)),this.cdr.detectChanges()}}),this._fuseMediaWatcherService.onMediaChange$.pipe(L(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){}static{this.\u0275fac=function(t){return new(t||Bi)(p(St),p(E),p(Fe),p(le),p(Z),p(_n),p(Ie))}}static{this.\u0275cmp=V({type:Bi,selectors:[["app-license-center-details"]],decls:41,vars:26,consts:[["matDrawer",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"flex-auto"],[3,"show"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[1,"mx-6","mt-6","text-2xl","font-bold"],[3,"appearance","navigation","inner","mode","name","opened"],[1,"flex","flex-col"],[1,"bg-card","flex","flex-0","flex-col","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:pb-0","sm:pb-4","sm:pt-4"],[1,"min-w-0","flex-1"],[1,"hidden","w-full","flex-wrap","items-center","font-medium","sm:flex"],[1,"whitespace-nowrap","text-sm","font-bold","uppercase","tracking-wider","text-primary-500"],[1,"ml-1","flex","items-center","whitespace-nowrap"],[1,"text-secondary","icon-size-5",3,"svgIcon"],[1,"ml-1","whitespace-nowrap","text-sm","font-bold","uppercase","tracking-wider","text-primary-500",3,"routerLink"],[1,"text-secondary","ml-1","whitespace-nowrap","text-sm","font-bold","uppercase","tracking-wider"],[1,"flex","pl-4","pt-4","sm:hidden"],[1,"text-secondary","-ml-1.5","inline-flex","items-center","font-medium",3,"routerLink"],[1,"ml-1"],[1,"bg-card","flex","flex-0","flex-col","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:pb-4","sm:pt-0"],[1,"flex"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],["size","75",1,"mr-4","mt-1",3,"name"],[1,"items-left","my-auto"],[1,"grid"],[1,"my-auto","truncate","text-2xl","font-extrabold","leading-7","sm:leading-10","md:text-3xl"],[1,"flex","items-center"],[1,"mr-2","flex","flex-none","items-center","rounded","bg-yellow-300","px-2","text-xs","font-medium"]],template:function(t,i){if(t&1){let l=j();a(0,"div",1)(1,"mat-drawer-container",2),f(2,"ac-loading-overlay",3),x(3,"async"),a(4,"mat-drawer",4,0)(6,"div",5),m(7,"License Details"),o(),f(8,"fuse-vertical-navigation",6),x(9,"async"),o(),a(10,"mat-drawer-content",7)(11,"div",8)(12,"div",9)(13,"div")(14,"div",10)(15,"div")(16,"a",11),m(17,"Home"),o()(),a(18,"div",12),f(19,"mat-icon",13),a(20,"a",14),m(21,"License Center"),o()(),a(22,"div",12),f(23,"mat-icon",13),a(24,"span",15),m(25),o()()(),a(26,"div",16)(27,"a",17),f(28,"mat-icon",13),a(29,"span",18),m(30,"Back"),o()()()()()(),a(31,"div",19)(32,"div",9),F(33,cl,9,3,"div",20),o(),a(34,"div",21)(35,"button",22),w("click",function(){T(l);let d=O(5);return k(d.toggle())}),f(36,"mat-icon",23),o()()(),a(37,"div",2),f(38,"ac-loading-overlay",3),x(39,"async"),f(40,"router-outlet"),o()()()()}t&2&&(r(2),s("show",y(3,19,i.loading$)),r(2),s("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened),r(4),s("appearance","default")("navigation",y(9,21,i.menuData$))("inner",!0)("mode","side")("name","patient-details-navigation")("opened",!0),r(11),s("svgIcon","heroicons_solid:chevron-right"),r(),s("routerLink",nt(25,sl)),r(3),s("svgIcon","heroicons_solid:chevron-right"),r(2),R(i.title),r(2),s("routerLink","./.."),r(),s("svgIcon","heroicons_solid:chevron-left"),r(5),A(i.licenseDetails?33:-1),r(3),s("svgIcon","heroicons_outline:menu"),r(2),s("show",y(39,23,i.loading$)))},dependencies:[Ot,Ae,jt,mn,Vt,se,Ki,yn,xn,Ne,ct,G],encapsulation:2,changeDetection:0})}};ci=W([Q()],ci);var mi=class Ni{constructor(e,t,i,l,c,d){this.store=e,this.route=t,this.router=i,this.actions$=l,this.dateTimeFormate=c,this._fuseConfirmationService=d,this.columnDefs=[{headerName:"ID",field:"id",minWidth:75,filter:"agMultiColumnFilter",hide:!1},{headerName:"State",sort:"asc",minWidth:101,field:"state",filter:"agMultiColumnFilter",hide:!1},{headerName:"Category",minWidth:300,field:"category",filter:"agMultiColumnFilter",hide:!1},{headerName:"License",minWidth:100,field:"isLicenseRequired",filter:"agMultiColumnFilter",cellRenderer:un,cellRendererParams:{field:"isLicenseRequired"},hide:!1},{headerName:"Branch Id",minWidth:101,field:"branchId",filter:"agMultiColumnFilter",hide:!1},{headerName:"License Number",minWidth:101,field:"licenseNumber",filter:"agMultiColumnFilter",hide:!1},{headerName:"Start Date",minWidth:101,field:"statrtDate",filter:"agMultiColumnFilter",valueFormatter:C=>this.dateTimeFormate.transform(C.data.statrtDate),hide:!1},{headerName:"Expiration Date",minWidth:101,field:"expirationDate",valueFormatter:C=>this.dateTimeFormate.transform(C.data.expirationDate),filter:"agMultiColumnFilter",hide:!1},{headerName:"Added By",minWidth:85,field:"addedBy",filter:"agMultiColumnFilter",hide:!1},{headerName:"Added Date",minWidth:150,field:"addedDate",valueFormatter:C=>this.dateTimeFormate.transform(C.data.addedDate),filter:"agMultiColumnFilter",hide:!1},{headerName:"Modified By",minWidth:70,field:"modifiedBy",valueFormatter:C=>this.dateTimeFormate.transform(C.data.modifiedBy),filter:"agMultiColumnFilter",hide:!1},{headerName:"Modified Date",minWidth:101,field:"modifiedDate",valueFormatter:C=>this.dateTimeFormate.transform(C.data.modifiedDate),filter:"agMultiColumnFilter",hide:!1},{headerName:"Actions",minWidth:101,field:"actions",cellRenderer:fn,cellRendererParams:{menuItems:[{name:"Delete Permanently",action:this.deleteRow.bind(this),icon:"mat_outline:delete",color:"text-red-500"}]},filter:!1,sortIndex:13,hide:!1,sortable:!1}],this.rowData$=new et([]),this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.visibleColumns=["state","category","isLicenseRequired","branchId","licenseNumber","statrtDate","expirationDate","addedBy","addedDate","actions"],this.loading$=this.store.select(J.selectLoading),this.data$=this.route.paramMap.pipe(I(C=>this.store.select(J.selectAll))),this.refresh=new we,this.refresh$=this.refresh.asObservable()}ngOnInit(){oe([this.route.paramMap,this.refresh$.pipe(ge(null))]).pipe(L(this)).subscribe(([e])=>{switch(e.get("filterSlug")){case"all":this.store.dispatch(M.LoadBranchDropDown()),this.store.dispatch(M.LoadLicenses({filter:"getall"}));break}}),this.data$.pipe(L(this)).subscribe(e=>{this.rowData$.next(e)}),this.actions$.pipe(b(M.Refresh),L(this)).subscribe(e=>this.refresh.next(e))}deleteRow(e){this.deleteContact(e.data)}ngOnDestroy(){this.store.dispatch(M.ResetState())}openItem(e){this.router.navigateByUrl(`/company/license-center/${e.api.getSelectedRows()[0].id}/license-details`)}deleteContact(e){this._fuseConfirmationService.open({title:"Delete License",message:"Are you sure you want to delete this license? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().pipe(L(this)).subscribe(i=>{i==="confirmed"&&this.store.dispatch(M.DeleteLicense({dto:e}))})}selectionChange(e){["actions","phone"].includes(e.column.colId)||this.openItem(e)}static{this.\u0275fac=function(t){return new(t||Ni)(p(E),p(Fe),p(le),p(Z),p(Re),p(yt))}}static{this.\u0275cmp=V({type:Ni,selectors:[["ac-license-center-table"]],features:[Le([Cn,Re])],decls:5,vars:11,consts:[[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","shadow"],[3,"cellClicked","gridOptions","component","columnDefs","rowData","visibleColumns","agGridHeight","loading"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1)(2,"aux-ag-grid",2),x(3,"async"),x(4,"async"),w("cellClicked",function(c){return i.selectionChange(c)}),o()()()),t&2&&(r(2),s("gridOptions",i.options)("component","referralcenter")("columnDefs",i.columnDefs)("rowData",y(3,7,i.rowData$))("visibleColumns",i.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",y(4,9,i.loading$)))},dependencies:[hn,G],encapsulation:2,changeDetection:0})}};mi=W([Q()],mi);var kr=(()=>{class n{constructor(t,i){this.store=t,this.route=i}canActivate(t){return this.checkStore(t).pipe(I(()=>S(!0)),$(()=>S(!1)))}checkStore(t){return this.store.select(J.selectLicenseById).pipe(I(i=>i?S(!0):(this.store.dispatch(M.LoadLicensesById({id:t.params.id})),S(!0))),Ce(i=>!!i))}static{this.\u0275fac=function(i){return new(i||n)(B(E),B(Fe))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $r=(()=>{class n{constructor(t,i){this.actions$=t,this.apiService=i,this.updateLicense$=D(()=>this.actions$.pipe(b(re.UpdateLicense),I(l=>this.apiService.saveLicense(l.licenses).pipe(_(c=>(_e.EDIT_SUCCESS(),re.UpdateLicenseSuccess({licenses:c}))),$(c=>(_e.EDIT_FAILURE(),S(re.UpdateLicenseFailure({error:c.error})))))))),this.loadLicensesById$=D(()=>this.actions$.pipe(b(re.AddLicenseFolder),I(l=>this.apiService.getLicenseFolderById(l.id).pipe(_(c=>re.AddLicenseFolderSuccess({licenseFolder:c})),$(c=>S(re.AddLicenseFolderFailure({error:c.error})))))))}static{this.\u0275fac=function(i){return new(i||n)(B(Z),B(wt))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Br=(()=>{class n{constructor(t,i){this.actions$=t,this.apiService=i,this.loadLicenses$=D(()=>this.actions$.pipe(b(M.LoadLicenses),I(l=>this.apiService.getAllLicense(l.filter).pipe(_(c=>M.LoadLicensesSuccess({licenses:c})),$(c=>S(M.LoadLicensesFailure({error:c.error}))))))),this.loadLicensesById$=D(()=>this.actions$.pipe(b(M.LoadLicensesById),I(l=>this.apiService.getLicenseById(l.id).pipe(_(c=>M.LoadLicensesByIdSuccess({License:c})),$(c=>S(M.LoadLicensesByIdFailure({error:c.error}))))))),this.LoadCityAndStateDropDown$=D(()=>this.actions$.pipe(b(M.LoadCityAndStateDropDown),I(l=>this.apiService.getStateCityBasedOnZipCode(l.zipCode).pipe(_(c=>M.LoadCityAndStateDropDownSuccess({zipCodeLookup:c})),$(c=>S(M.LoadCityAndStateDropDownFailure({error:c.error}))))))),this.deleteLicense$=D(()=>this.actions$.pipe(b(M.DeleteLicense),Oi(l=>this.apiService.deleteLicense(l.dto).pipe(_(()=>(_e.DELETE_SUCCESS(),M.DeleteLicenseSuccess())),$(c=>(_e.DELETE_FAILURE(),S(M.DeleteLicenseFailure({error:c.error})))))))),this.addLicense$=D(()=>this.actions$.pipe(b(M.AddLicense),I(l=>this.apiService.saveLicense(l.license).pipe(_(()=>(_e.ADD_SUCCESS(),M.AddLicenseSuccess())),$(c=>(_e.ADD_FAILURE(),S(M.AddLicenseFailure({error:c.error})))))))),this.LoadBranches$=D(()=>this.actions$.pipe(b(M.LoadBranchDropDown),I(l=>this.apiService.getBranchList().pipe(_(c=>M.LoadBranchDropDownSuccess({branch:c})),$(c=>S(M.LoadBranchDropDownFailure({error:c.error}))))))),this.refresh$=D(()=>this.actions$.pipe(b(M.DeleteLicenseSuccess,M.AddLicenseSuccess),_(()=>M.Refresh())))}static{this.\u0275fac=function(i){return new(i||n)(B(Z),B(wt))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Pr=v(Wr());var Nr=v(hi()),Vr=v(ra()),jr=v(Xt()),Or=v(oa());function dl(n,e){n&1&&(a(0,"div",6),m(1,"No files selected"),o())}function pl(n,e){if(n&1){let t=j();a(0,"mat-list-item",8)(1,"div",14),f(2,"img",15),a(3,"div",16)(4,"span"),m(5),o(),a(6,"span")(7,"button",17),w("click",function(){let l=T(t).$index,c=g();return k(c.deleteFile(l))}),f(8,"ic-icon",18),o()()()()()}if(n&2){let t=e.$implicit,i=g();r(5),R(t.displayName),r(3),s("icon",i.icTrash)}}var Rr=(()=>{class n{constructor(t,i,l){this.data=t,this.ref=i,this.store=l,this.icOutlineLibraryAdd=Vr.default,this.icTrash=Nr.default,this.icSave=Or.default,this.icFolder=jr.default,this.loading$=this.store.select(z.selectLoading)}ngOnInit(){}deleteFile(t){this.data.files.splice(t,1)}addFilesClicked(t){tt(...Array.from(t.target.files).map(i=>jo(i))).subscribe(i=>{this.data.files=this.data.files.concat(...i)})}uploadFiles(){let t=this.data.files.map(i=>be(U({},i),{folderId:this.data.folder.folderId}));this.ref.close(t)}static{this.\u0275fac=function(i){return new(i||n)(p(xt),p($e),p(E))}}static{this.\u0275cmp=V({type:n,selectors:[["ac-license-file-upload"]],decls:19,vars:10,consts:[["filepicker",""],[1,"mat-dialog-title","flex","w-full","items-center"],[1,"flex","w-full","justify-end"],[1,"flex","items-center","rounded-full","bg-primary","px-4","py-2","text-white"],["size","18px",1,"mr-2",3,"inline","icon"],[1,"mat-dialog-content","my-4","flex","flex-wrap"],[1,"flex","w-full","justify-center","p-3","text-sm","text-gray-500"],[1,"w-full"],[1,"mb-2","w-full"],[1,"mt-6","w-full"],["hidden","true","type","file","onclick","this.value=null","accept",".pdf",3,"change","multiple"],["mat-button","","color","primary",1,"w-full",3,"click"],["size","18px",1,"mr-2",3,"icon","inline"],[3,"show"],[1,"flex","items-center"],["mat-list-avatar","","src","fileTypeIcons/file-pdf-box.svg","height","40","width","40",1,"mr-4",2,"width","40px","height","40px"],[1,"flex","w-full","items-center","justify-between"],["mat-icon-button","","color","warn",1,"flex","items-center","justify-center",3,"click"],["size","18px",3,"icon"]],template:function(i,l){if(i&1){let c=j();a(0,"div",1)(1,"div",2)(2,"span",3),f(3,"ic-icon",4),m(4),o()()(),a(5,"div",5),F(6,dl,2,0,"div",6),a(7,"mat-list",7),ie(8,pl,9,2,"mat-list-item",8,ue),o(),a(10,"div",9)(11,"input",10,0),w("change",function(C){return T(c),k(l.addFilesClicked(C))}),o(),a(13,"button",11),w("click",function(){T(c);let C=O(12);return k(C.click())}),f(14,"ic-icon",12),a(15,"span"),m(16,"Add Files"),o()()()(),f(17,"ac-loading-overlay",13),x(18,"async")}i&2&&(r(3),s("inline",!0)("icon",l.icFolder),r(),q(" ",l.data.folder.folderName,""),r(2),A(l.data.files!=null&&l.data.files.length?-1:6),r(2),ne(l.data.files),r(3),s("multiple",!0),r(3),s("icon",l.icOutlineLibraryAdd)("inline",!0),r(3),s("show",y(18,8,l.loading$)))},dependencies:[je,Ve,Sn,bn,Ne,rn,Ae,G],encapsulation:2})}}return n})();var Ur=(()=>{class n{constructor(t,i,l,c,d,C){this.actions$=t,this.store=i,this.router=l,this.vaultApiService=c,this.sheet=d,this.dialog=C,this.loadTags$=D(()=>this.actions$.pipe(b(Wt),I(({fileId:h})=>this.vaultApiService.getTags(h).pipe(_(u=>Bn({tags:u,fileId:h})),$(u=>S(Nn({error:u}))))))),this.initAddFiles$=D(()=>this.actions$.pipe(b(zt),ee(this.store.select(X.selectCurrentFolder)),I(([{files:h},u])=>this.dialog.open(de,{width:"40vw",height:"auto",data:{icon:"mat_outline:edit_note",title:"Upload Files",cancelButtonText:"Cancel",saveButtonText:"Upload",dynamicComponent:Rr,dynamicComponentData:{files:h,folder:u},submitFunction:"uploadFiles",enterKeyEnabled:!1},autoFocus:!1}).afterClosed()),Ce(h=>!!h),_(h=>gi({files:h})))),this.addFiles=D(()=>this.actions$.pipe(b(gi),I(({files:h})=>tt(...h.map(u=>this.vaultApiService.addFile(u))).pipe(_(u=>Mn({allFiles:u})),$(u=>S(En({error:u}))))))),this.loadNotifications$=D(()=>this.actions$.pipe(b(Ht),I(({fileId:h})=>this.vaultApiService.getNotifications(h).pipe(_(u=>On({notification:u[0],fileId:h})),$(u=>S(Rn({error:u}))))))),this.downloadFile$=D(()=>this.actions$.pipe(b(Jt),I(({files:h})=>{let u=h.map(N=>this.vaultApiService.getFile(N.fileId).pipe(_(P=>P[0])));return Vi(u).pipe(_(N=>Fi({files:N})),$(N=>S(Un({error:N}))))}))),this.downloadFileSuccess$=D(()=>this.actions$.pipe(b(Fi),qe(({files:h})=>{h.forEach(u=>{let N=ei(u.fileBlob,"application/pdf"),P=URL.createObjectURL(N),K=document.createElement("a");K.download=u.displayName,K.href=P,K.target="_blank",K.click()})})),{dispatch:!1}),this.initUpdateFile$=D(()=>this.actions$.pipe(b(qt),I(({file:h})=>this.sheet.open(Pe,{data:{element:h,type:"file"}}).afterDismissed()),Ce(h=>!!h),_(h=>We({file:h,updateStatus:null})))),this.updateFile$=D(()=>this.actions$.pipe(b(We),ee(this.store.select(X.selectCurrentFolder)),di(([{file:h,updateStatus:u},N])=>{if(h.fileBlob){let P=h.fileBlob;delete h.fileBlob}return this.vaultApiService.addFile(h).pipe(di(P=>{let K=[Tn({file:{id:h.fileId,changes:P},updateStatus:u})];return u&&K.push(Hn({file:P})),K}),$(P=>S(kn({error:P}))),qe(()=>{Pr.default.fire({position:"top-end",icon:"success",title:"Your file has been saved",showConfirmButton:!1,timer:1500})}))}))),this.previewFile$=D(()=>this.actions$.pipe(b(Pt),ee(this.store.select(z.selectSelectedFile)),I(([{file:h},u])=>this.vaultApiService.getFile(h.fileId||u.fileId).pipe(_(N=>vi({file:N[0]})),$(N=>S(Ci({error:N}))))))),this.previewFileSuccess$=D(()=>this.actions$.pipe(b(vi),qe(({file:h})=>{let u=ei(h.fileBlob,"application/pdf"),N=URL.createObjectURL(u);window?.open(N,"_blank")})),{dispatch:!1}),this.addTag$=D(()=>this.actions$.pipe(b(Ut),I(({tag:h})=>this.vaultApiService.addTag(h).pipe(_(u=>In({tag:u})),$(u=>(console.log(u),S(An({error:u})))))))),this.deleteTag$=D(()=>this.actions$.pipe(b(Qt),I(({tag:h})=>this.vaultApiService.deleteTag(h).pipe(_(()=>Vn()),$(u=>S(jn({error:u}))))))),this.getFileURL$=D(()=>this.actions$.pipe(b(Gt),I(({id:h})=>this.vaultApiService.getFile(h).pipe(_(u=>{let N=ei(u[0].fileBlob,"application/pdf");return URL.createObjectURL(N)}),_(u=>$n({url:u})),$(u=>S(Ci({error:u}))))))),this.upsertFiles$=D(()=>this.actions$.pipe(b(ae),qe(()=>this.store.dispatch(wn())),ee(this.store.select(z.selectFilesInFolder)),I(([{folder:h,withFile:u},N])=>this.vaultApiService.getFiles(h?.folderId).pipe(_(P=>Ln({files:P})),$(P=>(console.log(P),S(Dn({error:P})))))))),this.setCurrentFolder$=D(()=>this.actions$.pipe(b(pe),ee(this.store.select(X.selectCurrentFolderId)),_(([{file:h,skipNavigation:u=!1},N])=>{let P=parseInt(window.location.href.split("/")[5],10);if(!u){let K={};N&&(K.folderId=N),h&&(K.fileId=h.fileId);let Ze=new URLSearchParams(K).toString(),ye=Ze.length?"?"+Ze:"",Xe=`/company/license-center/${P}/license-folder${ye}`;this.router.navigateByUrl(Xe)}})),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||n)(B(Z),B(E),B(le),B(xe),B($o),B(me))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();var zr=(()=>{class n{constructor(t,i,l){this.actions$=t,this.store=i,this.vaultApiService=l,this.upsertFolderTrees$=D(()=>this.actions$.pipe(b(Se),ee(this.store.select(Qe.selectEntities)),I(([{id:c},d])=>Object.keys(d).includes(String(c))?S(Yt({folderTree:d[c]})):this.vaultApiService.getFolderTreeJson(c).pipe(_(C=>Yt({folderTree:C})),$(C=>(console.log(C),S(zn({error:C})))))))),this.updateFolderTree$=D(()=>this.actions$.pipe(b(Gn),I(({vaultId:c})=>this.vaultApiService.getFolderTreeJson(c).pipe(_(d=>_i({folderTree:{id:c,changes:d}})),$(d=>S(Wn({error:d}))))))),this.buildFolderTreeBreadcrumbs$=D(()=>this.actions$.pipe(b(Yt,_i),ee(this.store.select(Qe.selectEntities)),_(([c,d])=>Object.entries(d).reduce((C,[h,u])=>(C[h]=Ro(u),C),Object.create(null))),_(c=>qn({breadcrumbs:c}))))}static{this.\u0275fac=function(i){return new(i||n)(B(Z),B(E),B(xe))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();var qr=(()=>{class n{constructor(t,i,l,c){this.actions$=t,this.vaultApiService=i,this.router=l,this.store=c,this.upsertFolders$=D(()=>this.actions$.pipe(b(Se),ee(this.store.select(X.selectAll)),I(([{id:d},C])=>{let h=C.filter(u=>u.vaultId===d);return h.length?S(xi({folders:h})):this.vaultApiService.getFolders(d).pipe(_(u=>xi({folders:u})),$(u=>S(Qn({error:u}))))}))),this.setCurrentFolder$=D(()=>this.actions$.pipe(b(ae),ee(this.store.select(X.selectEntities)),_(([d,C])=>{let u=`/company/license-center/${parseInt(window.location.href.split("/")[5],10)}/license-folder`;d.folder?.folderId&&(u+=`?folderId=${d.folder?.folderId}`);let N=new URLSearchParams(window.location.search),P=Number(N.get("folderId"));!d.withFile&&P!==d.folder?.folderId&&this.router.navigateByUrl(u),d.withFile&&!C[d.withFile]&&this.vaultApiService.getFile(d.withFile).subscribe(K=>{this.store.dispatch(pe({file:K[0]}))})})),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||n)(B(Z),B(xe),B(le),B(E))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();var Gr=[Ji(Kn,Jn),an([Br,$r,qr,Ur,zr])];var Nd=[{path:"",canActivate:[yi],component:si,providers:Gr,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:":filterSlug",component:mi}]},{path:":id",component:ci,canActivate:[kr,yi],children:[{path:"",redirectTo:"license-details",pathMatch:"full"},{path:"license-details",component:ti},{path:"license-folder",component:ai}]}];export{Nd as default};
