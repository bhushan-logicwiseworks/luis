import{l as yt}from"./chunk-ZWQIBEUI.js";import{a as dt,b as pt}from"./chunk-7O4GN6JJ.js";import{a as I}from"./chunk-Y5RI4PHI.js";import{c as At}from"./chunk-OJSM7WWP.js";import{a as ft}from"./chunk-WX54DYK2.js";import"./chunk-T3QSJAN3.js";import{a as tt}from"./chunk-3IAIBVAD.js";import"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as ot,b as rt,c as lt,e as ct}from"./chunk-W6W3L4PS.js";import{a as s,b as o,h as q,n as y,o as m,p as J,q as Q,v as n,w as X}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import"./chunk-I3M6OUQD.js";import"./chunk-BV6IOHNV.js";import{D as nt,c as et,h as at,m as it,q as st}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-M4WH542H.js";import{a as mt}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as z,b as B}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as Z}from"./chunk-HJKZPT2B.js";import{$b as v,Ab as C,Bc as H,G as w,Ic as K,J as j,Jc as V,Ob as h,Zb as g,_b as f,ha as U,ma as $,md as _,p as F,pb as D,qa as W,sc as Y,tb as A,v as G,wa as x}from"./chunk-3Q5CJMKA.js";import{b as R}from"./chunk-WFMAM73Y.js";import{a as c,b as p}from"./chunk-2AVGQ2MQ.js";var u=s("[AnalyticsData/API] Load AnalyticsDatas"),E=s("[AnalyticsData/API] Load AnalyticsData Success",o()),S=s("[AnalyticsData/API] Load AnalyticsData Failure",o()),ut=s("[Analytics] Set Loading",o()),Dt=s("[AnalyticsData/API] Add AnalyticsData",o()),ht=s("[AnalyticsData/API] Upsert AnalyticsData",o()),gt=s("[AnalyticsData/API] Add AnalyticsDatas",o()),vt=s("[AnalyticsData/API] Upsert AnalyticsDatas",o()),xt=s("[AnalyticsData/API] Update AnalyticsData",o()),Ct=s("[AnalyticsData/API] Update AnalyticsDatas",o()),It=s("[AnalyticsData/API] Delete AnalyticsData",o()),Et=s("[AnalyticsData/API] Delete AnalyticsDatas",o()),St=s("[AnalyticsData/API] Clear AnalyticsDatas");var L="analyticsDatas",r=ft(),jt=r.getInitialState({loading:!1,loaded:!1,error:null}),Tt=X(jt,n(Dt,(t,e)=>r.addOne(e.analyticsData,t)),n(ht,(t,e)=>r.upsertOne(e.analyticsData,t)),n(gt,(t,e)=>r.addMany(e.analyticsDatas,t)),n(vt,(t,e)=>r.upsertMany(e.analyticsDatas,t)),n(xt,(t,e)=>r.updateOne(e.analyticsData,t)),n(Ct,(t,e)=>r.updateMany(e.analyticsDatas,t)),n(It,(t,e)=>r.removeOne(e.id,t)),n(Et,(t,e)=>r.removeMany(e.ids,t)),n(u,t=>p(c({},t),{loading:!0,error:null})),n(E,(t,e)=>r.setAll(e.analyticsData,p(c({},t),{loading:!1,error:null,loaded:!1}))),n(S,(t,{error:e})=>p(c({},t),{loading:!1,error:e,loaded:!1})),n(St,t=>r.removeAll(t))),{selectIds:Ot,selectEntities:bt,selectAll:Nt,selectTotal:Ft}=r.getSelectors(),Mt=t=>t.loaded;var P="analytics-data";function Lt(t,e){return q({[L]:Tt})(t,e)}var $t=J(P),d;(function(t){let e=m($t,a=>a[L]);t.selectIds=m(e,Ot),t.selectEntities=m(e,bt),t.selectAll=m(e,Nt),t.selectTotal=m(e,Ft),t.selectLoaded=m(e,Mt)})(d||(d={}));var Rt=(()=>{class t{constructor(a,i,l){this.actions$=a,this.store=i,this.apiService=l,this.loadAnalyticsData$=ot(()=>this.actions$.pipe(lt(u),$(this.store.select(d.selectLoaded)),U(([O,b])=>b?F(ut({loading:!1})):this.apiService.getAnalytics().pipe(G(N=>E({analyticsData:N})),j(N=>F(S({error:N})))))))}static{this.\u0275fac=function(i){return new(i||t)(x(rt),x(y),x(mt))}}static{this.\u0275prov=W({token:t,factory:t.\u0275fac})}}return t})();var Gt=[Q(P,Lt),ct(Rt)];var wt=(()=>{class t{constructor(a,i){this.store=a,this.dateTimeFormatPipe=i,this.analytics$=this.store.select(d.selectAll),this.loaded$=this.store.select(d.selectLoaded),this.dataSource=new yt,this.visibleColumns=["name","CGM","ENTERAL","INCONTINENCE","OSTOMY","UROLOGY","TOTALS"],this.rowData=[],this.options={defaultColDef:{flex:1,filter:!0,sortable:!0}},this.columnDefs=[{headerName:"GROUP",field:"name",hide:!1,minWidth:350,sort:"asc",filter:"agMultiColumnFilter",sortIndex:1},{headerName:"CGM",field:"CGM",hide:!1,minWidth:150,filter:"agMultiColumnFilter",sortIndex:2},{headerName:"ENTERAL",field:"ENTERAL",hide:!1,minWidth:150,filter:"agMultiColumnFilter",sortIndex:3},{headerName:"INCONTINENCE",field:"INCONTINENCE",hide:!1,minWidth:175,filter:"agMultiColumnFilter",sortIndex:9},{headerName:"OSTOMY",field:"OSTOMY",hide:!1,minWidth:125,filter:"agMultiColumnFilter",sortIndex:4},{headerName:"UROLOGY",field:"UROLOGY",hide:!1,minWidth:125,filter:"agMultiColumnFilter",sortIndex:4},{headerName:"TOTALS",field:"TOTALS",hide:!1,minWidth:125,filter:"agMultiColumnFilter",sortIndex:4}]}ngOnInit(){this.store.dispatch(u()),this.analytics$.pipe(w(a=>!!a&&a?.length>0)).subscribe(a=>{this.displayedColumns=Object.keys(a[0]).filter(i=>!["id"].includes(i)).concat("TOTALS"),this.dataSource.data=a.map(i=>p(c({},i),{TOTALS:Object.entries(i).filter(([l,O])=>!isNaN(O)).reduce((l,[O,b])=>(l+=b,l),0)})),this.loaded$.subscribe(i=>{})})}ngAfterViewInit(){}static{this.\u0275fac=function(i){return new(i||t)(A(y),A(I))}}static{this.\u0275cmp=C({type:t,selectors:[["ac-analytics-table"]],features:[H([I])],decls:3,vars:8,consts:[[3,"gridOptions","rowData","columnDefs","visibleColumns","agGridHeight","loading"]],template:function(i,l){i&1&&(g(0,"div"),v(1,"aux-ag-grid",0),K(2,"async"),f()),i&2&&(D(),h("gridOptions",l.options)("rowData",l.dataSource.data)("columnDefs",l.columnDefs)("visibleColumns",l.visibleColumns)("agGridHeight","calc(100vh - 292px)")("loading",V(2,6,l.loaded$)))},dependencies:[At,_],encapsulation:2})}}return t})();var T=class k{constructor(e,a){this.store=e,this.searchService=a,this.searchCtrl=new it,this.searchCtrl.valueChanges.pipe(B(this)).subscribe(i=>this.searchService.search.next(i))}ngOnInit(){}static{this.\u0275fac=function(a){return new(a||k)(A(y),A(tt))}}static{this.\u0275cmp=C({type:k,selectors:[["ac-analytics-center"]],decls:13,vars:2,consts:[[1,"flex","h-full","w-full","flex-col"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"]],template:function(a,i){a&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),Y(5," AnalyticsCenter "),f()()(),g(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),v(10,"mat-icon",8)(11,"input",9),f()()()()(),v(12,"ac-analytics-table"),f()),a&2&&(D(10),h("svgIcon","mat_outline:search"),D(),h("formControl",i.searchCtrl))},dependencies:[Z,nt,et,at,st,wt],encapsulation:2,data:{animation:[dt,pt]}})}};T=R([z()],T);var Te=[{path:"",component:T,providers:Gt}];export{Te as default};
