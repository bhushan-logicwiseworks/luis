import{Ga as a,Oa as m,Qa as d,Sa as g,Xc as p,_a as v,c as b,ja as y,na as f,xa as i}from"./chunk-3Q5CJMKA.js";function h(n){n||(a(h),n=i(d));let e=new b(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(y(e))}function w(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&a(w);let s=t?e?.injector?.get(d)??i(d):null,c=k(e?.equal),o;e?.requireSync?o=v({kind:0},{equal:c}):o=v({kind:1,value:e?.initialValue},{equal:c});let u=n.subscribe({next:r=>o.set({kind:1,value:r}),error:r=>{if(e?.rejectErrors)throw r;o.set({kind:2,error:r})}});if(e?.requireSync&&o().kind===0)throw new f(601,!1);return s?.onDestroy(u.unsubscribe.bind(u)),p(()=>{let r=o();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new f(601,!1)}},{equal:e?.equal})}function k(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function D(n){n===void 0&&(a(D),n=i(m));let e=n.get(g);return t=>new b(s=>{let c=e.add(),o=!1;function u(){o||(c(),o=!0)}let r=t.subscribe({next:l=>{s.next(l),u()},complete:()=>{s.complete(),u()},error:l=>{s.error(l),u()}});return r.add(()=>{s.unsubscribe(),u()}),r})}export{h as a,w as b,D as c};
