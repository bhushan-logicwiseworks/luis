import{a as _e}from"./chunk-VZ64S7CE.js";import{c as xe,d as Ae}from"./chunk-LWOUF7G5.js";import{a as ke}from"./chunk-X74UJ3QR.js";import{a as Te}from"./chunk-RW26HZBH.js";import{a as De,b as Ie,c as Re}from"./chunk-BLZL7MQY.js";import{c as Fe}from"./chunk-OJSM7WWP.js";import{a as T}from"./chunk-YCMFPTNH.js";import"./chunk-GLNCR2H3.js";import{a as Ce}from"./chunk-VK4TGBYQ.js";import"./chunk-SIF5SKDU.js";import"./chunk-F5X5MWHG.js";import"./chunk-T3QSJAN3.js";import{a as he}from"./chunk-3IAIBVAD.js";import{a as de}from"./chunk-QZ2WTBPW.js";import"./chunk-KFQHPBEM.js";import"./chunk-7RWCIHFI.js";import"./chunk-HIKYOSQ5.js";import"./chunk-7LGNX6B7.js";import"./chunk-XU6AK5HV.js";import"./chunk-YP5VDLTG.js";import"./chunk-PCFNTMO3.js";import"./chunk-QG7HLPG5.js";import{a as j,b as P,c as C,e as ye}from"./chunk-W6W3L4PS.js";import{a as h,b,h as le,n as S,o as L,p as pe,q as ce,v as M,w as me}from"./chunk-7TJE7DO7.js";import"./chunk-UU7RD3EP.js";import"./chunk-UCIJYWKW.js";import"./chunk-XX7H3YTW.js";import"./chunk-MYHJKLLN.js";import"./chunk-S6VYPJGT.js";import"./chunk-I3M6OUQD.js";import{g as Se}from"./chunk-BV6IOHNV.js";import{D as be,c as ue,h as ge,m as Me,q as ve}from"./chunk-4JDFQORI.js";import"./chunk-EPIW33CJ.js";import{o as Le}from"./chunk-YUJOUWZJ.js";import"./chunk-S2ZXS5BT.js";import"./chunk-TWDZ6JFE.js";import"./chunk-M4WH542H.js";import{a as we}from"./chunk-UUGBUDN2.js";import"./chunk-CF7SUKG7.js";import{a as $,b as f}from"./chunk-ETZ3F2L4.js";import"./chunk-3QHLU7SJ.js";import{J as fe}from"./chunk-HJKZPT2B.js";import{b as se,c as ne}from"./chunk-W5GYUEPJ.js";import{$b as d,Ab as _,Bc as oe,Ia as Y,Ic as x,J as V,Ja as Z,Jc as A,Ob as c,Sc as E,Zb as m,_b as l,dc as J,f as H,fc as X,g as D,ha as w,mc as ee,md as O,nc as te,oc as ie,p as W,pb as p,qa as k,rc as re,sc as ae,tb as o,v as R,w as q,wa as F}from"./chunk-3Q5CJMKA.js";import{b as I}from"./chunk-WFMAM73Y.js";import{a as u,b as g}from"./chunk-2AVGQ2MQ.js";var Ge=h("[Map List/API] Load Map List",b()),Ke=h("[Map List/API] Load Map List Success",b()),Ue=h("[Map List/API] Load Map List Failure",b()),Qe=h("[Map List/API] Refresh"),He=h("[MapCenter Table/API] Load SalesReps"),qe=h("[MapCenter Table/API] Load SalesReps Success",b()),Ye=h("[MapCenter Table/API] Load SalesReps Failure",b()),a={LoadAMapList:Ge,LoadAMapListSuccess:Ke,LoadAMapListFailure:Ue,Refresh:Qe,LoadSalesReps:He,LoadSalesRepsSuccess:qe,LoadSalesRepsFailure:Ye};var z="map-center-table",Ze={loading:!1,error:null,maplist:[],salesreps:[]},Ee=me(Ze,M(a.LoadAMapList,t=>g(u({},t),{loading:!0})),M(a.LoadAMapListSuccess,(t,{maplist:e})=>g(u({},t),{loading:!1,maplist:e})),M(a.LoadAMapListFailure,(t,{error:e})=>g(u({},t),{loading:!1,error:e})),M(a.LoadSalesReps,t=>g(u({},t),{loading:!0})),M(a.LoadSalesRepsSuccess,(t,{salesreps:e})=>g(u({},t),{loading:!1,salesreps:e})),M(a.LoadSalesRepsFailure,(t,{error:e})=>g(u({},t),{loading:!1,error:e}))),Oe=t=>t.loading,$e=t=>t.error,je=t=>t.maplist,Pe=t=>t.salesreps;var G="map-center";function Ne(t,e){return le({[z]:Ee})(t,e)}var Xe=pe(G),v;(function(t){let e=L(Xe,i=>i[z]);t.selectLoading=L(e,Oe),t.selectError=L(e,$e),t.selectMapList=L(e,je),t.selectSalesReps=L(e,Pe)})(v||(v={}));var N=class K{constructor(e,i,r,s){this.store=e,this.cdr=i,this.searchService=r,this._fuseMediaWatcherService=s,this.salesreps$=this.store.select(v.selectSalesReps),this.searchCtrl=new Me,this.toggleMenu=!1,this.drawerMode="side",this.drawerOpened=!0,this.menuData$=new D([{title:"Browse",type:"group",children:[{title:"Active Patients",type:"basic",icon:"heroicons_outline:user-circle",link:"./active"}]},{title:"By Category",type:"group",children:[{title:"CGM",type:"basic",icon:"heroicons_outline:tag",classes:{icon:T.green.text},link:"./cgm"},{title:"Enternal",type:"basic",icon:"heroicons_outline:tag",classes:{icon:T.green.text},link:"./enteral"},{title:"Incontinence",type:"basic",icon:"heroicons_outline:tag",classes:{icon:T.green.text},link:"./incontinence"}]}])}ngOnInit(){this.searchCtrl.valueChanges.pipe(f(this)).subscribe(e=>this.searchService.search.next(e)),this.store.dispatch(a.LoadSalesReps()),this.salesreps$.pipe(f(this)).subscribe(e=>{if(e.length){let i={title:"By sales category",type:"group",children:e.map(r=>({title:r.name,type:"basic",icon:"heroicons_outline:tag",classes:{icon:T.orange.text},link:`./${r.id}`}))};this.menuData$.next([...this.menuData$.value,i]),this.cdr.detectChanges()}}),this._fuseMediaWatcherService.onMediaChange$.pipe(f(this)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}static{this.\u0275fac=function(i){return new(i||K)(o(S),o(E),o(he),o(Ce))}}static{this.\u0275cmp=_({type:K,selectors:[["aux-map-center"]],decls:23,vars:11,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","flex","flex-0","flex-col","border-b","p-6","dark:bg-transparent","sm:flex-row","sm:items-center","sm:justify-between","sm:px-10","sm:py-6"],[1,"min-w-0","flex-1"],[1,"truncate","text-3xl","font-extrabold","leading-7","tracking-tight","sm:leading-10","md:text-4xl"],[1,"min-w-0"],[1,"mt-2"],[1,"flex","flex-none","items-center","bg-white","px-4","dark:bg-transparent"],[1,"bg-base","flex","w-full","flex-1","items-center","rounded-full","border","px-5","py-4"],[1,"mr-2","icon-size-5",3,"svgIcon"],["placeholder","Search Results...","type","text",1,"placeholder-black","w-full","bg-transparent","outline-none",3,"formControl"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[3,"menuData","showTitle","title"],[1,"flex","flex-col"],[1,"flex-auto"]],template:function(i,r){if(i&1){let s=J();m(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),ae(5," MapCenter "),l()()(),m(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),d(10,"mat-icon",9)(11,"input",10),l()()()(),m(12,"div",11)(13,"button",12),X("click",function(){Y(s);let n=re(17);return Z(n.toggle())}),d(14,"mat-icon",13),l()()(),m(15,"mat-drawer-container",14)(16,"mat-drawer",15,0),d(18,"aux-sidebar",16),x(19,"async"),l(),m(20,"mat-drawer-content",17)(21,"div",18),d(22,"router-outlet"),l()()()()}i&2&&(p(10),c("svgIcon","mat_outline:search"),p(),c("formControl",r.searchCtrl),p(3),c("svgIcon","heroicons_outline:menu"),p(2),c("autoFocus",!1)("mode",r.drawerMode)("opened",r.drawerOpened),p(2),c("menuData",A(19,9,r.menuData$))("showTitle",!1)("title","SalesCode Actions"))},dependencies:[fe,be,ue,ge,ve,Le,Re,Ie,ke,De,ne,O],encapsulation:2,data:{animation:[_e,Te]},changeDetection:0})}};N=I([$()],N);var We=(()=>{class t{constructor(){this.search=new D(null),this.search$=this.search.asObservable()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var rt=["map"],B=class Q{constructor(e,i,r,s,y){this.store=e,this.route=i,this.cd=r,this.actions$=s,this.searchService=y,this.markers=[],this.title="PatientScatterMap",this.lat=31.51073,this.lng=-96.4247,this.columnDefs=[{headerName:"ID",field:"id",filter:"agMultiColumnFilter",minWidth:235},{headerName:"FIRST NAME",field:"firstName",filter:"agMultiColumnFilter",minWidth:235},{headerName:"LAST NAME",field:"lastName",filter:"agMultiColumnFilter",minWidth:235},{headerName:"CITY",field:"city",filter:"agMultiColumnFilter",minWidth:235},{headerName:"STATE",field:"state",filter:"agMultiColumnFilter",minWidth:235},{headerName:"ZIP",field:"zip",filter:"agMultiColumnFilter",minWidth:235}],this.rowData=[],this.data$=this.route.paramMap.pipe(w(n=>this.store.select(v.selectMapList))),this.paginatorOptions={pageSize:20,pageSizeOptions:[5,10,20,50]},this.loading$=this.store.select(v.selectLoading),this.refresh=new H,this.refresh$=this.refresh.asObservable(),this.visibleColumns=["id","firstName","lastName","city","state","zip"]}ngOnInit(){q([this.route.paramMap]).pipe(f(this)).subscribe(([e])=>{let i=e.get("filterSlug");this.filter=i,this.store.dispatch(a.LoadAMapList({filter:i}))}),this.data$.pipe(f(this)).subscribe(e=>{this.rowData=e,this.deleteMarkers();for(let i of e){let r={lat:i.latitude,lng:i.longitude};this.addMarker(r)}}),this.actions$.pipe(C(a.LoadAMapList),f(this)).subscribe(e=>this.refresh.next(e))}deleteRow(e){}ngAfterViewInit(){let e={center:new google.maps.LatLng(this.lat,this.lng),zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.mapElement.nativeElement,e)}addMarker(e){let i=new google.maps.Marker({position:e,map:this.map});this.markers.push(i)}setMapOnAll(e){for(let i=0;i<this.markers.length;i++)this.markers[i].setMap(e)}hideMarkers(){this.setMapOnAll(null)}showMarkers(){this.setMapOnAll(this.map)}deleteMarkers(){this.hideMarkers(),this.markers=[]}static{this.\u0275fac=function(i){return new(i||Q)(o(S),o(se),o(E),o(P),o(We))}}static{this.\u0275cmp=_({type:Q,selectors:[["aux-map-center-table"]],viewQuery:function(i,r){if(i&1&&ee(rt,5),i&2){let s;te(s=ie())&&(r.mapElement=s.first)}},features:[oe([{provide:Se,useValue:{appearance:"outline"}}])],decls:11,vars:12,consts:[["map",""],[1,"flex","flex-auto","flex-col","overflow-hidden"],[1,"relative","overflow-auto","bg-white","dark:bg-transparent"],["label","Map"],[2,"width","100%","height","650px"],["label","Data"],[3,"columnDefs","rowData","component","visibleColumns","paginatorOption","agGridHeight","loading"],[3,"show"]],template:function(i,r){i&1&&(m(0,"div",1)(1,"div",2)(2,"mat-tab-group")(3,"mat-tab",3),d(4,"div",4,0),l(),m(6,"mat-tab",5),d(7,"aux-ag-grid",6),x(8,"async"),l()(),d(9,"ac-loading-overlay",7),x(10,"async"),l()()),i&2&&(p(7),c("columnDefs",r.columnDefs)("rowData",r.rowData)("component","maptablecenter")("visibleColumns",r.visibleColumns)("paginatorOption",r.paginatorOptions)("agGridHeight","calc(100vh - 408px)")("loading",A(8,8,r.loading$)),p(2),c("show",A(10,10,r.loading$)))},dependencies:[Ae,xe,Fe,de,O],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.highlight[_ngcontent-%COMP%]{background-color:rgba(var(--color-primary),.1)}"],changeDetection:0})}};B=I([$()],B);var Ve=(()=>{class t{constructor(i,r,s){this.actions$=i,this.store=r,this.apiService=s,this.loadMapList$=j(()=>this.actions$.pipe(C(a.LoadAMapList),w(y=>this.apiService.getMapPoints(y.filter).pipe(R(n=>a.LoadAMapListSuccess({maplist:n})),V(n=>W(a.LoadAMapListFailure({error:n.error}))))))),this.loadSalesReps$=j(()=>this.actions$.pipe(C(a.LoadSalesReps),w(y=>this.apiService.getMapCenterSalesReps().pipe(R(n=>a.LoadSalesRepsSuccess({salesreps:n})),V(n=>W(a.LoadSalesRepsFailure({error:n.error}))))))),this.refresh$=j(()=>this.actions$.pipe(C(),R(()=>a.Refresh())))}static{this.\u0275fac=function(r){return new(r||t)(F(P),F(S),F(we))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ze=[ce(G,Ne),ye([Ve])];var ri=[{path:"",component:N,providers:ze,children:[{path:"",redirectTo:"active",pathMatch:"full"},{path:":filterSlug",component:B}]}];export{ri as default};
